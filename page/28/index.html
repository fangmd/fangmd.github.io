<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta property="og:type" content="website">
<meta property="og:title" content="Double">
<meta property="og:url" content="http://yoursite.com/page/28/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Double">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/28/">





  <title>Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/27/产品/App 产品开发/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/27/产品/App 产品开发/" itemprop="url">App版本升级</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-27T13:18:12+08:00">
                2016-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://www.jianshu.com/p/5b04a668f36f" alt="“进度指示器”如何有效的帮助用户体验设计？"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/27/Android/features/退出应用实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/27/Android/features/退出应用实现/" itemprop="url">Android 退出应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-27T09:23:14+08:00">
                2016-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="容器式"><a href="#容器式" class="headerlink" title="容器式"></a>容器式</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Activity&gt; activityList = <span class="keyword">new</span> LinkedList&lt;Activity&gt;();<span class="comment">//LinkedList便于删除和增加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 省略了单例代码...</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Activity activity)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        activityList.remove(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        activityList.add(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exit</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Activity activity : activityList)</span><br><span class="line">        &#123;</span><br><span class="line">            activity.finish();</span><br><span class="line">        &#125;</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        MyApplication.getInstance().addActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        MyApplication.getInstance().removeActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="广播式"><a href="#广播式" class="headerlink" title="广播式"></a>广播式</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXITACTION = <span class="string">"action.exit"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ExitReceiver exitReceiver = <span class="keyword">new</span> ExitReceiver();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        IntentFilter filter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">        filter.addAction(EXITACTION);</span><br><span class="line">        LocalBroadcastManager.getInstance(<span class="keyword">this</span>).registerReceiver(exitReceiver, <span class="keyword">new</span> IntentFilter(EXITACTION));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        LocalBroadcastManager.getInstance(<span class="keyword">this</span>).unregisterReceiver(exitReceiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ExitReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">            BaseActivity.<span class="keyword">this</span>.finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="标志式"><a href="#标志式" class="headerlink" title="标志式"></a>标志式</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Boolean isExit =<span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  onResume() &#123;</span><br><span class="line">     <span class="keyword">super</span>.onResume();</span><br><span class="line">     <span class="keyword">if</span>(Config.isExit) finish();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExitAcitivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ExitAcitivity <span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/26/Android/view/自定义View/自定义View-动画/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/26/Android/view/自定义View/自定义View-动画/" itemprop="url">自定义View -- 动画</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-26T09:23:14+08:00">
                2016-12-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="利用-属性动画"><a href="#利用-属性动画" class="headerlink" title="利用 属性动画"></a>利用 属性动画</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> mProgress;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">    Log.d(TAG, <span class="string">"onDraw: "</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// draw background</span></span><br><span class="line">    canvas.drawRGB(<span class="number">0xff</span>, <span class="number">0x00</span>, <span class="number">0x00</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// draw text</span></span><br><span class="line">    Paint.FontMetrics fontMetrics = mPaint.getFontMetrics();</span><br><span class="line">    <span class="keyword">float</span> y = getHeight() / <span class="number">2</span> + (Math.abs(fontMetrics.ascent) - fontMetrics.descent) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    canvas.drawText(mContent + mProgress, <span class="number">0</span>, y, mPaint);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startAnimate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mAnimator == <span class="keyword">null</span>) &#123;</span><br><span class="line">        mAnimator = ObjectAnimator.ofFloat(<span class="keyword">this</span>, <span class="string">"progress"</span>, <span class="number">0.5f</span>, <span class="number">1</span>);</span><br><span class="line">        mAnimator.setDuration(<span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mAnimator.isStarted()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mAnimator.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopAnimate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mAnimator == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    mAnimator.cancel();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProgress</span><span class="params">(<span class="keyword">float</span> progress)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.mProgress = progress;</span><br><span class="line">    invalidate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ObjectAnimator</code> 动画修改 <code>progress</code> 的值</li>
<li><code>invalidate()</code> 方法会触发 <code>onDraw()</code> 执行</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/12/26/Android/view/自定义View/自定义View-动画/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/25/macos/mac设置定时任务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/25/macos/mac设置定时任务/" itemprop="url">macOS 创建定时任务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-25T12:18:12+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mac-OS/" itemprop="url" rel="index">
                    <span itemprop="name">Mac OS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Mac-上执行定时任务"><a href="#Mac-上执行定时任务" class="headerlink" title="Mac 上执行定时任务"></a>Mac 上执行定时任务</h1><p>有两种方式</p>
<ol>
<li>使用 <code>launchctl</code></li>
<li>使用 Linux 中常用的 <code>crontab</code> 命令</li>
</ol>
<h1 id="launchctl"><a href="#launchctl" class="headerlink" title="launchctl"></a>launchctl</h1><h2 id="创建任务"><a href="#创建任务" class="headerlink" title="创建任务"></a>创建任务</h2><p>launchctl 任务以文件形式创建，后缀为 <code>plist</code></p>
<h3 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 名称，要全局唯一 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.double.notifier<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 要运行的程序， 如果省略这个选项，会把ProgramArguments的第一个</span></span><br><span class="line"><span class="comment">    元素作为要运行的程序 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Program<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/double/script.sh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 命令， 第一个为命令，其它为参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/double/script.sh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 运行时间 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>StartCalendarInterval<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">key</span>&gt;</span>Minute<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">integer</span>&gt;</span>30<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">key</span>&gt;</span>Hour<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">integer</span>&gt;</span>9<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">key</span>&gt;</span>Day<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">integer</span>&gt;</span>1<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">key</span>&gt;</span>Month<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">integer</span>&gt;</span>5<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 0和7都指星期天 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">key</span>&gt;</span>Weekday<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">integer</span>&gt;</span>0<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 运行间隔，与StartCalenderInterval使用其一，单位为秒 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>StartInterval<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">integer</span>&gt;</span>30<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 标准输入文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>StandardInPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/uniflor/run-in.log<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 标准输出文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>StandardOutPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/uniflor/Bin/run-out.log<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 标准错误输出文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>StandardErrorPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/uniflor/Bin/run-err.log<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dict</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>文件解析：</p>
<ul>
<li>Label</li>
<li>Program</li>
<li>ProgramArguments</li>
</ul>
<p>定义时间的参数：</p>
<ul>
<li>StartCalendarInterval</li>
<li>StartInterval</li>
</ul>
<p>可选输出参数：</p>
<ul>
<li>StandardInPath</li>
<li>StandardOutPath</li>
<li>StandardErrorPath</li>
</ul>
<h3 id="检查任务文件的格式"><a href="#检查任务文件的格式" class="headerlink" title="检查任务文件的格式"></a>检查任务文件的格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plutil -line [file.plist]</span><br></pre></td></tr></table></figure>
<h3 id="任务文件的放置位置"><a href="#任务文件的放置位置" class="headerlink" title="任务文件的放置位置"></a>任务文件的放置位置</h3><p>通常放在 <code>~/Library/LaunchAgents</code> 下即可</p>
<ul>
<li>~/Library/LaunchAgents 由用户自己定义的任务项</li>
<li>/Library/LaunchAgents 由管理员为用户定义的任务项</li>
<li>/Library/LaunchDaemons 由管理员定义的守护进程任务项</li>
<li>/System/Library/LaunchAgents 由Mac OS X为用户定义的任务项</li>
<li>/System/Library/LaunchDaemons 由Mac OS X定义的守护进程任务项</li>
</ul>
<h4 id="LaunchDaemons和LaunchAgents的区别"><a href="#LaunchDaemons和LaunchAgents的区别" class="headerlink" title="LaunchDaemons和LaunchAgents的区别"></a>LaunchDaemons和LaunchAgents的区别</h4><p>LaunchDaemons是用户未登陆前就启动的服务（守护进程）。</p>
<p>LaunchAgents是用户登陆后启动的服务（守护进程）。</p>
<h3 id="加载任务"><a href="#加载任务" class="headerlink" title="加载任务"></a>加载任务</h3><p>添加任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl load [file.plist]</span><br></pre></td></tr></table></figure>
<p>移除任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl unload [file.plist]</span><br></pre></td></tr></table></figure></p>
<p>查看任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl list</span><br></pre></td></tr></table></figure></p>
<p>参考：</p>
<ul>
<li><a href="https://my.oschina.net/shede333/blog/470377" target="_blank" rel="noopener">https://my.oschina.net/shede333/blog/470377</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/25/linux/linux-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/25/linux/linux-command/" itemprop="url">Linux Command</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-25T12:18:12+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="内存查看"><a href="#内存查看" class="headerlink" title="内存查看"></a>内存查看</h1><h2 id="free"><a href="#free" class="headerlink" title="free"></a>free</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">free </span><br><span class="line">free -m</span><br><span class="line">free -h</span><br></pre></td></tr></table></figure>
<h1 id="文件权限修改"><a href="#文件权限修改" class="headerlink" title="文件权限修改"></a>文件权限修改</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod</span><br></pre></td></tr></table></figure>
<h1 id="文件归属修改"><a href="#文件归属修改" class="headerlink" title="文件归属修改"></a>文件归属修改</h1><p>查看当前用户名:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br><span class="line">``</span><br></pre></td></tr></table></figure>
<p>chown 用户 目录或文件名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 查看硬盘使用情况</span><br></pre></td></tr></table></figure></p>
<p>df -h<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 查看内存使用情况</span><br></pre></td></tr></table></figure></p>
<p>free -h<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#  查看文件内容</span><br></pre></td></tr></table></figure></p>
<h1 id="查看小文件"><a href="#查看小文件" class="headerlink" title="查看小文件"></a>查看小文件</h1><p>cat [fiel]</p>
<h1 id="查看大量内容"><a href="#查看大量内容" class="headerlink" title="查看大量内容"></a>查看大量内容</h1><p>more [file]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看文件大小</span><br></pre></td></tr></table></figure></p>
<p>ls -lh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 内核</span><br><span class="line"></span><br><span class="line">插卡内核</span><br></pre></td></tr></table></figure></p>
<p>uname -a</p>
<p>#or </p>
<p>uname -r<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># kill process by pid file</span><br></pre></td></tr></table></figure></p>
<p>kill $(cat ~/code/posbox/posbox.pid)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-9  杀死父进程</span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line">kill -9 $(cat ~/code/posbox/posbox.pid)</span><br></pre></td></tr></table></figure></p>
<h1 id="ps-进程管理"><a href="#ps-进程管理" class="headerlink" title="ps 进程管理"></a>ps 进程管理</h1><p>Process Status</p>
<blockquote>
<p>ps 为我们提供了进程的一次性的查看，它所提供的查看结果并不动态连续的；如果想对进程时间监控，应该用 top 工具。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [参数]</span><br></pre></td></tr></table></figure>
<p>命令参数：<br>查看所有进程信息：<code>ps -A</code></p>
<p><code>ps ax</code>:</p>
<ul>
<li>a: all</li>
<li>x: x参数会显示没有控制终端的进程。</li>
</ul>
<h1 id="tail-监听文件"><a href="#tail-监听文件" class="headerlink" title="tail 监听文件"></a>tail 监听文件</h1><p>常用于 log 的监听</p>
<p>tail[必要参数][选择参数][文件]   </p>
<p>-f ： 表示循环读取</p>
<p>常用例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f [文件]</span><br></pre></td></tr></table></figure></p>
<h1 id="杀进程-uwsgi"><a href="#杀进程-uwsgi" class="headerlink" title="杀进程 uwsgi"></a>杀进程 uwsgi</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ax | grep uwsgi</span><br></pre></td></tr></table></figure>
<p>kill:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">udo pkill -f uwsgi -9</span><br></pre></td></tr></table></figure></p>
<h1 id="fuser"><a href="#fuser" class="headerlink" title="fuser"></a>fuser</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fuser: [-cfu] file ...</span><br><span class="line">    -c  file is treated as mount point</span><br><span class="line">    -f  the report is only for the named files</span><br><span class="line">    -u  print username of pid in parenthesis</span><br></pre></td></tr></table></figure>
<p>例子：查看谁正在使用数据库,并关闭该进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fuser db.sqlite3</span><br><span class="line"></span><br><span class="line"># db.sqlite3: 35756 </span><br><span class="line"></span><br><span class="line">kill 35756</span><br></pre></td></tr></table></figure>
<h1 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[minute] [hour] [day] [month] [week] [command]</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * scrapy crawl douban</span><br></pre></td></tr></table></figure>
<h1 id="which"><a href="#which" class="headerlink" title="which"></a>which</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which python3</span><br></pre></td></tr></table></figure>
<p>获取某个命令的位置</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/20/Python/django/offical-doc/Django Request:response objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/20/Python/django/offical-doc/Django Request:response objects/" itemprop="url">Django Request/response objects</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-20T13:18:12+08:00">
                2016-12-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HttpRequest"><a href="#HttpRequest" class="headerlink" title="HttpRequest"></a>HttpRequest</h1><h2 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h2><ul>
<li>HttpRequest.scheme</li>
<li>HttpRequest.body</li>
<li><p>HttpRequest.path</p>
<p>  Example: “/music/bands/the_beatles/“</p>
</li>
<li><p>HttpRequest.method</p>
</li>
<li>HttpRequest.encoding</li>
<li>HttpRequest.content_type</li>
<li>HttpRequest.content_params</li>
<li>HttpRequest.GET</li>
<li>HttpRequest.POST</li>
<li>HttpRequest.COOKIES</li>
<li>HttpRequest.FILES</li>
<li><p>HttpRequest.META</p>
<p>  HTTP headers</p>
<ul>
<li>CONTENT_LENGTH</li>
<li>CONTENT_TYPE</li>
<li>HTTP_ACCEPT</li>
<li>HTTP_ACCEPT_ENCODING</li>
<li>HTTP_ACCEPT_LANGUAGE</li>
<li>HTTP_HOST</li>
<li>HTTP_REFERER: 进站前链接网页，如果有的话。</li>
<li>HTTP_USER_AGENT: 用户浏览器的user-agent字符串，如果有的话。</li>
<li>QUERY_STRING</li>
<li>REMOTE_ADDR: 客户端IP</li>
<li>REMOTE_HOST</li>
<li>REMOTE_USER</li>
<li>REQUEST_METHOD</li>
<li>SERVER_NAME</li>
<li><p>SERVER_PORT</p>
<p>获取请求头代码例子：</p>
<p>  try:</p>
<pre><code>ua = request.META[&apos;HTTP_USER_AGENT&apos;]
</code></pre><p>  except KeyError:</p>
<pre><code>ua = &apos;unknown&apos;
</code></pre><h1 id="或者"><a href="#或者" class="headerlink" title="或者"></a>或者</h1><p>  ua = request.META.get(‘HTTP_USER_AGENT’, ‘unknown’)</p>
</li>
</ul>
</li>
<li><p>HttpRequest.resolver_match</p>
</li>
</ul>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><ul>
<li><p>HttpRequest.get_host()</p>
<p>  Example: “127.0.0.1:8000”</p>
</li>
<li>HttpRequest.get_port()</li>
<li><p>HttpRequest.get_full_path()</p>
<p>  Example: “/music/bands/the_beatles/?print=true”</p>
</li>
<li><p>HttpRequest.build_absolute_uri</p>
<p>  Example: “<a href="https://example.com/music/bands/the_beatles/?print=true&quot;" target="_blank" rel="noopener">https://example.com/music/bands/the_beatles/?print=true&quot;</a></p>
</li>
<li>HttpRequest.get_signed_cookie(key, default=RAISE_ERROR, salt=’’, max_age=None)</li>
<li>HttpRequest.is_secure():Returns True if the request is secure; that is, if it was made with HTTPS.</li>
<li>HttpRequest.is_ajax()</li>
<li>HttpRequest.read(size=None)</li>
<li>HttpRequest.readline()</li>
<li>HttpRequest.readlines()</li>
<li>HttpRequest.xreadlines()</li>
<li>HttpRequest.<strong>iter</strong>()</li>
</ul>
<h1 id="HttpResponse"><a href="#HttpResponse" class="headerlink" title="HttpResponse"></a>HttpResponse</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/19/Python/django/offical-doc/Django-admin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/19/Python/django/offical-doc/Django-admin/" itemprop="url">Django-admin</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-19T13:18:12+08:00">
                2016-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>From Git Book</p>
</blockquote>
<h1 id="django-contrib-包"><a href="#django-contrib-包" class="headerlink" title="django.contrib 包"></a>django.contrib 包</h1><p>Django自带很多优秀的附加组件，它们都存在于 django.contrib 包里。</p>
<h1 id="启动-admin"><a href="#启动-admin" class="headerlink" title="启动 admin"></a>启动 admin</h1><p>创建的工程默认已经开启了</p>
<h1 id="创建-admin-超级管理员"><a href="#创建-admin-超级管理员" class="headerlink" title="创建 admin 超级管理员"></a>创建 admin 超级管理员</h1><pre><code>python3 manage.py createsuperuser
</code></pre><h1 id="将创建好的-Model-加入到-admin-中管理"><a href="#将创建好的-Model-加入到-admin-中管理" class="headerlink" title="将创建好的 Model 加入到 admin 中管理"></a>将创建好的 Model 加入到 admin 中管理</h1><p>在 admin.py 中：调用下面的方法注册，参数是 Model</p>
<pre><code>admin.site.register(Publisher)
</code></pre><h1 id="设置-model-的字段可选"><a href="#设置-model-的字段可选" class="headerlink" title="设置 model 的字段可选"></a>设置 model 的字段可选</h1><p>model 的 Field 属性添加下面的参数</p>
<pre><code>blank=True
</code></pre><p>你想允许一个日期型（DateField、TimeField、DateTimeField）或数字型（IntegerField、DecimalField、FloatField）字段为空，你需要使用 null=True <em> 和</em> blank=True。</p>
<h1 id="自定义字段的标签"><a href="#自定义字段的标签" class="headerlink" title="自定义字段的标签"></a>自定义字段的标签</h1><p>model 的 Field 使用 verbose_name 属性更改标签名</p>
<h1 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h1><p>定义显示的名称：model 的 <strong>str</strong></p>
<pre><code>def __str__(self):
    return [name]
</code></pre><p>自定义列表：admin.py</p>
<pre><code>class AuthorAdmin(admin.ModelAdmin):
    list_display = (&apos;first_name&apos;, &apos;last_name&apos;, &apos;email&apos;)

admin.site.register(Author, AuthorAdmin)
</code></pre><p>添加一个快速查询栏:</p>
<pre><code>class AuthorAdmin(admin.ModelAdmin):
    list_display = (&apos;first_name&apos;, &apos;last_name&apos;, &apos;email&apos;)
    search_fields = (&apos;first_name&apos;, &apos;last_name&apos;)
</code></pre><p>添加过滤：</p>
<pre><code>class BookAdmin(admin.ModelAdmin):
    list_display = (&apos;title&apos;, &apos;publisher&apos;, &apos;publication_date&apos;)
    list_filter = (&apos;publication_date&apos;,)
</code></pre><p>过滤二：</p>
<pre><code>date_hierarchy = &apos;publication_date&apos;
</code></pre><p>设置排序：</p>
<pre><code>ordering = (&apos;-publication_date&apos;,)
</code></pre><h1 id="自定义编辑表单"><a href="#自定义编辑表单" class="headerlink" title="自定义编辑表单"></a>自定义编辑表单</h1><p>同样使用 ModelAdmin 子类管理</p>
<p>定义顺序：</p>
<pre><code>fields = (&apos;title&apos;, &apos;authors&apos;, &apos;publisher&apos;, &apos;publication_date&apos;)
</code></pre><p>隐藏字段：</p>
<pre><code>fields = (&apos;title&apos;, &apos;authors&apos;, &apos;publisher&apos;)
</code></pre><p>多对多的多选框处理：</p>
<pre><code>filter_horizontal = (&apos;authors&apos;,)
或者
filter_vertical = (&apos;authors&apos;,)
</code></pre><p>ForeignKey 字段更好的表现显示：</p>
<pre><code>raw_id_fields = (&apos;publisher&apos;,)
</code></pre><h1 id="用户、用户组和权限"><a href="#用户、用户组和权限" class="headerlink" title="用户、用户组和权限"></a>用户、用户组和权限</h1><p>因为你是用超级用户登录的，你可以创建，编辑和删除任何对像。 然而，不同的环境要求有不同的权限，系统不允许所有人都是超级用户。 管理工具有一个用户权限系统，通过它你可以根据用户的需要来指定他们的权限，从而达到部分访问系统的目的。</p>
<ol>
<li>活动标志，它用来控制用户是否已经激活。 如果一个用户帐号的这个标记是关闭状态，而用户又尝试用它登录时，即使密码正确，他也无法登录系统。</li>
<li>成员标志，它用来控制这个用户是否可以登录管理界面（即：这个用户是不是你们组织里的成员） 由于用户系统可以被用于控制公众页面（即：非管理页面）的访问权限（详见第十四章），这个标志可用来区分公众用户和管理用户。</li>
<li>超级用户标志，它赋予用户在管理界面中添加、修改和删除任何项目的权限。 如果一个用户帐号有这个标志，那么所有权限设置（即使没有）都会被忽略。</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/18/Python/django/django-book/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/18/Python/django/django-book/" itemprop="url">Django Book 记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-18T13:18:12+08:00">
                2016-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><a href="http://djangobook.com/" target="_blank" rel="noopener">http://djangobook.com/</a></p>
</blockquote>
<h1 id="空项目目录结构介绍"><a href="#空项目目录结构介绍" class="headerlink" title="空项目目录结构介绍"></a>空项目目录结构介绍</h1><p>创建一个项目：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure></p>
<pre><code>mysite/
    manage.py
    mysite/M
        __init__.py
        settings.py
        urls.py
        wsgi.py
</code></pre><ul>
<li>mysite:root directory ,container project，这个目录作用不大，可以重新命名</li>
<li>manage.py:是一个命令行工具，通过他来和项目交互，在django-admin.py,manage.py中查看细节</li>
<li>mysite/mysite/:actual Python package for project.实际项目的包名</li>
<li>mysite/<strong>init</strong>.py:An empty file that tells Python that this directory should be considered a Python package.空文件，告诉Python该目录是一个Python包</li>
<li>mysite/settings.py:Settings/configuration for this Django project.</li>
<li>mysite/urls.py:urls，URL声明，一份由 django 驱动的网站目录</li>
<li>mysite/wsgi.py:一个WSGI兼容的web服务器入口</li>
</ul>
<h1 id="让局域网内的人也访问自己电脑上的临时服务器"><a href="#让局域网内的人也访问自己电脑上的临时服务器" class="headerlink" title="让局域网内的人也访问自己电脑上的临时服务器"></a>让局域网内的人也访问自己电脑上的临时服务器</h1><pre><code>python manage.py runserver 0.0.0.0:8000
</code></pre><p>表示服务器监听任意的网络接口</p>
<p>其他人使用你的 本地ip 就可以反问了：比如 你的本地ip：129.168.1.103，别人就可以通过下面的网络访问</p>
<pre><code>http://192.168.1.103:8000/
</code></pre><h1 id="关于-url-反斜杠"><a href="#关于-url-反斜杠" class="headerlink" title="关于 url 反斜杠"></a>关于 url 反斜杠</h1><blockquote>
<p>受配置文件setting中APPEND_SLASH项控制</p>
</blockquote>
<p>如果你是喜欢所有URL都以’/’结尾的人（Django开发者的偏爱），那么你只需要在每个URL后添加斜杠，并且设置”APPEND_SLASH”为”True”. 如果不喜欢URL以斜杠结尾或者根据每个URL来决定，那么需要设置”APPEND_SLASH”为”False”,并且根据你自己的意愿来添加结尾斜杠/在URL模式后.</p>
<h1 id="How-Django-processes-a-request"><a href="#How-Django-processes-a-request" class="headerlink" title="How Django processes a request"></a>How Django processes a request</h1><p>When a user requests a page from your Django-powered site, this is the algorithm the system follows to determine which Python code to execute:</p>
<ol>
<li>Django determines the root URLconf module to use. Ordinarily, this is the value of the ROOT_URLCONF setting, but if the incoming HttpRequest object has a urlconf attribute (set by middleware), its value will be used in place of the ROOT_URLCONF setting.</li>
<li>Django loads that Python module and looks for the variable urlpatterns. This should be a Python list of django.conf.urls.url() instances.</li>
<li>Django runs through each URL pattern, in order, and stops at the first one that matches the requested URL.<br>Once one of the regexes matches, Django imports and calls the given view, which is a simple Python function (or a class-based view). The view gets passed the following arguments:<br>An instance of HttpRequest.</li>
<li>If the matched regular expression returned no named groups, then the matches from the regular expression are provided as positional arguments.</li>
<li>The keyword arguments are made up of any named groups matched by the regular expression, overridden by any arguments specified in the optional kwargs argument to django.conf.urls.url().<br>If no regex matches, or if an exception is raised during any point in this process, Django invokes an appropriate error-handling view. See Error handling below.</li>
</ol>
<h1 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h1><p>模板系统在变量名中遇到点时，按照以下顺序尝试进行查找：</p>
<ol>
<li>字典类型查找 （比如 foo[“bar”] )</li>
<li>属性查找 (比如 foo.bar )</li>
<li>方法调用 （比如 foo.bar() )</li>
<li>列表类型索引查找 (比如 foo[bar] )</li>
</ol>
<h1 id="元祖后面的逗号"><a href="#元祖后面的逗号" class="headerlink" title="元祖后面的逗号"></a>元祖后面的逗号</h1><p>Python 要求单元素元组中必须使用逗号，以此消除与圆括号表达式之间的歧义。</p>
<pre><code># Comma correctly in place.
TEMPLATE_DIRS = (
    &apos;/home/django/mysite/templates&apos;,
)
</code></pre><h1 id="Model-代码-增删改查"><a href="#Model-代码-增删改查" class="headerlink" title="Model 代码 增删改查"></a>Model 代码 增删改查</h1><p>以 Model：为例子</p>
<pre><code>class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __str__(self):
        return self.name
</code></pre><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><ol>
<li>创建 Model 对象</li>
<li>调用 model.save()</li>
</ol>
<p>example：</p>
<pre><code>&gt;&gt;&gt; p = Publisher(name=&apos;Apress&apos;,
...         address=&apos;2855 Telegraph Ave.&apos;,
...         city=&apos;Berkeley&apos;,
...         state_province=&apos;CA&apos;,
...         country=&apos;U.S.A.&apos;,
...         website=&apos;http://www.apress.com/&apos;)

&gt;&gt;&gt; p.save()
</code></pre><h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><h3 id="删除一个对象"><a href="#删除一个对象" class="headerlink" title="删除一个对象"></a>删除一个对象</h3><pre><code>&gt;&gt;&gt; p.delete()
</code></pre><h3 id="删除所有对象"><a href="#删除所有对象" class="headerlink" title="删除所有对象"></a>删除所有对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.all().delete()
</code></pre><h3 id="删除部分"><a href="#删除部分" class="headerlink" title="删除部分"></a>删除部分</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(country=&apos;USA&apos;).delete()
</code></pre><h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><h3 id="更新一个对象"><a href="#更新一个对象" class="headerlink" title="更新一个对象"></a>更新一个对象</h3><ol>
<li>在已经获取到 Model 的对象并且它已经对于数据库中的某条数据前提下 修改 model 的属性值</li>
<li>调用 model.save() 更新数据</li>
</ol>
<h3 id="更新所有对象"><a href="#更新所有对象" class="headerlink" title="更新所有对象"></a>更新所有对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.all().update(country=&apos;USA&apos;)
</code></pre><p>update()方法会返回一个整型数值，表示受影响的记录条数。</p>
<h3 id="更新多个对象"><a href="#更新多个对象" class="headerlink" title="更新多个对象"></a>更新多个对象</h3><h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><h2 id="选择所有"><a href="#选择所有" class="headerlink" title="选择所有"></a>选择所有</h2><pre><code>&gt;&gt;&gt; Publisher.objects.all()
</code></pre><h3 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(name=&apos;Apress&apos;)
&gt;&gt;&gt; Publisher.objects.filter(country=&quot;U.S.A.&quot;, state_province=&quot;CA&quot;)
</code></pre><p>模糊查找：查找包含指定字符串</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.filter(name__contains=&quot;press&quot;)
</code></pre><p>icontains 与大小写无关</p>
<h3 id="获取当个对象"><a href="#获取当个对象" class="headerlink" title="获取当个对象"></a>获取当个对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.get(name=&quot;Apress&quot;)
</code></pre><p>如果 get 方法查询到多个数据，会报错 <code>MultipleObjectsReturned: get() returned more than one Publisher --</code></p>
<p>如果 get 没有找到数据也，会报错 <code>DoesNotExist: Publisher matching query does not exist.</code></p>
<h3 id="数据排序"><a href="#数据排序" class="headerlink" title="数据排序"></a>数据排序</h3><pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;name&quot;)
</code></pre><p>多个字段为标准：</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;state_province&quot;, &quot;address&quot;)
</code></pre><p>逆序：</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;-name&quot;)
</code></pre><p>使用 Meta 设置排序方式：</p>
<pre><code>class Meta:
        ordering = [&apos;name&apos;]
</code></pre><h3 id="连锁查询"><a href="#连锁查询" class="headerlink" title="连锁查询"></a>连锁查询</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(country=&quot;U.S.A.&quot;).order_by(&quot;-name&quot;)
</code></pre><h3 id="限制返回的数据"><a href="#限制返回的数据" class="headerlink" title="限制返回的数据"></a>限制返回的数据</h3><pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&apos;name&apos;)[0]
</code></pre><p>使用 切片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Publisher.objects.order_by(&apos;name&apos;)[0:2]</span><br></pre></td></tr></table></figure>
<p>注意，不支持Python的负索引(negative slicing)</p>
<h1 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h1><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><h1 id="URLconf-高级用法"><a href="#URLconf-高级用法" class="headerlink" title="URLconf 高级用法"></a>URLconf 高级用法</h1><h2 id="URL-导入方式"><a href="#URL-导入方式" class="headerlink" title="URL 导入方式"></a>URL 导入方式</h2><p>url 导入方式一普通模式：</p>
<p>url 导入方式二：字符串导入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^hello/$'</span>, <span class="string">'mysite.views.hello'</span> ),</span><br></pre></td></tr></table></figure>
<p>配合字符串 url ，使用多个视图前缀：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls.defaults <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">'mysite.views'</span>,</span><br><span class="line">    (<span class="string">r'^hello/$'</span>, <span class="string">'hello'</span>),</span><br><span class="line">    (<span class="string">r'^time/$'</span>, <span class="string">'current_datetime'</span>),</span><br><span class="line">    (<span class="string">r'^time/plus/(\d&#123;1,2&#125;)/$'</span>, <span class="string">'hours_ahead'</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">urlpatterns += patterns(<span class="string">'weblog.views'</span>,</span><br><span class="line">    (<span class="string">r'^tag/(\w+)/$'</span>, <span class="string">'tag'</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="定义调试模式的特例"><a href="#定义调试模式的特例" class="headerlink" title="定义调试模式的特例"></a>定义调试模式的特例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> settings.DEBUG:</span><br><span class="line">    urlpatterns += patterns(<span class="string">''</span>,</span><br><span class="line">        (<span class="string">r'^debuginfo/$'</span>, views.debug),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<h2 id="使用命名组"><a href="#使用命名组" class="headerlink" title="使用命名组"></a>使用命名组</h2><p>语法：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?P&lt;name&gt;pattern)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>切记命名组和非命名组不能同时使用。</p>
</blockquote>
<h2 id="向视图传入额外参数"><a href="#向视图传入额外参数" class="headerlink" title="向视图传入额外参数"></a>向视图传入额外参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^foo/$'</span>, views.foobar_view, &#123;<span class="string">'template_name'</span>: <span class="string">'template1.html'</span>&#125;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  views.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foobar_view</span><span class="params">(request, template_name)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="伪造捕捉到的URLconf值"><a href="#伪造捕捉到的URLconf值" class="headerlink" title="伪造捕捉到的URLconf值"></a>伪造捕捉到的URLconf值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^mydata/birthday/$'</span>, views.my_view, &#123;<span class="string">'month'</span>: <span class="string">'jan'</span>, <span class="string">'day'</span>: <span class="string">'06'</span>&#125;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="了解捕捉值和额外参数之间的优先级-额外的选项"><a href="#了解捕捉值和额外参数之间的优先级-额外的选项" class="headerlink" title="了解捕捉值和额外参数之间的优先级 额外的选项"></a>了解捕捉值和额外参数之间的优先级 额外的选项</h2><p>额外URLconf参数优先于捕捉值</p>
<h2 id="使用缺省视图参数"><a href="#使用缺省视图参数" class="headerlink" title="使用缺省视图参数"></a>使用缺省视图参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^blog/$'</span>, views.page),</span><br><span class="line">    (<span class="string">r'^blog/page(?P&lt;num&gt;\d+)/$'</span>, views.page),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="模板高级进阶"><a href="#模板高级进阶" class="headerlink" title="模板高级进阶"></a>模板高级进阶</h1><h2 id="RequestContext和Context处理器"><a href="#RequestContext和Context处理器" class="headerlink" title="RequestContext和Context处理器"></a>RequestContext和Context处理器</h2><h2 id="关闭-html自动转意"><a href="#关闭-html自动转意" class="headerlink" title="关闭 html自动转意"></a>关闭 html自动转意</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This will not be escaped: &#123;&#123; data|safe &#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="设置默认"><a href="#设置默认" class="headerlink" title="设置默认"></a>设置默认</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; data|default:"This is a string literal." &#125;&#125;</span><br></pre></td></tr></table></figure>
<h1 id="数据模型高级进阶"><a href="#数据模型高级进阶" class="headerlink" title="数据模型高级进阶"></a>数据模型高级进阶</h1><h2 id="访问多对多值-Many-to-Many-Values"><a href="#访问多对多值-Many-to-Many-Values" class="headerlink" title="访问多对多值(Many-to-Many Values)"></a>访问多对多值(Many-to-Many Values)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; b = Book.objects.get(id=50)</span><br><span class="line">&gt;&gt;&gt; b.authors.all()</span><br><span class="line">[&lt;Author: Adrian Holovaty&gt;, &lt;Author: Jacob Kaplan-Moss&gt;]</span><br><span class="line">&gt;&gt;&gt; b.authors.filter(first_name=&apos;Adrian&apos;)</span><br><span class="line">[&lt;Author: Adrian Holovaty&gt;]</span><br><span class="line">&gt;&gt;&gt; b.authors.filter(first_name=&apos;Adam&apos;)</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>
<p>反向查询也可以:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = Author.objects.get(first_name=&apos;Adrian&apos;, last_name=&apos;Holovaty&apos;)</span><br><span class="line">&gt;&gt;&gt; a.book_set.all()</span><br><span class="line">[&lt;Book: The Django Book&gt;, &lt;Book: Adrian&apos;s Other Book&gt;]</span><br></pre></td></tr></table></figure>
<h1 id="通用视图"><a href="#通用视图" class="headerlink" title="通用视图"></a>通用视图</h1><p>Django内建通用视图可以实现如下功能：</p>
<ul>
<li>完成常用的简单任务： 重定向到另一个页面以及渲染一个指定的模板。</li>
<li>显示列表和某个特定对象的详细内容页面。</li>
<li>呈现基于日期的数据的年/月/日归档页面，关联的详情页面，最新页面。</li>
</ul>
<h2 id="使用通用视图"><a href="#使用通用视图" class="headerlink" title="使用通用视图"></a>使用通用视图</h2><p>例子，呈现静态 “关于” 页面的 URLconf：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls.defaults <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> django.views.generic.simple <span class="keyword">import</span> direct_to_template</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^about/$'</span>, direct_to_template, &#123;</span><br><span class="line">        <span class="string">'template'</span>: <span class="string">'about.html'</span></span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="会话、用户和注册"><a href="#会话、用户和注册" class="headerlink" title="会话、用户和注册"></a>会话、用户和注册</h1><h2 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h2><p>cookies 是浏览器为 Web 服务器存储的一小段信息。</p>
<h3 id="存取Cookies"><a href="#存取Cookies" class="headerlink" title="存取Cookies"></a>存取Cookies</h3><p>HttpRequest 对象中有一个 COOKIES 对象，该对象的行为类似字典：</p>
<p>获取请求中的 cookies<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_color</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"favorite_color"</span> <span class="keyword">in</span> request.COOKIES:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"Your favorite color is %s"</span> % request.COOKIES[<span class="string">"favorite_color"</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You don't have a favorite color."</span>)</span><br></pre></td></tr></table></figure></p>
<p>写入 cookies：<code>set_cookie()</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"favorite_color"</span> <span class="keyword">in</span> request.GET:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Create an HttpResponse object...</span></span><br><span class="line">        response = HttpResponse(<span class="string">"Your favorite color is now %s"</span> % request.GET[<span class="string">"favorite_color"</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ... and set a cookie on the response</span></span><br><span class="line">        response.set_cookie(<span class="string">"favorite_color"</span>, request.GET[<span class="string">"favorite_color"</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You didn't give a favorite color."</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Django的-Session-框架"><a href="#Django的-Session-框架" class="headerlink" title="Django的 Session 框架"></a>Django的 Session 框架</h2><h3 id="打开-Sessions功能"><a href="#打开-Sessions功能" class="headerlink" title="打开 Sessions功能"></a>打开 Sessions功能</h3><p>Sessions 功能是通过一个中间件(参见第17章)和一个模型(model)来实现的。</p>
<ol>
<li>编辑 MIDDLEWARE_CLASSES 配置，确保 MIDDLEWARE_CLASSES 中包含 ‘django.contrib.sessions.middleware.SessionMiddleware’。</li>
<li>确认 INSTALLED_APPS 中有 ‘django.contrib.sessions’ (如果你是刚打开这个应用，别忘了运行 manage.py syncdb )5</li>
</ol>
<p>通常建立一个新的工程 Sessions 功能是默认开启的</p>
<h3 id="在视图中使用Session"><a href="#在视图中使用Session" class="headerlink" title="在视图中使用Session"></a>在视图中使用Session</h3><p>SessionMiddleware 激活后，每个传给视图(view)函数的第一个参数<code>HttpRequest</code> 对象都有一个 session 属性，这是一个字典型的对象。 你可以象用普通字典一样来用它。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set a session value:</span></span><br><span class="line">request.session[<span class="string">"fav_color"</span>] = <span class="string">"blue"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get a session value -- this could be called in a different view,</span></span><br><span class="line"><span class="comment"># or many requests later (or both):</span></span><br><span class="line">fav_color = request.session[<span class="string">"fav_color"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clear an item from the session:</span></span><br><span class="line"><span class="keyword">del</span> request.session[<span class="string">"fav_color"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if the session has a given key:</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">"fav_color"</span> <span class="keyword">in</span> request.session:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>例子：防止用户多次评论的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">post_comment</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method != <span class="string">'POST'</span>:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'Only POSTs are allowed'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'comment'</span> <span class="keyword">not</span> <span class="keyword">in</span> request.POST:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'Comment not submitted'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.session.get(<span class="string">'has_commented'</span>, <span class="literal">False</span>):</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You've already commented."</span>)</span><br><span class="line"></span><br><span class="line">    c = comments.Comment(comment=request.POST[<span class="string">'comment'</span>])</span><br><span class="line">    c.save()</span><br><span class="line">    request.session[<span class="string">'has_commented'</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'Thanks for your comment!'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="用户与Authentication1"><a href="#用户与Authentication1" class="headerlink" title="用户与Authentication1"></a>用户与Authentication1</h2><p>通过session，我们可以在多次浏览器请求中保持数据，接下来的部分就是用session来处理用户登录了。 当然，不能仅凭用户的一面之词，我们就相信，所以我们需要认证。</p>
<ol>
<li>验证 (认证) 用户是否是他所宣称的用户(一般通过查询数据库验证其用户名和密码)</li>
<li>验证用户是否拥有执行某种操作的 授权 (通常会通过检查一个权限表来确认)</li>
</ol>
<p>Django 认证/授权 系统会包含以下的部分：</p>
<ul>
<li>用户 : 在网站注册的人</li>
<li>权限 : 用于标识用户是否可以执行某种操作的二进制(yes/no)标志</li>
<li>组 :一种可以将标记和权限应用于多个用户的常用方法</li>
<li>Messages : 向用户显示队列式的系统消息的常用方法</li>
</ul>
<h3 id="登录和退出"><a href="#登录和退出" class="headerlink" title="登录和退出"></a>登录和退出</h3><p>验证用户:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user = auth.authenticate(username=<span class="string">'john'</span>, password=<span class="string">'secret'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">"Correct!"</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">"Invalid password."</span></span><br></pre></td></tr></table></figure>
<p>登入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    username = request.POST.get(<span class="string">'username'</span>, <span class="string">''</span>)</span><br><span class="line">    password = request.POST.get(<span class="string">'password'</span>, <span class="string">''</span>)</span><br><span class="line">    user = auth.authenticate(username=username, password=password)</span><br><span class="line">    <span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> user.is_active:</span><br><span class="line">        <span class="comment"># Correct password, and the user is marked "active"</span></span><br><span class="line">        auth.login(request, user)</span><br><span class="line">        <span class="comment"># Redirect to a success page.</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/loggedin/"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># Show an error page</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/invalid/"</span>)</span><br></pre></td></tr></table></figure>
<p>logout:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logout_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    auth.logout(request)</span><br><span class="line">    <span class="comment"># Redirect to a success page.</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/loggedout/"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，即使用户没有登录， logout() 也不会抛出任何异常。</p>
</blockquote>
<p>URLconf:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.views <span class="keyword">import</span> login, logout</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    <span class="comment"># existing patterns here...</span></span><br><span class="line">    (<span class="string">r'^accounts/login/$'</span>,  login),</span><br><span class="line">    (<span class="string">r'^accounts/logout/$'</span>, logout),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="限制已登录用户的访问"><a href="#限制已登录用户的访问" class="headerlink" title="限制已登录用户的访问"></a>限制已登录用户的访问</h3><p>一个简单原始的限制方法是检查 request.user.is_authenticated() ,然后重定向到登陆页面：</p>
<p>或者显示一个出错信息：</p>
<p>作为一个快捷方式, 你可以使用便捷的 login_required 修饰符:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib.auth.decorators import login_required</span><br><span class="line"></span><br><span class="line">@login_required</span><br><span class="line">def my_view(request):</span><br><span class="line">    # ...</span><br></pre></td></tr></table></figure>
<h3 id="处理注册"><a href="#处理注册" class="headerlink" title="处理注册"></a>处理注册</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.forms <span class="keyword">import</span> UserCreationForm</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render_to_response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        form = UserCreationForm(request.POST)</span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            new_user = form.save()</span><br><span class="line">            <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/books/"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form = UserCreationForm()</span><br><span class="line">    <span class="keyword">return</span> render_to_response(<span class="string">"registration/register.html"</span>, &#123;</span><br><span class="line">        <span class="string">'form'</span>: form,</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>template:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends "base.html" %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;Create an account&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Create an account<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">      &#123;&#123; form.as_p &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Create the account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="消息"><a href="#消息" class="headerlink" title="消息"></a>消息</h2><ul>
<li>要创建一条新的消息，使用 user.message_set.create(message=’message_text’) 。</li>
<li>要获得/删除消息，使用 user.get_and_delete_messages() ，这会返回一个 Message 对象的列表，并且从队列中删除返回的项。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/17/Python/django/Django-File-Upload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/17/Python/django/Django-File-Upload/" itemprop="url">使用 Django 创建一个文件上传的服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-17T13:18:12+08:00">
                2016-12-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>django 版本：1.10.1<br>python 版本：3.5.0</p>
<h1 id="创建工程：upload-demo"><a href="#创建工程：upload-demo" class="headerlink" title="创建工程：upload_demo"></a>创建工程：upload_demo</h1><pre><code>django-admin startproject upload_demo
</code></pre><p>运行工程：</p>
<pre><code>python3 manager.py runserver
</code></pre><p>打开网站查看工程是否创建成功：</p>
<pre><code>http://127.0.0.1:8000/
</code></pre><p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/django-welcome.png" alt="django-welcome"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/12/17/Python/django/Django-File-Upload/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/14/Python/django/offical-doc/Django Forms - Built-in fields/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/14/Python/django/offical-doc/Django Forms - Built-in fields/" itemprop="url">Django Forms - Built-in fields</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-14T13:18:12+08:00">
                2016-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Core-field-arguments"><a href="#Core-field-arguments" class="headerlink" title="Core field arguments"></a>Core field arguments</h1><h3 id="class-Field-kwargs"><a href="#class-Field-kwargs" class="headerlink" title="class Field(**kwargs)"></a>class Field(**kwargs)</h3><p>当创建一个 Form class 的时候，最重要的是定义 form 的 fields。</p>
<p>每个 field 有自己的验证逻辑。</p>
<h3 id="Filed-clean-value"><a href="#Filed-clean-value" class="headerlink" title="Filed.clean(value)"></a>Filed.clean(value)</h3><p>每个 Field 实例都有 <code>clean()</code> 方法：接收一个数据参数，数据非法就抛出 <code>django.forms.ValidationError</code> 异常，数据正常就返回数据：</p>
<pre><code>&gt;&gt;&gt; from django import forms
&gt;&gt;&gt; f = forms.EmailField()
&gt;&gt;&gt; f.clean(&apos;foo@example.com&apos;)
&apos;foo@example.com&apos;
&gt;&gt;&gt; f.clean(&apos;invalid email address&apos;)
Traceback (most recent call last):
...
ValidationError: [&apos;Enter a valid email address.&apos;]
</code></pre><h2 id="Core-field-arguments-1"><a href="#Core-field-arguments-1" class="headerlink" title="Core field arguments"></a>Core field arguments</h2><p>Field 类的构造方法通常需要下面的参数</p>
<h2 id="required"><a href="#required" class="headerlink" title="required"></a>required</h2><h3 id="Field-required"><a href="#Field-required" class="headerlink" title="Field.required"></a>Field.required</h3><p>默认 <code>required=True</code></p>
<pre><code>&gt;&gt;&gt; from django import forms
&gt;&gt;&gt; f = forms.CharField()
&gt;&gt;&gt; f.clean(&apos;foo&apos;)
&apos;foo&apos;
&gt;&gt;&gt; f.clean(&apos;&apos;)
Traceback (most recent call last):
...
ValidationError: [&apos;This field is required.&apos;]
&gt;&gt;&gt; f.clean(None)
Traceback (most recent call last):
...
ValidationError: [&apos;This field is required.&apos;]
&gt;&gt;&gt; f.clean(&apos; &apos;)
&apos; &apos;
&gt;&gt;&gt; f.clean(0)
&apos;0&apos;
&gt;&gt;&gt; f.clean(True)
&apos;True&apos;
&gt;&gt;&gt; f.clean(False)
&apos;False&apos;
</code></pre><p>定义参数可为空：</p>
<pre><code>&gt;&gt;&gt; f = forms.CharField(required=False)
&gt;&gt;&gt; f.clean(&apos;foo&apos;)
&apos;foo&apos;
&gt;&gt;&gt; f.clean(&apos;&apos;)
&apos;&apos;
&gt;&gt;&gt; f.clean(None)
&apos;&apos;
&gt;&gt;&gt; f.clean(0)
&apos;0&apos;
&gt;&gt;&gt; f.clean(True)
&apos;True&apos;
&gt;&gt;&gt; f.clean(False)
&apos;False&apos;
</code></pre><p>表示 field 可以不填</p>
<h2 id="label"><a href="#label" class="headerlink" title="label"></a>label</h2><h3 id="Field-label"><a href="#Field-label" class="headerlink" title="Field.label"></a>Field.label</h3><p>The label argument lets you specify the “human-friendly” label for this field. This is used when the Field is displayed in a Form.</p>
<pre><code>&gt;&gt;&gt; from django import forms
&gt;&gt;&gt; class CommentForm(forms.Form):
...     name = forms.CharField(label=&apos;Your name&apos;)
...     url = forms.URLField(label=&apos;Your website&apos;, required=False)
...     comment = forms.CharField()
&gt;&gt;&gt; f = CommentForm(auto_id=False)
&gt;&gt;&gt; print(f)
&lt;tr&gt;&lt;th&gt;Your name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;Your website:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;url&quot; name=&quot;url&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;comment&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
</code></pre><h2 id="label-suffix"><a href="#label-suffix" class="headerlink" title="label_suffix"></a>label_suffix</h2><h3 id="Field-label-suffix"><a href="#Field-label-suffix" class="headerlink" title="Field.label_suffix"></a>Field.label_suffix</h3><pre><code>&gt;&gt;&gt; class ContactForm(forms.Form):
...     age = forms.IntegerField()
...     nationality = forms.CharField()
...     captcha_answer = forms.IntegerField(label=&apos;2 + 2&apos;, label_suffix=&apos; =&apos;)
&gt;&gt;&gt; f = ContactForm(label_suffix=&apos;?&apos;)
&gt;&gt;&gt; print(f.as_p())
&lt;p&gt;&lt;label for=&quot;id_age&quot;&gt;Age?&lt;/label&gt; &lt;input id=&quot;id_age&quot; name=&quot;age&quot; type=&quot;number&quot; required /&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;id_nationality&quot;&gt;Nationality?&lt;/label&gt; &lt;input id=&quot;id_nationality&quot; name=&quot;nationality&quot; type=&quot;text&quot; required /&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;id_captcha_answer&quot;&gt;2 + 2 =&lt;/label&gt; &lt;input id=&quot;id_captcha_answer&quot; name=&quot;captcha_answer&quot; type=&quot;number&quot; required /&gt;&lt;/p&gt;
</code></pre><h2 id="initial"><a href="#initial" class="headerlink" title="initial"></a>initial</h2><h3 id="Field-initial"><a href="#Field-initial" class="headerlink" title="Field.initial"></a>Field.initial</h3><p>该参数会被使用，当 Field 是在一个 unbound Form 的时候。</p>
<pre><code>&gt;&gt;&gt; from django import forms
&gt;&gt;&gt; class CommentForm(forms.Form):
...     name = forms.CharField(initial=&apos;Your name&apos;)
...     url = forms.URLField(initial=&apos;http://&apos;)
...     comment = forms.CharField()
&gt;&gt;&gt; f = CommentForm(auto_id=False)
&gt;&gt;&gt; print(f)
&lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;Your name&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;Url:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;url&quot; name=&quot;url&quot; value=&quot;http://&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;comment&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;
</code></pre><p>为什么不把 initial 直接作为 data 传入？</p>
<blockquote>
<p>因为作为 data 就会触发数据验证，initial 里的数据通常是非法的可能会报错</p>
</blockquote>
<p>可以使用方法作为 initial：</p>
<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; class DateForm(forms.Form):
...     day = forms.DateField(initial=datetime.date.today)
&gt;&gt;&gt; print(DateForm())
&lt;tr&gt;&lt;th&gt;Day:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;day&quot; value=&quot;12/23/2008&quot; required /&gt;&lt;td&gt;&lt;/tr&gt;
</code></pre><h2 id="widget"><a href="#widget" class="headerlink" title="widget"></a>widget</h2><h3 id="Field-widget"><a href="#Field-widget" class="headerlink" title="Field.widget"></a>Field.widget</h3><h2 id="help-text"><a href="#help-text" class="headerlink" title="help_text"></a>help_text</h2><h3 id="Field-help-text"><a href="#Field-help-text" class="headerlink" title="Field.help_text"></a>Field.help_text</h3><h2 id="error-messages"><a href="#error-messages" class="headerlink" title="error_messages"></a>error_messages</h2><h3 id="Field-error-messages"><a href="#Field-error-messages" class="headerlink" title="Field.error_messages"></a>Field.error_messages</h3><pre><code>&gt;&gt;&gt; name = forms.CharField(error_messages={&apos;required&apos;: &apos;Please enter your name&apos;})
&gt;&gt;&gt; name.clean(&apos;&apos;)
Traceback (most recent call last):
  ...
ValidationError: [&apos;Please enter your name&apos;]
</code></pre><h2 id="validators"><a href="#validators" class="headerlink" title="validators"></a>validators</h2><h3 id="Field-validators"><a href="#Field-validators" class="headerlink" title="Field.validators"></a>Field.validators</h3><h2 id="localize"><a href="#localize" class="headerlink" title="localize"></a>localize</h2><h3 id="Field-localize"><a href="#Field-localize" class="headerlink" title="Field.localize"></a>Field.localize</h3><h2 id="disabled"><a href="#disabled" class="headerlink" title="disabled"></a>disabled</h2><h3 id="Field-disabled"><a href="#Field-disabled" class="headerlink" title="Field.disabled"></a>Field.disabled</h3><h1 id="Checking-if-the-field-data-has-changed"><a href="#Checking-if-the-field-data-has-changed" class="headerlink" title="Checking if the field data has changed"></a>Checking if the field data has changed</h1><h2 id="has-changed"><a href="#has-changed" class="headerlink" title="has_changed()"></a>has_changed()</h2><h3 id="Field-has-changed-）"><a href="#Field-has-changed-）" class="headerlink" title="Field.has_changed(）"></a>Field.has_changed(）</h3><h1 id="Built-in-Field-classes"><a href="#Built-in-Field-classes" class="headerlink" title="Built-in Field classes"></a>Built-in Field classes</h1><h2 id="BooleanField"><a href="#BooleanField" class="headerlink" title="BooleanField"></a>BooleanField</h2><h3 id="class-BooleanField-kwargs"><a href="#class-BooleanField-kwargs" class="headerlink" title="class BooleanField(**kwargs)"></a>class BooleanField(**kwargs)</h3><ul>
<li>Default widget: CheckboxInput</li>
<li>Empty value: False</li>
<li>Normalizes to: A Python True or False value.</li>
<li>Validates that the value is True (e.g. the check box is checked) if the field has required=True.</li>
<li>Error message keys: required</li>
</ul>
<h2 id="CharField"><a href="#CharField" class="headerlink" title="CharField"></a>CharField</h2><ul>
<li>Default widget: TextInput</li>
<li>Empty value: ‘’ (an empty string)</li>
<li>Normalizes to: A Unicode object.</li>
<li>Validates max_length or min_length, if they are provided. Otherwise, all inputs are valid.</li>
<li>Error message keys: required, max_length, min_length</li>
</ul>
<p>三个用于验证的参数：</p>
<ul>
<li>max_length</li>
<li>min_length</li>
<li>strip</li>
</ul>
<h2 id="ChoiceField"><a href="#ChoiceField" class="headerlink" title="ChoiceField"></a>ChoiceField</h2><ul>
<li>Default widget: Select</li>
<li>Empty value: ‘’ (an empty string)</li>
<li>Normalizes to: A Unicode object.</li>
<li>Validates that the given value exists in the list of choices.</li>
<li>Error message keys: required, invalid_choice</li>
</ul>
<h2 id="TypedChoiceField"><a href="#TypedChoiceField" class="headerlink" title="TypedChoiceField"></a>TypedChoiceField</h2><ul>
<li>Default widget: Select</li>
<li>Empty value: Whatever you’ve given as empty_value.</li>
<li>Normalizes to: A value of the type provided by the coerce argument.</li>
<li>Validates that the given value exists in the list of choices and can be coerced.</li>
<li>Error message keys: required, invalid_choice</li>
</ul>
<h2 id="DateField"><a href="#DateField" class="headerlink" title="DateField"></a>DateField</h2><h2 id="DateTimeField"><a href="#DateTimeField" class="headerlink" title="DateTimeField"></a>DateTimeField</h2><h2 id="DecimalField"><a href="#DecimalField" class="headerlink" title="DecimalField"></a>DecimalField</h2><h2 id="DurationField"><a href="#DurationField" class="headerlink" title="DurationField"></a>DurationField</h2><h2 id="EmailField"><a href="#EmailField" class="headerlink" title="EmailField"></a>EmailField</h2><h2 id="FileField"><a href="#FileField" class="headerlink" title="FileField"></a>FileField</h2><ul>
<li>Default widget: ClearableFileInput</li>
<li>Empty value: None</li>
<li>Normalizes to: An UploadedFile object that wraps the file content and file name into a single object.</li>
<li>Can validate that non-empty file data has been bound to the form.</li>
<li>Error message keys: required, invalid, missing, empty, max_length</li>
</ul>
<h2 id="FilePathField"><a href="#FilePathField" class="headerlink" title="FilePathField"></a>FilePathField</h2><h2 id="FloatField"><a href="#FloatField" class="headerlink" title="FloatField"></a>FloatField</h2><h2 id="ImageField"><a href="#ImageField" class="headerlink" title="ImageField"></a>ImageField</h2><h2 id="IntegerField"><a href="#IntegerField" class="headerlink" title="IntegerField"></a>IntegerField</h2><h2 id="GenericIPAddressField"><a href="#GenericIPAddressField" class="headerlink" title="GenericIPAddressField"></a>GenericIPAddressField</h2><h2 id="MultipleChoiceField"><a href="#MultipleChoiceField" class="headerlink" title="MultipleChoiceField"></a>MultipleChoiceField</h2><h2 id="TypedMultipleChoiceField"><a href="#TypedMultipleChoiceField" class="headerlink" title="TypedMultipleChoiceField"></a>TypedMultipleChoiceField</h2><h2 id="NullBooleanField"><a href="#NullBooleanField" class="headerlink" title="NullBooleanField"></a>NullBooleanField</h2><h2 id="RegexField"><a href="#RegexField" class="headerlink" title="RegexField"></a>RegexField</h2><h2 id="SlugField"><a href="#SlugField" class="headerlink" title="SlugField"></a>SlugField</h2><h2 id="TimeField"><a href="#TimeField" class="headerlink" title="TimeField"></a>TimeField</h2><h2 id="URLField"><a href="#URLField" class="headerlink" title="URLField"></a>URLField</h2><h2 id="UUIDField"><a href="#UUIDField" class="headerlink" title="UUIDField"></a>UUIDField</h2><h1 id="Slightly-complex-built-in-Field-classes"><a href="#Slightly-complex-built-in-Field-classes" class="headerlink" title="Slightly complex built-in Field classes"></a>Slightly complex built-in Field classes</h1><h2 id="ComboField"><a href="#ComboField" class="headerlink" title="ComboField"></a>ComboField</h2><h2 id="MultiValueField"><a href="#MultiValueField" class="headerlink" title="MultiValueField"></a>MultiValueField</h2><h2 id="SplitDateTimeField"><a href="#SplitDateTimeField" class="headerlink" title="SplitDateTimeField"></a>SplitDateTimeField</h2><h1 id="Fields-which-handle-relationships"><a href="#Fields-which-handle-relationships" class="headerlink" title="Fields which handle relationships"></a>Fields which handle relationships</h1><h1 id="Creating-custom-fields"><a href="#Creating-custom-fields" class="headerlink" title="Creating custom fields"></a>Creating custom fields</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/27/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/29/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
