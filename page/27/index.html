<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta property="og:type" content="website">
<meta property="og:title" content="Double">
<meta property="og:url" content="http://yoursite.com/page/27/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Double">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/27/">





  <title>Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/05/Python/使用 virtualenv 建立独立的开发环境/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/05/Python/使用 virtualenv 建立独立的开发环境/" itemprop="url">使用 virtualenv 建立独立的开发环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-05T11:38:14+08:00">
                2017-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p> virtualenv 可以搭建虚拟且独立的python环境，可以使每个项目环境与其他项目独立开来，保持环境的干净，解决包冲突问题。</p>
<h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><h2 id="创建一个环境："><a href="#创建一个环境：" class="headerlink" title="创建一个环境："></a>创建一个环境：</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/05/Python/使用 virtualenv 建立独立的开发环境/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/05/linux/使用 supervisor 管理进程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/05/linux/使用 supervisor 管理进程/" itemprop="url">使用 supervisor 管理进程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-05T11:38:14+08:00">
                2017-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Supervisor 222(<a href="http://supervisord.org" target="_blank" rel="noopener">http://supervisord.org</a>) 是一个用 Python 写的进程管理工具，可以很方便的用来启动、重启、关闭进程（不仅仅是 Python 进程）。除了对单个进程的控制，还可以同时启动、关闭多个进程，比如很不幸的服务器出问题导致所有应用程序都被杀死，此时可以用 supervisor 同时启动所有应用程序而不是一个一个地敲命令启动。</p>
<h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install supervisor</span><br></pre></td></tr></table></figure>
<p>or </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install supervisor</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/05/linux/使用 supervisor 管理进程/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/server/nginx/启动nginx status状态/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/server/nginx/启动nginx status状态/" itemprop="url">启动 nginx status</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T13:18:12+08:00">
                2017-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>system version : macos 10.12.2</p>
<h1 id="启用-nginx-status-配置"><a href="#启用-nginx-status-配置" class="headerlink" title="启用 nginx status 配置"></a>启用 nginx status 配置</h1><h2 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  *:8181 default_server;</span><br><span class="line">    server_name _;</span><br><span class="line">    location /ngx_status </span><br><span class="line">    &#123;</span><br><span class="line">        stub_status on;</span><br><span class="line">        access_log off;</span><br><span class="line">        #allow 127.0.0.1;</span><br><span class="line">        #deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="重启-nginx"><a href="#重启-nginx" class="headerlink" title="重启 nginx"></a>重启 nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s quit</span><br><span class="line"></span><br><span class="line">sudo nginx</span><br></pre></td></tr></table></figure>
<p>查看 nginx 配置文件的地址和是否启动成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></p>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p><a href="http://127.0.0.1:8181/ngx_status" target="_blank" rel="noopener">http://127.0.0.1:8181/ngx_status</a> </p>
<p>可以看到的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Active connections: 6 </span><br><span class="line">server accepts handled requests</span><br><span class="line"> 34 34 58 </span><br><span class="line">Reading: 0 Writing: 1 Waiting: 5</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>active connections – 活跃的连接数量</li>
<li>server accepts handled requests — 总共处理了11989个连接 , 成功创建11989次握手, 总共处理了11991个请求</li>
<li>reading — 读取客户端的连接数.</li>
<li>writing — 响应数据到客户端的数量</li>
<li>waiting — 开启 keep-alive 的情况下,这个值等于 active – (reading+writing), 意思就是 Nginx 已经处理完正在等候下一次请求指令的驻留连接.</li>
</ul>
<h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><h2 id="mac-brew-nginx-安装额外模块"><a href="#mac-brew-nginx-安装额外模块" class="headerlink" title="mac brew nginx 安装额外模块"></a>mac brew nginx 安装额外模块</h2><p>查看默认安装的模块有哪些：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew options nginx</span><br></pre></td></tr></table></figure></p>
<p>输出的内容是默认会安装的模块</p>
<h3 id="安装-nginx-full"><a href="#安装-nginx-full" class="headerlink" title="安装 nginx-full"></a>安装 nginx-full</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/nginx</span><br></pre></td></tr></table></figure>
<p>再查看一下可选参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew options nginx-full</span><br></pre></td></tr></table></figure></p>
<p>如果已经安装了 nginx 可能需要先取消 link:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew unlink nginx</span><br><span class="line"># brew link nginx-full</span><br></pre></td></tr></table></figure></p>
<p>安装 nginx-full 添加模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx-full --with-geoip</span><br></pre></td></tr></table></figure>
<h2 id="编译-nginx"><a href="#编译-nginx" class="headerlink" title="编译 nginx"></a>编译 nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-http_stub_status_module --with-http_ssl_module --with-http_sub_module</span><br></pre></td></tr></table></figure>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p><code>Undefined symbols for architecture x86_64:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--with-cc-opt=&quot;-I/usr/local/include -I/usr/local/opt/openssl/include&quot;</span><br><span class="line">--with-ld-opt=&quot;-L/usr/local/lib -L/usr/local/opt/openssl/lib&quot;</span><br></pre></td></tr></table></figure>
<h2 id="openssl-安装方法"><a href="#openssl-安装方法" class="headerlink" title="openssl 安装方法"></a>openssl 安装方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install openssl</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/Cellar/openssl/&#123;version&#125;/include/openssl /usr/local/include/openssl</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/program/docker/docker-learn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/program/docker/docker-learn/" itemprop="url">Docker Learn</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T13:18:12+08:00">
                2017-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Get-Started-with-Docker"><a href="#Get-Started-with-Docker" class="headerlink" title="Get Started with Docker"></a>Get Started with Docker</h1><h2 id="Build-your-own-image"><a href="#Build-your-own-image" class="headerlink" title="Build your own image"></a>Build your own image</h2><h3 id="Write-a-Dockerfile"><a href="#Write-a-Dockerfile" class="headerlink" title="Write a Dockerfile"></a>Write a Dockerfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir mydockerbuild</span><br><span class="line"></span><br><span class="line">$ cd mydockerbuild</span><br><span class="line"></span><br><span class="line">$ view Dockerfile</span><br></pre></td></tr></table></figure>
<p><code>Dockerfile</code> 文件中先添加下面的内容：表示这个 image 基于 <code>docker/whalesay</code> image </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM docker/whalesay:latest</span><br></pre></td></tr></table></figure>
<p>安装 <code>fortunes</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get -y update &amp;&amp; apt-get install -y fortunes</span><br></pre></td></tr></table></figure>
<p><code>CMD</code> 表示要执行的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD /usr/games/fortune -a | cowsay</span><br></pre></td></tr></table></figure>
<h3 id="Build-an-image-from-your-Dockerfile"><a href="#Build-an-image-from-your-Dockerfile" class="headerlink" title="Build an image from your Dockerfile"></a>Build an image from your Dockerfile</h3><p>编译 docker image， <code>-t [image name]</code> 表示命名这个 image， <code>.</code> 表示从当前目录找 DockerFile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t docker-whale .</span><br></pre></td></tr></table></figure></p>
<h3 id="Learn-about-the-build-process"><a href="#Learn-about-the-build-process" class="headerlink" title="Learn about the build process"></a>Learn about the build process</h3><p>编译命名执行后：会读取 DockerFile 文件，执行里面的语句</p>
<ol>
<li><p>Docker 检查 DockerFile 的完整性，输出语句：</p>
<pre><code>Sending build context to Docker daemon 2.048 kB
</code></pre></li>
<li><p>执行语句：检查本地是否有 <code>whalwsay</code> image， 如果没有就从 Docker HUB pull </p>
<pre><code>Step 1 : FROM docker/whalesay:latest
---&gt; 6b362a9f73eb
</code></pre><p> 最后输出 <code>whalwsay</code> 的 ID</p>
</li>
<li><p>执行语句：</p>
<p> Docker 创建临时的 container 执行下面的命名，安装 <code>fortunes</code> 软件</p>
<pre><code>Step 2 : RUN apt-get -y update &amp;&amp; apt-get install -y fortunes
</code></pre><p> 安装结束后临时 container 会被移除</p>
</li>
<li><p>执行语句：</p>
<p> 创建新的中间 container a8e6faa88df3 执行 CMD 命令。</p>
<pre><code>Step 3 : CMD /usr/games/fortune -a | cowsay
---&gt; Running in a8e6faa88df3
---&gt; 7d9495d03763
Removing intermediate container a8e6faa88df3
Successfully built 7d9495d03763
</code></pre></li>
</ol>
<h3 id="Run-your-new-docker-whale"><a href="#Run-your-new-docker-whale" class="headerlink" title="Run your new docker-whale"></a>Run your new docker-whale</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run docker-whale</span><br></pre></td></tr></table></figure>
<h2 id="Tag-push-and-pull-your-image"><a href="#Tag-push-and-pull-your-image" class="headerlink" title="Tag, push, and pull your image"></a>Tag, push, and pull your image</h2><h3 id="Tag-and-push-the-image"><a href="#Tag-and-push-the-image" class="headerlink" title="Tag and push the image"></a>Tag and push the image</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag [id] [account name/image name:latest]</span><br><span class="line">docker tag 7d9495d03763 maryatdocker/docker-whale:latest</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push [image tag]</span><br></pre></td></tr></table></figure>
<h3 id="Pull-your-new-image"><a href="#Pull-your-new-image" class="headerlink" title="Pull your new image"></a>Pull your new image</h3><p>删除 本地 镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 7d9495d03763</span><br></pre></td></tr></table></figure>
<p>直接运行镜像，就会从远程下载镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run fangmingdong/learn</span><br></pre></td></tr></table></figure>
<h1 id="Learn-by-Example"><a href="#Learn-by-Example" class="headerlink" title="Learn by Example"></a>Learn by Example</h1><h2 id="Hello-world-in-container"><a href="#Hello-world-in-container" class="headerlink" title="Hello world in container"></a>Hello world in container</h2><h3 id="Run-a-Hello-world"><a href="#Run-a-Hello-world" class="headerlink" title="Run a Hello world"></a>Run a Hello world</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run ubuntu /bin/echo &apos;Hello world&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>docker run</code> 运行一个容器</li>
<li><code>ubuntu</code> 是一个 镜像</li>
<li><code>/bin/echo &#39;Hello world&#39;</code> 命令运行在内部的一个新容器中</li>
</ul>
<h3 id="Run-an-interactive-container"><a href="#Run-an-interactive-container" class="headerlink" title="Run an interactive container"></a>Run an interactive container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -t -i ubuntu /bin/bash</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-t</code>表示在容器内部使用终端</li>
<li><code>-i</code> 允许和容器建立外部连接</li>
</ul>
<h3 id="Start-a-daemonized-Hello-world"><a href="#Start-a-daemonized-Hello-world" class="headerlink" title="Start a daemonized Hello world"></a>Start a daemonized Hello world</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ubuntu /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-d</code> flag runs the container in the background (to daemonize it).</li>
</ul>
<p>运行后输出: container id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10331d6d3d678d2400d09b7a570fb07faca75db1e74c764cd503f56cb372670a</span><br></pre></td></tr></table></figure>
<p>使用 <code>docker ps</code> 查看正在运行的 container</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID  IMAGE         COMMAND               CREATED        STATUS       PORTS NAMES</span><br><span class="line">1e5535038e28  ubuntu  /bin/sh -c &apos;while tr  2 minutes ago  Up 1 minute        insane_babbage</span><br></pre></td></tr></table></figure>
<p>这里的 container id 是缩写.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs insane_babbage</span><br></pre></td></tr></table></figure>
<ul>
<li><code>docker logs</code> 查看容器内部</li>
</ul>
<p>停止容器运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop insane_babbage</span><br></pre></td></tr></table></figure>
<h2 id="Run-a-simple-application"><a href="#Run-a-simple-application" class="headerlink" title="Run a simple application"></a>Run a simple application</h2><h3 id="Learn-about-the-Docker-client"><a href="#Learn-about-the-Docker-client" class="headerlink" title="Learn about the Docker client"></a>Learn about the Docker client</h3><p>Docker 程序就是 Docker 客户端</p>
<p>通过命令行的形式使用 Docker 客户端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[sudo] docker [subcommand] [flags] [arguments] ..</span><br></pre></td></tr></table></figure>
<h3 id="Get-Docker-command-help"><a href="#Get-Docker-command-help" class="headerlink" title="Get Docker command help"></a>Get Docker command help</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --help</span><br></pre></td></tr></table></figure>
<p>具体命令使用帮助：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach --help</span><br></pre></td></tr></table></figure>
<h3 id="Run-a-web-application-in-Docker"><a href="#Run-a-web-application-in-Docker" class="headerlink" title="Run a web application in Docker"></a>Run a web application in Docker</h3><p>下面的例子运行：Python Flask application</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P training/webapp python app.py</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-P</code>:表示映射所有端口到容器内部</li>
<li><code>training/webapp</code>:是一个预先创建好的 image</li>
<li><code>python app.py</code>: 这个命名运行在容器内部，启动 web 应用</li>
</ul>
<h3 id="View-the-web-application-container"><a href="#View-the-web-application-container" class="headerlink" title="View the web application container"></a>View the web application container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -l</span><br></pre></td></tr></table></figure>
<p>查看刚才运行的 container</p>
<ul>
<li><code>-l</code>: 表示最后运行的 container</li>
</ul>
<p>查看 docker-machine ip:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ip</span><br></pre></td></tr></table></figure>
<h3 id="A-network-port-shortcut"><a href="#A-network-port-shortcut" class="headerlink" title="A network port shortcut"></a>A network port shortcut</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port nostalgic_morse 5000</span><br></pre></td></tr></table></figure>
<h3 id="View-the-web-application’s-logs"><a href="#View-the-web-application’s-logs" class="headerlink" title="View the web application’s logs"></a>View the web application’s logs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -f nostalgic_morse</span><br><span class="line"></span><br><span class="line">* Running on http://0.0.0.0:5000/</span><br><span class="line">10.0.2.2 - - [06/Nov/2016 20:16:31] &quot;GET / HTTP/1.1&quot; 200 -</span><br><span class="line">10.0.2.2 - - [06/Nov/2016 20:16:31] &quot;GET /favicon.ico HTTP/1.1&quot; 404 -</span><br></pre></td></tr></table></figure>
<h3 id="Look-at-the-web-application-container’s-processes"><a href="#Look-at-the-web-application-container’s-processes" class="headerlink" title="Look at the web application container’s processes"></a>Look at the web application container’s processes</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker top nostalgic_morse</span><br><span class="line"></span><br><span class="line">PID                 USER                COMMAND</span><br><span class="line">854                 root                python app.py</span><br></pre></td></tr></table></figure>
<h3 id="Inspect-the-web-application-container"><a href="#Inspect-the-web-application-container" class="headerlink" title="Inspect the web application container"></a>Inspect the web application container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect nostalgic_morse</span><br><span class="line"></span><br><span class="line">$ docker inspect [container name]</span><br></pre></td></tr></table></figure>
<h3 id="Stop-the-web-application-container"><a href="#Stop-the-web-application-container" class="headerlink" title="Stop the web application container"></a>Stop the web application container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [container name or container id]</span><br></pre></td></tr></table></figure>
<h3 id="Restart-the-web-application-container"><a href="#Restart-the-web-application-container" class="headerlink" title="Restart the web application container"></a>Restart the web application container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [container name or container id]</span><br></pre></td></tr></table></figure>
<h3 id="Remove-the-web-application-container"><a href="#Remove-the-web-application-container" class="headerlink" title="Remove the web application container"></a>Remove the web application container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [container name]</span><br></pre></td></tr></table></figure>
<h2 id="Build-your-own-images"><a href="#Build-your-own-images" class="headerlink" title="Build your own images"></a>Build your own images</h2><h2 id="Network-containers"><a href="#Network-containers" class="headerlink" title="Network containers"></a>Network containers</h2><h2 id="Manage-data-in-containers"><a href="#Manage-data-in-containers" class="headerlink" title="Manage data in containers"></a>Manage data in containers</h2><h1 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h1><h2 id="Overview-of-Docker-Compose"><a href="#Overview-of-Docker-Compose" class="headerlink" title="Overview of Docker Compose"></a>Overview of Docker Compose</h2><p>Docker Compose 是一个可以运行多个 container 的 Docker 工具应用。</p>
<p>使用 Compose file 配置应用的服务，然后使用一个命名就能启动所有的服务。</p>
<p>使用 Compose 三个步骤：</p>
<ul>
<li>使用 Dockerfile 定义 Docker app 的运行环境</li>
<li>使用 <code>docker-compose.yml</code> 定义所有需要启动的服务，然后他们可以一起启动</li>
<li>最后运行 docker-compose</li>
</ul>
<p><code>docker-compose.yml</code> 例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: &apos;2&apos;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;5000:5000&quot;</span><br><span class="line">    volumes:</span><br><span class="line">    - .:/code</span><br><span class="line">    - logvolume01:/var/log</span><br><span class="line">    links:</span><br><span class="line">    - redis</span><br><span class="line">  redis:</span><br><span class="line">    image: redis</span><br><span class="line">volumes:</span><br><span class="line">  logvolume01: &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>Compose 有命名自己的命令工具控制整个应用的生命周期：</p>
<ul>
<li>Start, stop and rebuild services</li>
<li>View the status of running services</li>
<li>Stream the log output of running services</li>
<li>Run a one-off command on a service</li>
</ul>
<h2 id="Get-started-with-Docker-Compose"><a href="#Get-started-with-Docker-Compose" class="headerlink" title="Get started with Docker Compose"></a>Get started with Docker Compose</h2><h2 id="Quickstart-Compose-and-Django"><a href="#Quickstart-Compose-and-Django" class="headerlink" title="Quickstart: Compose and Django"></a>Quickstart: Compose and Django</h2><h3 id="Define-the-project-components"><a href="#Define-the-project-components" class="headerlink" title="Define the project components"></a>Define the project components</h3><ol>
<li>创建一个工程目录 <code>dockerdjango</code></li>
<li><p>目录中创建 <code>Dockerfile</code></p>
<pre><code>FROM python:3.5.2
ENV PYTHONUNBUFFERED 1
RUN mkdir /code
WORKDIR /code
ADD requirements.txt /code/
RUN pip install -r requirements.txt
ADD . /code/
</code></pre></li>
<li><p>目录中创建 <code>requirements.txt</code></p>
<pre><code>Django
psycopg2
</code></pre></li>
<li><p>目录中创建 <code>docker-compose.yml</code></p>
<pre><code>version: &apos;2&apos;
services:
  db:
    image: postgres
  web:
    build: .
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      * .:/code
    ports:
      * &quot;8000:8000&quot;
    depends_on:
      * db
</code></pre><p> 这里建立了两个服务：db，web</p>
</li>
</ol>
<h3 id="Create-a-Django-project"><a href="#Create-a-Django-project" class="headerlink" title="Create a Django project"></a>Create a Django project</h3><ol>
<li>切换工作目录到工程根目录</li>
<li><p>使用 <code>docker-compose</code> 命令创建 Django 工程</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run web django-admin.py startproject composeexample .</span><br></pre></td></tr></table></figure>
<p> 上面的语句运行 <code>django-admin.py startproject composeexample</code> 命令在 container 内部，使用 <code>web</code> service 的 image 和 configuration。如果是初次运行会在当前目录创建 <code>web</code> image 因为在 <code>docker-compose.yml</code> 中定义了 <code>build: .</code></p>
</li>
<li></li>
</ol>
<h3 id="Connect-the-database"><a href="#Connect-the-database" class="headerlink" title="Connect the database"></a>Connect the database</h3><p><code>composeexample/settings.py</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">     &apos;default&apos;: &#123;</span><br><span class="line">         &apos;ENGINE&apos;: &apos;django.db.backends.postgresql&apos;,</span><br><span class="line">         &apos;NAME&apos;: &apos;postgres&apos;,</span><br><span class="line">         &apos;USER&apos;: &apos;postgres&apos;,</span><br><span class="line">         &apos;HOST&apos;: &apos;db&apos;,</span><br><span class="line">         &apos;PORT&apos;: 5432,</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
<p>访问 <code>http:docker-machone ip:8000</code> 查看是否运行成功</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/01/program/docker/docker-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/program/docker/docker-command/" itemprop="url">Docker Command</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T13:18:12+08:00">
                2017-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="查看所有容器"><a href="#查看所有容器" class="headerlink" title="查看所有容器"></a>查看所有容器</h1><p>查看所有容器(停止运行|正在运行)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container ls -a</span><br></pre></td></tr></table></figure>
<ol>
<li>在使用镜像启动容器的时候，出现容器名称冲突的时候，可以通过查看所有容器找到重复的并删除</li>
</ol>
<h1 id="从容器中取出文件"><a href="#从容器中取出文件" class="headerlink" title="从容器中取出文件"></a>从容器中取出文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp &lt;containerId&gt;:/file/path/within/container /host/path/target</span><br></pre></td></tr></table></figure>
<h1 id="删除容器-image"><a href="#删除容器-image" class="headerlink" title="删除容器/image"></a>删除容器/image</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">清理容器</span><br><span class="line">docker container prune</span><br><span class="line"></span><br><span class="line">删除镜像</span><br><span class="line">docker image rm [image name]</span><br></pre></td></tr></table></figure>
<p>可以处理下面错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error response from daemon: conflict: unable to remove repository reference &quot;training/webapp&quot; (must force) - container 0bd2b54678c7 is using its referenced image 54bb4e8718e8</span><br></pre></td></tr></table></figure>
<h1 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h1><p>查看 docker 的信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>
<p>查看 docker 占用的硬盘大小：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system df</span><br></pre></td></tr></table></figure>
<h1 id="镜像相关"><a href="#镜像相关" class="headerlink" title="镜像相关"></a>镜像相关</h1><p>下载镜像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]</span><br><span class="line"></span><br><span class="line">docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>
<p>运行镜像:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 删除不再使用的镜像，比如：none 类型的镜像</span><br><span class="line">docker image prune</span><br></pre></td></tr></table></figure>
<p>列出镜像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 列出仓库是 ubuntu 的镜像</span><br><span class="line">docker image ls ubuntu</span><br><span class="line"></span><br><span class="line"># 列出 指定仓库名和标签</span><br><span class="line">docker image ls ubuntu:16.04</span><br><span class="line"></span><br><span class="line"># image ls 支持 过滤</span><br><span class="line">docker image ls -f since=mongo:3.2</span><br><span class="line">docker image ls -f label=com.example.version=0.1</span><br></pre></td></tr></table></figure>
<p>删除镜像：可以使用 长ID，短ID（前3位或者更长），镜像名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker image rm [选项] &lt;镜像1&gt; [&lt;镜像2&gt; ...]</span><br><span class="line"></span><br><span class="line">docker image rm 501</span><br><span class="line">docker image rm centos</span><br><span class="line"></span><br><span class="line"># 配合 ls 删除镜像</span><br><span class="line">docker image rm $(docker image ls -q redis)</span><br></pre></td></tr></table></figure>
<h2 id="镜像修改"><a href="#镜像修改" class="headerlink" title="镜像修改"></a>镜像修改</h2><ul>
<li>commit    （禁止使用）</li>
<li>Dockerfile：推荐</li>
</ul>
<h2 id="Dockerfile-构建镜像"><a href="#Dockerfile-构建镜像" class="headerlink" title="Dockerfile 构建镜像"></a>Dockerfile 构建镜像</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker build [选项] &lt;上下文路径/URL/-&gt;</span><br><span class="line"></span><br><span class="line">docker build -t nginx:v3 .</span><br></pre></td></tr></table></figure>
<h1 id="Dockerfile-语法"><a href="#Dockerfile-语法" class="headerlink" title="Dockerfile 语法"></a>Dockerfile 语法</h1><h2 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h2><p><code>FROM</code>: 指定基础镜像，必备指令，且必须是第一行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br></pre></td></tr></table></figure>
<p>空镜像为基础：一些使用 Go 开发的应用可能会以空镜像为基础</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM scratch</span><br></pre></td></tr></table></figure>
<h2 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h2><p><code>RUN</code>： 执行命令</p>
<ul>
<li>shell 格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN &lt;命令&gt;</span><br><span class="line"></span><br><span class="line">RUN echo &apos;&lt;h1&gt;Hello, Docker!&lt;/h1&gt;&apos; &gt; /usr/share/nginx/html/index.html</span><br></pre></td></tr></table></figure>
<ul>
<li>exec 格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN [&quot;可执行文件&quot;, &quot;参数1&quot;, &quot;参数2&quot;]</span><br><span class="line"></span><br><span class="line">RUN apt-get update</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h1><p>进程处理，查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker ps --help</span><br><span class="line"></span><br><span class="line">docker ps -l</span><br><span class="line"></span><br><span class="line">docker kill [CONTAINER ID]</span><br><span class="line">docker rm [CONTAINER ID]</span><br></pre></td></tr></table></figure>
<h1 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h1><p>查看 docker 中的镜像</p>
<h1 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h1><p>给 Image 命名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag [id] [new image tag]</span><br><span class="line">docker tag [id] [account name/image tag:latest]</span><br></pre></td></tr></table></figure>
<h1 id="login"><a href="#login" class="headerlink" title="login"></a>login</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure>
<h1 id="push"><a href="#push" class="headerlink" title="push"></a>push</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push [image tag]</span><br></pre></td></tr></table></figure>
<h1 id="rm-image"><a href="#rm-image" class="headerlink" title="rm image"></a>rm image</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f [image tag or image id]</span><br></pre></td></tr></table></figure>
<h1 id="remove-container"><a href="#remove-container" class="headerlink" title="remove container"></a>remove container</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [container name]</span><br></pre></td></tr></table></figure>
<h1 id="stop-container"><a href="#stop-container" class="headerlink" title="stop container"></a>stop container</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [container id or names]</span><br></pre></td></tr></table></figure>
<h1 id="restart-container"><a href="#restart-container" class="headerlink" title="restart container"></a>restart container</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [container name]</span><br></pre></td></tr></table></figure>
<h1 id="查看-docker-machine-ip"><a href="#查看-docker-machine-ip" class="headerlink" title="查看 docker machine ip"></a>查看 docker machine ip</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ip</span><br></pre></td></tr></table></figure>
<h1 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker compose"></a>docker compose</h1><h2 id="start-compose"><a href="#start-compose" class="headerlink" title="start compose"></a>start compose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
<h2 id="update-code"><a href="#update-code" class="headerlink" title="update code"></a>update code</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose build</span><br></pre></td></tr></table></figure>
<h2 id="停止-compose"><a href="#停止-compose" class="headerlink" title="停止 compose"></a>停止 compose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br><span class="line"></span><br><span class="line">docker-compose rm -all</span><br></pre></td></tr></table></figure>
<h1 id="SEE-FILE-IN-CONTAINER"><a href="#SEE-FILE-IN-CONTAINER" class="headerlink" title="SEE FILE IN CONTAINER"></a>SEE FILE IN CONTAINER</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export dockerblog_web_1 &gt; contents.tar</span><br></pre></td></tr></table></figure>
<h1 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it [container-name] sh</span><br><span class="line"></span><br><span class="line">docker exec -it api-redoc sh</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/31/Python/django/offical-doc/django-Performance and optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/31/Python/django/offical-doc/django-Performance and optimization/" itemprop="url">django Performance and optimization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-31T13:18:12+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/29/Android/网络/retrofit/Retrofit缓存/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/29/Android/网络/retrofit/Retrofit缓存/" itemprop="url">Retrofit 缓存</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-29T11:38:14+08:00">
                2016-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="类型一：有网没网都先读缓存"><a href="#类型一：有网没网都先读缓存" class="headerlink" title="类型一：有网没网都先读缓存"></a>类型一：有网没网都先读缓存</h1><blockquote>
<p>(60s内)</p>
</blockquote>
<p>拦截器：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Interceptor mCacheInterceptor = <span class="keyword">new</span> Interceptor() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Request request = chain.request();</span><br><span class="line">        Log.d(TAG, <span class="string">"request="</span>+request);</span><br><span class="line">        Response response = chain.proceed(request);</span><br><span class="line">        Log.d(TAG, <span class="string">"response="</span>+response);</span><br><span class="line"></span><br><span class="line">        String cacheControl = request.cacheControl().toString();</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(cacheControl)) &#123;</span><br><span class="line">            cacheControl = <span class="string">"public, max-age=60"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response.newBuilder()</span><br><span class="line">                .header(<span class="string">"Cache-Control"</span>, cacheControl)</span><br><span class="line">                .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>设置max-age为60s之后，这60s之内不管你有没有网,都读缓存</li>
<li>max-stale设置为4周，意思是，网络未连接的情况下设置缓存时间为4周</li>
</ul>
<p>client 设置<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">File cacheFile = <span class="keyword">new</span> File(context.getCacheDir(), <span class="string">"[缓存目录]"</span>);</span><br><span class="line">Cache cache = <span class="keyword">new</span> Cache(cacheFile, <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">100</span>); <span class="comment">//100Mb</span></span><br><span class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient.Builder()</span><br><span class="line">                ...</span><br><span class="line">                .addNetworkInterceptor(interceptor)</span><br><span class="line">                .cache(cache)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">retrofit = <span class="keyword">new</span> Retrofit.Builder()</span><br><span class="line">            .client(client)</span><br><span class="line">            ...</span><br></pre></td></tr></table></figure></p>
<p><strong><em>注意：</em></strong>这里要使用 <code>addNetworkInterceptor</code></p>
<h1 id="类型二-无网使用缓存，有网就获取最新数据"><a href="#类型二-无网使用缓存，有网就获取最新数据" class="headerlink" title="类型二 无网使用缓存，有网就获取最新数据"></a>类型二 无网使用缓存，有网就获取最新数据</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 云端响应头拦截器，用来配置缓存策略</span></span><br><span class="line"><span class="comment"> * Dangerous interceptor that rewrites the server's cache-control header.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Interceptor REWRITE_CACHE_CONTROL_INTERCEPTOR = chain -&gt; &#123;</span><br><span class="line">    Request request = chain.request();</span><br><span class="line">    <span class="keyword">if</span>(!NetUtils.hasNetwork(context))&#123;</span><br><span class="line">        request = request.newBuilder()</span><br><span class="line">                .cacheControl(CacheControl.FORCE_CACHE)</span><br><span class="line">                .build();</span><br><span class="line">        Log.d(TAG, <span class="string">"no network"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Response originalResponse = chain.proceed(request);</span><br><span class="line">    <span class="keyword">if</span>(NetUtils.hasNetwork(context))&#123;</span><br><span class="line">        <span class="comment">//有网的时候读接口上的@Headers里的配置，你可以在这里进行统一的设置</span></span><br><span class="line">        String cacheControl = request.cacheControl().toString();</span><br><span class="line">        <span class="keyword">return</span> originalResponse.newBuilder()</span><br><span class="line">                .header(<span class="string">"Cache-Control"</span>, cacheControl)</span><br><span class="line">                .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> originalResponse.newBuilder()</span><br><span class="line">                .header(<span class="string">"Cache-Control"</span>, <span class="string">"public, only-if-cached, max-stale=2419200"</span>)</span><br><span class="line">                .removeHeader(<span class="string">"Pragma"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong><em>注意</em></strong>这个 interceptor 需要使用 <code>.addInterceptor(mCacheInterceptor)</code></p>
<h1 id="Stack-overflow"><a href="#Stack-overflow" class="headerlink" title="Stack overflow"></a>Stack overflow</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">private BackendService() &#123;</span><br><span class="line"></span><br><span class="line">    httpCacheDirectory = new File(context.getCacheDir(),  &quot;responses&quot;);</span><br><span class="line">    int cacheSize = 10 * 1024 * 1024; // 10 MiB</span><br><span class="line">    Cache cache = new Cache(httpCacheDirectory, cacheSize);</span><br><span class="line"></span><br><span class="line">    httpClient = new OkHttpClient.Builder()</span><br><span class="line">            .addNetworkInterceptor(REWRITE_RESPONSE_INTERCEPTOR)</span><br><span class="line">            .addInterceptor(OFFLINE_INTERCEPTOR)</span><br><span class="line">            .cache(cache)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    Retrofit retrofit = new Retrofit.Builder()</span><br><span class="line">            .baseUrl(&quot;https://api.backend.com&quot;)</span><br><span class="line">            .client(httpClient)</span><br><span class="line">            .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    backendApi = retrofit.create(BackendApi.class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static final Interceptor REWRITE_RESPONSE_INTERCEPTOR = chain -&gt; &#123;</span><br><span class="line">    Response originalResponse = chain.proceed(chain.request());</span><br><span class="line">    String cacheControl = originalResponse.header(&quot;Cache-Control&quot;);</span><br><span class="line"></span><br><span class="line">    if (cacheControl == null || cacheControl.contains(&quot;no-store&quot;) || cacheControl.contains(&quot;no-cache&quot;) ||</span><br><span class="line">            cacheControl.contains(&quot;must-revalidate&quot;) || cacheControl.contains(&quot;max-age=0&quot;)) &#123;</span><br><span class="line">        return originalResponse.newBuilder()</span><br><span class="line">                .header(&quot;Cache-Control&quot;, &quot;public, max-age=&quot; + 10)</span><br><span class="line">                .build();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return originalResponse;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">private static final Interceptor OFFLINE_INTERCEPTOR = chain -&gt; &#123;</span><br><span class="line">    Request request = chain.request();</span><br><span class="line"></span><br><span class="line">    if (!isOnline()) &#123;</span><br><span class="line">        Log.d(TAG, &quot;rewriting request&quot;);</span><br><span class="line"></span><br><span class="line">        int maxStale = 60 * 60 * 24 * 28; // tolerate 4-weeks stale</span><br><span class="line">        request = request.newBuilder()</span><br><span class="line">                .header(&quot;Cache-Control&quot;, &quot;public, only-if-cached, max-stale=&quot; + maxStale)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return chain.proceed(request);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">public static boolean isOnline() &#123;</span><br><span class="line">    ConnectivityManager cm = (ConnectivityManager) MyApplication.getApplication().getSystemService(Context.CONNECTIVITY_SERVICE);</span><br><span class="line">    NetworkInfo netInfo = cm.getActiveNetworkInfo();</span><br><span class="line">    return netInfo != null &amp;&amp; netInfo.isConnectedOrConnecting();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="http://www.jianshu.com/p/9c3b4ea108a7" target="_blank" rel="noopener">http://www.jianshu.com/p/9c3b4ea108a7</a></li>
<li><a href="http://blog.csdn.net/picasso_l/article/details/50579884" target="_blank" rel="noopener">http://blog.csdn.net/picasso_l/article/details/50579884</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/28/Python/django/offical-doc/Django-Pagination/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/28/Python/django/offical-doc/Django-Pagination/" itemprop="url">Django - Pagination</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-28T13:18:12+08:00">
                2016-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Django 实现分页</p>
</blockquote>
<h1 id="在-View-中使用-Paginator"><a href="#在-View-中使用-Paginator" class="headerlink" title="在 View 中使用 Paginator"></a>在 View 中使用 Paginator</h1><p>view class </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> ListView</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListView</span><span class="params">(ListView)</span>:</span></span><br><span class="line">    model = models.Car      <span class="comment"># shorthand for setting queryset = models.Car.objects.all()</span></span><br><span class="line">    template_name = <span class="string">'app/car_list.html'</span>  <span class="comment"># optional (the default is app_name/modelNameInLowerCase_list.html; which will look into your templates folder for that path and file)</span></span><br><span class="line">    context_object_name = <span class="string">"car_list"</span>    <span class="comment">#default is object_list as well as model's_verbose_name_list and/or model's_verbose_name_plural_list, if defined in the model's inner Meta class</span></span><br><span class="line">    paginate_by = <span class="number">10</span>  <span class="comment">#and that's it !!</span></span><br></pre></td></tr></table></figure>
<p>上面也可以通过 url 设置 <code>paginate_by</code> 属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(r&apos;^cars/$&apos;, ListView.as_view( model=Car, paginate_by=10 ))</span><br></pre></td></tr></table></figure></p>
<p>template:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if is_paginated %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"page-links"</span>&gt;</span></span><br><span class="line">                &#123;% if page_obj.has_previous %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/cars?page=&#123;&#123; page_obj.previous_page_number &#125;&#125;"</span>&gt;</span>previous<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"page-current"</span>&gt;</span></span><br><span class="line">                    Page &#123;&#123; page_obj.number &#125;&#125; of &#123;&#123; page_obj.paginator.num_pages &#125;&#125;.</span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                &#123;% if page_obj.has_next %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/cars?page=&#123;&#123; page_obj.next_page_number &#125;&#125;"</span>&gt;</span>next<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/28/ReadNote/https/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/28/ReadNote/https/" itemprop="url">HTTPS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-28T13:18:12+08:00">
                2016-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ReadNote/" itemprop="url" rel="index">
                    <span itemprop="name">ReadNote</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTPS-基础"><a href="#HTTPS-基础" class="headerlink" title="HTTPS 基础"></a>HTTPS 基础</h1><p>Secure Hypertext Transfer Protocol：安全超文本传输协议</p>
<p>简单的说：是 HTTP 的安全版,是使用 TLS/SSL 加密的 HTTP 协议。</p>
<p>HTTPS = HTTP + TLS/SSL</p>
<h2 id="TLS-SSL"><a href="#TLS-SSL" class="headerlink" title="TLS/SSL"></a>TLS/SSL</h2><p>安全传输层协议 Transport Layer Security</p>
<p>介于 TCP 和 HTTP 之间的一层安全协议</p>
<h3 id="TLS-SSL-原理"><a href="#TLS-SSL-原理" class="headerlink" title="TLS/SSL 原理"></a>TLS/SSL 原理</h3><p>加密功能实现依赖三类基本算法：散列函数 Hash，对称加密，非对称加密。</p>
<p>利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。</p>
<p>散列函数 Hash：MD5、SHA1、SHA256 。。。<br>对称加密： AES-CBC、DES、3DES、AES-GCM等，相同的密钥可以用于信息的加密和解密，通信方式是1对1<br>非对称加密：RSA，ECC，DH等，密钥成对出现，一般称为公钥(公开)和私钥(保密)，公钥加密的信息只能私钥解开，私钥加密的信息只能公钥解开。服务器可以实现1对多的通信</p>
<p><strong><em>TLS 的基本工作方式：</em></strong>客户端使用非对称加密与服务器进行通信，实现身份验证并协商对称加密使用的密钥，然后对称加密算法采用协商密钥对信息以及信息摘要进行加密通信，不同的节点之间采用的对称密钥不同，从而可以保证信息只能通信双方获取。</p>
<h2 id="PKI-体系"><a href="#PKI-体系" class="headerlink" title="PKI 体系"></a>PKI 体系</h2><blockquote>
<p>CA 负责核实公钥的拥有者信息，并颁发认证”证书”，同时能够为使用者提供证书验证服务，即 PKI 体系。</p>
</blockquote>
<h3 id="RSA-身份验证的隐患"><a href="#RSA-身份验证的隐患" class="headerlink" title="RSA 身份验证的隐患"></a>RSA 身份验证的隐患</h3><p>身份验证和密钥协商是 TLS 的基础功能，但是这个的前提是合法的服务器掌握对应的私钥。</p>
<p>但是 RSA 算法无法确保服务器身份的合法性，因为公钥不包含服务器的信息，存在安全隐患。</p>
<p>存在的安全隐患：（公钥获取的时候被中间人截获）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">客户端 C 和服务器 S 进行通信，中间节点 M 截获了二者的通信；</span><br><span class="line"></span><br><span class="line">节点 M 自己计算产生一对公钥 pub_M 和私钥 pri_M;</span><br><span class="line"></span><br><span class="line">C 向 S 请求公钥时，M 把自己的公钥 pub_M 发给了 C;</span><br><span class="line"></span><br><span class="line">C 使用公钥 pub_M 加密的数据能够被 M 解密，因为 M 掌握对应的私钥 pri_M，而 C 无法根据公钥信息判断服务器的身份，从而 C 和 M 之间建立了”可信”加密连接;</span><br><span class="line"></span><br><span class="line">中间节点 M 和服务器S之间再建立合法的连接，因此 C 和 S 之间通信被M完全掌握，M 可以进行信息的窃听、篡改等操作。</span><br><span class="line"></span><br><span class="line">另外，服务器也可以对自己的发出的信息进行否认，不承认相关信息是自己发出。</span><br></pre></td></tr></table></figure>
<p>出现的问题：中间人攻击和信息抵赖。</p>
<h3 id="身份验证-CA-和证书"><a href="#身份验证-CA-和证书" class="headerlink" title="身份验证-CA 和证书"></a>身份验证-CA 和证书</h3><p>解决中间人攻击的关键是确保获取公钥的途径是合法的，需要能够验证服务器的身份信息，于是引入权威的第三方机构 CA。</p>
<p>CA 负责核实公钥的拥有者信息，并颁发认证”证书”，同时能够为使用者提供证书验证服务，即 PKI 体系。</p>
<p>CA 流程：</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/tnZGrhTk4dffpIp6abyRclAF7FIILZI7RwlDmL6kwAT5f5GDnvA8uxFic17NnfwXy0o4A20uggicnVWU5ROmeK0A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="CA 流程"></p>
<p>a.服务方 S 向第三方机构CA提交公钥、组织信息、个人信息(域名)等信息并申请认证；</p>
<p>b.CA 通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等；</p>
<p>c.如信息审核通过，CA 会向申请者签发认证文件-证书。</p>
<p>证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA 的信息、有效时间、证书序列号等信息的明文，同时包含一个签名；</p>
<p>签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA 的私钥对信息摘要进行加密，密文即签名；</p>
<p>d.客户端 C 向服务器 S 发出请求时，S 返回证书文件；</p>
<p>e.客户端 C 读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应 CA 的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即公钥合法；</p>
<p>f.客户端然后验证证书相关的域名信息、有效时间等信息；</p>
<p>g.客户端会内置信任 CA 的证书信息(包含公钥)，如果CA不被信任，则找不到对应 CA 的证书，证书也会被判定非法。</p>
<p>在这个过程注意几点：</p>
<p>a.申请证书不需要提供私钥，确保私钥永远只能服务器掌握；</p>
<p>b.证书的合法性仍然依赖于非对称加密算法，证书主要是增加了服务器信息以及签名；</p>
<p>c.内置 CA 对应的证书称为根证书，颁发者和使用者相同，自己为自己签名，即自签名证书；</p>
<p>d.证书=公钥+申请者与颁发者信息+签名；</p>
<h3 id="证书链"><a href="#证书链" class="headerlink" title="证书链"></a>证书链</h3><h3 id="证书吊销"><a href="#证书吊销" class="headerlink" title="证书吊销"></a>证书吊销</h3><p>主要存在两类机制：CRL 与 OCSP。</p>
<h1 id="HTTPS-性能与优化"><a href="#HTTPS-性能与优化" class="headerlink" title="HTTPS 性能与优化"></a>HTTPS 性能与优化</h1><p>HTTPS 原理与优势：身份验证、信息加密与完整性校验等，且未对 TCP 和 HTTP 协议做任何修改。</p>
<p>劣势：</p>
<ol>
<li>增加延时</li>
<li>消耗较多的 CPU 资源</li>
</ol>
<h2 id="HTTPS-接入优化"><a href="#HTTPS-接入优化" class="headerlink" title="HTTPS 接入优化"></a>HTTPS 接入优化</h2><ol>
<li>CDN 接入</li>
<li>会话缓存</li>
<li>硬件加速</li>
<li>远程解密</li>
<li>SPDY/HTTP2</li>
</ol>
<blockquote>
<p>使用非对称加密和CA证书握手，使用对称加密传输数据。</p>
</blockquote>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ol>
<li>证书配置后最好检查一下是否可用</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.sslshopper.com/</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=402615812&amp;idx=1&amp;sn=b6dae639119bb66e7025321254b8d973&amp;scene=1&amp;srcid=122439MA3l7gRwfjgNOB76pA#rd" target="_blank" rel="noopener">http://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=402615812&amp;idx=1&amp;sn=b6dae639119bb66e7025321254b8d973&amp;scene=1&amp;srcid=122439MA3l7gRwfjgNOB76pA#rd</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/28/Android/view/自定义View/自定义View-自定义属性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/28/Android/view/自定义View/自定义View-自定义属性/" itemprop="url">自定义View -- 自定义属性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-28T09:23:14+08:00">
                2016-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="创建按照正常步骤创建-自定义View"><a href="#创建按照正常步骤创建-自定义View" class="headerlink" title="创建按照正常步骤创建 自定义View"></a>创建按照正常步骤创建 自定义View</h2><h2 id="在-values-attrs-xml-中创建自定义属性"><a href="#在-values-attrs-xml-中创建自定义属性" class="headerlink" title="在 values/attrs.xml 中创建自定义属性"></a>在 values/attrs.xml 中创建自定义属性</h2><p>例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">"MyView"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">"mv_center_color"</span> <span class="attr">format</span>=<span class="string">"color"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Note：</p>
<ul>
<li>属性命名添加前缀防止重复</li>
</ul>
<h2 id="在布局中使用自定义属性"><a href="#在布局中使用自定义属性" class="headerlink" title="在布局中使用自定义属性"></a>在布局中使用自定义属性</h2><p>例子：</p>
<p>需要在跟布局中加入命名空间：<code>xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.waytone.animationdemo.indicate.MyView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/status_indicate_view"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:siv_center_color</span>=<span class="string">"#f23"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:siv_text_size</span>=<span class="string">"12"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="在-自定义View-内部解析属性"><a href="#在-自定义View-内部解析属性" class="headerlink" title="在 自定义View 内部解析属性"></a>在 自定义View 内部解析属性</h2><p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.StatusIndicateView);</span><br><span class="line"><span class="keyword">int</span> color = a.getColor(R.styleable.StatusIndicateView_siv_center_color, Color.BLACK);</span><br><span class="line"><span class="keyword">int</span> testSize = a.getInteger(R.styleable.StatusIndicateView_siv_text_size, <span class="number">0</span>);</span><br><span class="line">mCenterPaint.setColor(color);</span><br><span class="line"></span><br><span class="line">a.recycle();</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/26/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><span class="page-number current">27</span><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/28/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
