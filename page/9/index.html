<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta property="og:type" content="website">
<meta property="og:title" content="Double">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Double">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/">





  <title>Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/14/flutter/项目模块拆分/语言适配/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/14/flutter/项目模块拆分/语言适配/" itemprop="url">语言适配</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-14T13:18:12+08:00">
                2018-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考</p>
<ul>
<li><a href="https://flutter.io/tutorials/internationalization/" target="_blank" rel="noopener">官方文档</a></li>
<li><a href="https://github.com/CarGuo/GSYGithubAppFlutter" target="_blank" rel="noopener">https://github.com/CarGuo/GSYGithubAppFlutter</a></li>
</ul>
<h1 id="0-创建语言文件"><a href="#0-创建语言文件" class="headerlink" title="0 创建语言文件"></a>0 创建语言文件</h1><p><code>string_base.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abstract class StringBase &#123;</span><br><span class="line">  String welcomeMessage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>string_en.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class StringEn extends StringBase &#123;</span><br><span class="line">  @override</span><br><span class="line">  String welcomeMessage = &quot;Welcome To Flutter&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>string_zh.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class StringZh extends StringBase &#123;</span><br><span class="line">  @override</span><br><span class="line">  String welcomeMessage = &quot;欢迎 To Flutter&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1-设置依赖"><a href="#1-设置依赖" class="headerlink" title="1 设置依赖"></a>1 设置依赖</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  flutter_localizations:</span><br><span class="line">    sdk: flutter</span><br></pre></td></tr></table></figure>
<h1 id="2-创建语言代理"><a href="#2-创建语言代理" class="headerlink" title="2 创建语言代理"></a>2 创建语言代理</h1><p><code>my_localizations_delegate.dart</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &apos;dart:async&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/foundation.dart&apos;;</span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/my_localizations.dart&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyLocalizationsDelegate</span><br><span class="line">    extends LocalizationsDelegate&lt;MyLocalizations&gt; &#123;</span><br><span class="line">  MyLocalizationsDelegate();</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool isSupported(Locale locale) &#123;</span><br><span class="line">    ///支持中文和英语</span><br><span class="line">    return [&apos;en&apos;, &apos;zh&apos;].contains(locale.languageCode);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///根据locale，创建一个对象用于提供当前locale下的文本显示</span><br><span class="line">  @override</span><br><span class="line">  Future&lt;MyLocalizations&gt; load(Locale locale) &#123;</span><br><span class="line">    return new SynchronousFuture&lt;MyLocalizations&gt;(</span><br><span class="line">        new MyLocalizations(locale));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldReload(LocalizationsDelegate&lt;MyLocalizations&gt; old) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///全局静态的代理</span><br><span class="line">  static MyLocalizationsDelegate delegate = new MyLocalizationsDelegate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语言包管理类：</p>
<p><code>my_localizations.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_base.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_en.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_zh.dart&apos;;</span><br><span class="line"></span><br><span class="line">class MyLocalizations &#123;</span><br><span class="line">  final Locale locale;</span><br><span class="line"></span><br><span class="line">  MyLocalizations(this.locale);</span><br><span class="line"></span><br><span class="line">  ///根据不同 locale.languageCode 加载不同语言对应</span><br><span class="line">  static Map&lt;String, StringBase&gt; _localizedValues = &#123;</span><br><span class="line">    &apos;en&apos;: StringEN(),</span><br><span class="line">    &apos;zh&apos;: StringZH(),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  StringBase get currentLocalized &#123;</span><br><span class="line">    return _localizedValues[locale.languageCode];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///通过 Localizations 加载当前的 DefaultLocalizations</span><br><span class="line">  ///获取对应的 StringBase</span><br><span class="line">  static MyLocalizations of(BuildContext context) &#123;</span><br><span class="line">    return Localizations.of(context, MyLocalizations);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-设置语言代理"><a href="#3-设置语言代理" class="headerlink" title="3 设置语言代理"></a>3 设置语言代理</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return new MaterialApp(</span><br><span class="line">  localizationsDelegates: [</span><br><span class="line">    GlobalMaterialLocalizations.delegate,</span><br><span class="line">    GlobalWidgetsLocalizations.delegate,</span><br><span class="line">    MyLocalizationsDelegate.delegate,</span><br><span class="line">  ],</span><br><span class="line">  supportedLocales: [</span><br><span class="line">    const Locale(&apos;en&apos;, &apos;US&apos;), // English</span><br><span class="line">    const Locale(&apos;zh&apos;, &apos;Chinese&apos;), // Hebrew</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>
<h1 id="4-使用"><a href="#4-使用" class="headerlink" title="4 使用"></a>4 使用</h1><p>做个工具类 <code>common_utils.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/my_localizations.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_base.dart&apos;;</span><br><span class="line"></span><br><span class="line">class CommonUtils&#123;</span><br><span class="line">  static StringBase getLocale(BuildContext context) &#123;</span><br><span class="line">    return MyLocalizations.of(context).currentLocalized;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取字符串：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CommonUtils.getLocale(context).welcomeMessage</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/14/flutter/项目模块拆分/路由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/14/flutter/项目模块拆分/路由/" itemprop="url">Flutter 路由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-14T13:18:12+08:00">
                2018-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="项目中写法"><a href="#项目中写法" class="headerlink" title="项目中写法"></a>项目中写法</h1><p><code>mine_page.dart, home_page.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class MinePage extends StatelessWidget &#123;</span><br><span class="line">  static var routeName = &apos;/mine&apos;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MinePage extends StatelessWidget &#123;</span><br><span class="line">  static var routeName = &apos;/mine&apos;;</span><br><span class="line"></span><br><span class="line">  final String userName;</span><br><span class="line"></span><br><span class="line">  MinePage(&#123;this.userName&#125;) : assert(userName != null);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 必须传参页面的写法</p>
</blockquote>
<p><code>router/router.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:p_project/page/home_page.dart&apos;;</span><br><span class="line">import &apos;package:p_project/page/mine_page.dart&apos;;</span><br><span class="line"></span><br><span class="line">Map&lt;String, WidgetBuilder&gt; buildRoutes2() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    HomePage.routeName: (_) =&gt; HomePage(),</span><br><span class="line">    MinePage.routeName: (_) =&gt; MinePage(),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">///路由管理</span><br><span class="line">class RouterUtils &#123;</span><br><span class="line">  ///暂时不能传参数</span><br><span class="line">  static void pushNamed(BuildContext context, String routeName) &#123;</span><br><span class="line">    Navigator.pushNamed(context, routeName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /// push 可以传参数</span><br><span class="line">  static void push(BuildContext context, Widget page) &#123;</span><br><span class="line">    Navigator.push(</span><br><span class="line">      context,</span><br><span class="line">      MaterialPageRoute(builder: (_) =&gt; page),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>跳转：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RouterUtils.pushNamed(context, MinePage.routeName);</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="http://blog.chengyunfeng.com/?p=1049" target="_blank" rel="noopener">http://blog.chengyunfeng.com/?p=1049</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/14/flutter/feature/Flutter 常用控件继承关系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/14/flutter/feature/Flutter 常用控件继承关系/" itemprop="url">Flutter 常用控件继承关系</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-14T13:18:12+08:00">
                2018-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>目前为止常见的控件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">- Widget</span><br><span class="line">    - ProxyWidget</span><br><span class="line">        - InheritedWidget</span><br><span class="line">        - ParentDataWidget&lt;Stack&gt;</span><br><span class="line">            - Positioned: 通常在 Stack 下使用</span><br><span class="line">        - ParentDataWidget&lt;Flex&gt;</span><br><span class="line">            - Flexible</span><br><span class="line">            - Expanded: flex 控制比例</span><br><span class="line">    - StatefulWidget</span><br><span class="line">        - AnimatedSwitcher</span><br><span class="line">        - BottomSheet</span><br><span class="line">        - Navigator</span><br><span class="line">        - TextField</span><br><span class="line">        - Checkbox</span><br><span class="line">        - Switch</span><br><span class="line">        - Scaffold</span><br><span class="line">        - AppBar</span><br><span class="line">        - Scrollbar</span><br><span class="line">        - WillPopScope</span><br><span class="line">        - Hero</span><br><span class="line">        - Image</span><br><span class="line">        - WidgetsApp</span><br><span class="line">        - TabBarView</span><br><span class="line">        - PageView: SizedBox?</span><br><span class="line">        - Localizations</span><br><span class="line">        - TabBar TabBarView</span><br><span class="line">        - SliverAppBar</span><br><span class="line">    - StatelessWidget</span><br><span class="line">        - Visibility</span><br><span class="line">        - Text</span><br><span class="line">        - Theme</span><br><span class="line">        - Divider: 缺陷：只可以设置左边padding，可以参照源码自定义一个</span><br><span class="line">        - Container</span><br><span class="line">        - SafeArea</span><br><span class="line">        - ScrollView</span><br><span class="line">            - CustomScrollView</span><br><span class="line">            - BoxScrollView</span><br><span class="line">                - ListView</span><br><span class="line">                - GridView</span><br><span class="line">        - Dialog</span><br><span class="line">        - Tab</span><br><span class="line">        - Banner: 角落标签</span><br><span class="line">            - CheckedModeBanner: 右上角 Debug 条纹</span><br><span class="line">        - SliverSafeArea</span><br><span class="line">        - TabPageSelector</span><br><span class="line">        - SliverPersistentHeader</span><br><span class="line">    - RenderObjectWidget: 可以创建 RenderObject，RenderObject 是具体绘制对象</span><br><span class="line">        - LeafRenderObjectWidget</span><br><span class="line">            - RichText</span><br><span class="line">        - MultiChildRenderObjectWidget：多个子控件</span><br><span class="line">            - Flex</span><br><span class="line">            - Column</span><br><span class="line">            - Row</span><br><span class="line">            - Stack</span><br><span class="line">            - Wrap</span><br><span class="line">        - SingleChildRenderObjectWidget： 单一子控件</span><br><span class="line">            - DecoratedBox</span><br><span class="line">            - Padding</span><br><span class="line">            - SizedBox</span><br><span class="line">            - Opacity</span><br><span class="line">            - Visibility</span><br><span class="line">            - SliverPadding</span><br><span class="line">            - Align</span><br><span class="line">                - Center</span><br><span class="line">            - FadeTransition</span><br><span class="line">        - SliverMultiBoxAdaptorWidget</span><br><span class="line">            - SliverList</span><br><span class="line">            - SliverGrid</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/13/flutter/dart/语法tip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/13/flutter/dart/语法tip/" itemprop="url">Dart 语法tip</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-13T13:18:12+08:00">
                2018-09-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>如果变量为 null 就赋值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b ??= value // 如果 b 为 null 就赋值</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>assert</li>
</ol>
<p>断言，在生成环境下不会执行，在开发环境下会抛出明显的错误提示。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/12/flutter/feature/InheritedWidget-国际化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/12/flutter/feature/InheritedWidget-国际化/" itemprop="url">Flutter 国际化 - InheritedWidget</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-12T13:18:12+08:00">
                2018-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0-创建语言文件"><a href="#0-创建语言文件" class="headerlink" title="0 创建语言文件"></a>0 创建语言文件</h1><p><code>string_base.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abstract class StringBase &#123;</span><br><span class="line">  String welcomeMessage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>string_en.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class StringEn extends StringBase &#123;</span><br><span class="line">  @override</span><br><span class="line">  String welcomeMessage = &quot;Welcome To Flutter&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>string_zh.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class StringZh extends StringBase &#123;</span><br><span class="line">  @override</span><br><span class="line">  String welcomeMessage = &quot;欢迎 To Flutter&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1-设置依赖"><a href="#1-设置依赖" class="headerlink" title="1 设置依赖"></a>1 设置依赖</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  flutter_localizations:</span><br><span class="line">    sdk: flutter</span><br></pre></td></tr></table></figure>
<h1 id="2-创建语言代理"><a href="#2-创建语言代理" class="headerlink" title="2 创建语言代理"></a>2 创建语言代理</h1><p><code>my_localizations_delegate.dart</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &apos;dart:async&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/foundation.dart&apos;;</span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/my_localizations.dart&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyLocalizationsDelegate</span><br><span class="line">    extends LocalizationsDelegate&lt;MyLocalizations&gt; &#123;</span><br><span class="line">  MyLocalizationsDelegate();</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool isSupported(Locale locale) &#123;</span><br><span class="line">    ///支持中文和英语</span><br><span class="line">    return [&apos;en&apos;, &apos;zh&apos;].contains(locale.languageCode);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///根据locale，创建一个对象用于提供当前locale下的文本显示</span><br><span class="line">  @override</span><br><span class="line">  Future&lt;MyLocalizations&gt; load(Locale locale) &#123;</span><br><span class="line">    return new SynchronousFuture&lt;MyLocalizations&gt;(</span><br><span class="line">        new MyLocalizations(locale));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldReload(LocalizationsDelegate&lt;MyLocalizations&gt; old) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///全局静态的代理</span><br><span class="line">  static MyLocalizationsDelegate delegate = new MyLocalizationsDelegate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语言包管理类：</p>
<p><code>my_localizations.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_base.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_en.dart&apos;;</span><br><span class="line">import &apos;package:passon_movie/common/language/string_zh.dart&apos;;</span><br><span class="line"></span><br><span class="line">class MyLocalizations &#123;</span><br><span class="line">  final Locale locale;</span><br><span class="line"></span><br><span class="line">  MyLocalizations(this.locale);</span><br><span class="line"></span><br><span class="line">  ///根据不同 locale.languageCode 加载不同语言对应</span><br><span class="line">  static Map&lt;String, StringBase&gt; _localizedValues = &#123;</span><br><span class="line">    &apos;en&apos;: StringEN(),</span><br><span class="line">    &apos;zh&apos;: StringZH(),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  StringBase get currentLocalized &#123;</span><br><span class="line">    return _localizedValues[locale.languageCode];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ///通过 Localizations 加载当前的 DefaultLocalizations</span><br><span class="line">  ///获取对应的 StringBase</span><br><span class="line">  static MyLocalizations of(BuildContext context) &#123;</span><br><span class="line">    return Localizations.of(context, MyLocalizations);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-创建一个工具类获取-String"><a href="#3-创建一个工具类获取-String" class="headerlink" title="3 创建一个工具类获取 String"></a>3 创建一个工具类获取 String</h1><p><code>common_utils.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:p_project/common/localization/my_localizations.dart&apos;;</span><br><span class="line">import &apos;package:p_project/style/string_base.dart&apos;;</span><br><span class="line"></span><br><span class="line">class CommonUtils &#123;</span><br><span class="line">  static StringBase getLocale(BuildContext context) &#123;</span><br><span class="line">    return MyLocalizations.of(context).currentLocalized;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-AppLocalizationContainer"><a href="#4-AppLocalizationContainer" class="headerlink" title="4 AppLocalizationContainer"></a>4 AppLocalizationContainer</h1><p><code>app_localization_container.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:p_project/common/c.dart&apos;;</span><br><span class="line"></span><br><span class="line">class AppLocalizationContainer extends StatefulWidget &#123;</span><br><span class="line">  final Widget child;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    return _AppLocalizationContainerState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  AppLocalizationContainer(&#123;@required this.child&#125;);</span><br><span class="line"></span><br><span class="line">  static _AppLocalizationContainerState of(BuildContext context) &#123;</span><br><span class="line">    return (context.inheritFromWidgetOfExactType(</span><br><span class="line">            _AppLocalizationInheritedWidget) as _AppLocalizationInheritedWidget)</span><br><span class="line">        .data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _AppLocalizationContainerState extends State&lt;AppLocalizationContainer&gt; &#123;</span><br><span class="line">  String locale = ZH;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return _AppLocalizationInheritedWidget(</span><br><span class="line">      data: this,</span><br><span class="line">      child: widget.child,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  void setLocal(String locale) &#123;</span><br><span class="line">    print(&apos;change launguage $locale&apos;);</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      this.locale = locale;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _AppLocalizationInheritedWidget extends InheritedWidget &#123;</span><br><span class="line">  final _AppLocalizationContainerState data;</span><br><span class="line"></span><br><span class="line">  _AppLocalizationInheritedWidget(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    @required this.data,</span><br><span class="line">    @required Widget child,</span><br><span class="line">  &#125;) : super(key: key, child: child);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool updateShouldNotify(InheritedWidget oldWidget) =&gt; true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="5-AppRootWidget-与-main"><a href="#5-AppRootWidget-与-main" class="headerlink" title="5 AppRootWidget 与 main"></a>5 AppRootWidget 与 main</h1><p><code>app.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:p_project/app_localization_container.dart&apos;;</span><br><span class="line">import &apos;package:p_project/common/localization/my_localizations_delegate.dart&apos;;</span><br><span class="line">import &apos;package:p_project/page/home_page.dart&apos;;</span><br><span class="line">import &apos;package:flutter_localizations/flutter_localizations.dart&apos;;</span><br><span class="line"></span><br><span class="line">class AppRootWidget extends StatefulWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  AppRootWidgetState createState() =&gt; new AppRootWidgetState();</span><br><span class="line"></span><br><span class="line">  AppRootWidget();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class AppRootWidgetState extends State&lt;AppRootWidget&gt; &#123;</span><br><span class="line">  ThemeData get _themeData =&gt; new ThemeData(</span><br><span class="line">        primaryColor: Colors.cyan,</span><br><span class="line">        accentColor: Colors.indigo,</span><br><span class="line">        scaffoldBackgroundColor: Colors.grey[300],</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    var locale = AppLocalizationContainer.of(context).locale;</span><br><span class="line">    return new MaterialApp(</span><br><span class="line">      title: &apos;Inherited&apos;,</span><br><span class="line">      debugShowCheckedModeBanner: false,</span><br><span class="line">      theme: _themeData,</span><br><span class="line">      localizationsDelegates: [</span><br><span class="line">        GlobalMaterialLocalizations.delegate,</span><br><span class="line">        GlobalWidgetsLocalizations.delegate,</span><br><span class="line">        MyLocalizationsDelegate.delegate,</span><br><span class="line">      ],</span><br><span class="line">      supportedLocales: [</span><br><span class="line">        const Locale(&apos;en&apos;, &apos;US&apos;), // English</span><br><span class="line">        const Locale(&apos;zh&apos;, &apos;Chinese&apos;), // Hebrew</span><br><span class="line">      ],</span><br><span class="line">      locale: Locale(locale),</span><br><span class="line">      routes: &#123;</span><br><span class="line">        &apos;/&apos;: (_) =&gt; HomePage(),</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>home_page.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:p_project/app_localization_container.dart&apos;;</span><br><span class="line">import &apos;package:p_project/common/common_utils.dart&apos;;</span><br><span class="line"></span><br><span class="line">class HomePage extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      body: SafeArea(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            RaisedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                AppLocalizationContainer.of(context).setLocal(&apos;zh&apos;);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(&apos;change launge - zh&apos;),</span><br><span class="line">            ),</span><br><span class="line">            RaisedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                AppLocalizationContainer.of(context).setLocal(&apos;en&apos;);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(&apos;change launge - en&apos;),</span><br><span class="line">            ),</span><br><span class="line">            Text(CommonUtils.getLocale(context).welcomeMessage),</span><br><span class="line">            Text(AppLocalizationContainer.of(context).locale),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>main.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void main() =&gt; runApp(AppLocalizationContainer(</span><br><span class="line">      child: AppRootWidget(),</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure>
<p>参考</p>
<ul>
<li><a href="https://flutter.dev/docs/development/accessibility-and-localization/internationalization" target="_blank" rel="noopener">官方文档</a></li>
<li><a href="https://github.com/CarGuo/GSYGithubAppFlutter" target="_blank" rel="noopener">https://github.com/CarGuo/GSYGithubAppFlutter</a></li>
<li><a href="https://flutterbyexample.com/state-management-the-flutter-way" target="_blank" rel="noopener">https://flutterbyexample.com/state-management-the-flutter-way</a></li>
<li><a href="https://stackoverflow.com/questions/52077970/flutter-how-to-create-a-singleton-from-an-http-request" target="_blank" rel="noopener">https://stackoverflow.com/questions/52077970/flutter-how-to-create-a-singleton-from-an-http-request</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/12/flutter/项目模块拆分/动画/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/12/flutter/项目模块拆分/动画/" itemprop="url">动画</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-12T13:18:12+08:00">
                2018-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>动画本质：</p>
<p>通过数学公式根据 时间(Duration) 修改 Value, Value 值变化影响界面呈现。</p>
<h1 id="相关类整理"><a href="#相关类整理" class="headerlink" title="相关类整理"></a>相关类整理</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Animatable</span><br><span class="line">  - Tween：使用它创建 Value 初始值和结束值。</span><br><span class="line">    - ColorTween</span><br><span class="line">    - IntTween</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Animation</span><br><span class="line">  - CurvedAnimation：修改数学公式，插值器，控制 Value 变化过程</span><br><span class="line">  - AnimationController：设置动画时长，控制动画</span><br><span class="line">  - ReverseAnimation</span><br><span class="line"></span><br><span class="line">AnimatedBuilder: 可以省去 addListener</span><br></pre></td></tr></table></figure>
<h1 id="动画创建基本过程"><a href="#动画创建基本过程" class="headerlink" title="动画创建基本过程"></a>动画创建基本过程</h1><h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><h2 id="不设置-插值器-时默认是线形动画"><a href="#不设置-插值器-时默认是线形动画" class="headerlink" title="不设置 插值器 时默认是线形动画"></a>不设置 插值器 时默认是线形动画</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">animationController = AnimationController(duration: Duration(seconds: 2), vsync: this);</span><br><span class="line"></span><br><span class="line">animation = Tween(begin: 1.0, end: 0.0).animate(CurvedAnimation(</span><br><span class="line">    parent: animationController, curve: Curves.fastOutSlowIn));</span><br><span class="line"></span><br><span class="line">animation = Tween(begin: 1.0, end: 0.0).animate(animationController);</span><br><span class="line"></span><br><span class="line">animationController.addListener(() &#123;</span><br><span class="line">  setState(() &#123;&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">animationController.forward();</span><br><span class="line"></span><br><span class="line">// animation.value 获取值</span><br></pre></td></tr></table></figure>
<h2 id="设置-插值器"><a href="#设置-插值器" class="headerlink" title="设置 插值器"></a>设置 插值器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">animationController = AnimationController(duration: Duration(seconds: 2), vsync: this);</span><br><span class="line"></span><br><span class="line">animation = Tween(begin: 1.0, end: 0.0).animate(CurvedAnimation(</span><br><span class="line">    parent: animationController, curve: Curves.fastOutSlowIn));</span><br><span class="line"></span><br><span class="line">animationController.addListener(() &#123;</span><br><span class="line">  setState(() &#123;&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">animationController.forward();</span><br></pre></td></tr></table></figure>
<h1 id="使用-Transform-创建动画"><a href="#使用-Transform-创建动画" class="headerlink" title="使用 Transform 创建动画"></a>使用 Transform 创建动画</h1><blockquote>
<p>用于子控件的整体动画<br>A widget that applies a transformation before painting its child.</p>
</blockquote>
<p>通过矩阵实现动画。</p>
<p>平移：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Transform(</span><br><span class="line">  transform:</span><br><span class="line">  Matrix4.translationValues(animation.value * width, 0.0, 0.0),</span><br><span class="line">  child: ...,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h1 id="AnimatedSwitcher"><a href="#AnimatedSwitcher" class="headerlink" title="AnimatedSwitcher"></a>AnimatedSwitcher</h1><blockquote>
<p>用于插入控件，控件删除，控件大小改变时的动画</p>
</blockquote>
<p>默认效果：透明度渐变效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AnimatedSwitcher(</span><br><span class="line">  duration: Duration(milliseconds: ANIMATED_DURATION_DEFAULT),</span><br><span class="line">  child: Visibility(</span><br><span class="line">    child: Text(&apos;Visibility Text&apos;),</span><br><span class="line">    key: ValueKey&lt;bool&gt;(_visibility),</span><br><span class="line">    visible: _visibility,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<p>设置动画效果：缩小放大效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">AnimatedSwitcher(</span><br><span class="line">  switchOutCurve: switchOutCurve,</span><br><span class="line">  switchInCurve: switchInCurve,</span><br><span class="line">  duration: Duration(milliseconds: 500),</span><br><span class="line">  transitionBuilder: (Widget child, Animation&lt;double&gt; animation) &#123;</span><br><span class="line">    return ScaleTransition(child: child, scale: animation);</span><br><span class="line">  &#125;,</span><br><span class="line">  child: Text(</span><br><span class="line">    text,</span><br><span class="line">    key: new ValueKey&lt;String&gt;(text),</span><br><span class="line">    style: TextStyleUtils.normalSubText,</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>必须设置 <code>key: new ValueKey&lt;String&gt;(text),</code></p>
<p>设置 key 后在 Text 内容改变的时候，不会创建新的 Widget 而是执行一个动画改变内容。</p>
<h1 id="复合动画"><a href="#复合动画" class="headerlink" title="复合动画"></a>复合动画</h1><ol>
<li>多个 Animatable 设置同一个 AnimationController, 达到同时启动的效果</li>
</ol>
<p>参考：</p>
<ul>
<li><a href="[https://flutter.io/tutorials/animation/](https://flutter.io/tutorials/animation/"><a href="https://flutter.io/tutorials/animation/" target="_blank" rel="noopener">https://flutter.io/tutorials/animation/</a></a>)</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/12/flutter/feature/WillPopScope使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/12/flutter/feature/WillPopScope使用/" itemprop="url">WillPopScope使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-12T13:18:12+08:00">
                2018-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用结构"><a href="#常用结构" class="headerlink" title="常用结构"></a>常用结构</h1><p>Home 页面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Scaffold</span><br><span class="line">  - SafeArea</span><br><span class="line">    - WillPopScope</span><br></pre></td></tr></table></figure>
<blockquote>
<p>IOS 下会怎么样？？？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const WillPopScope(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  @required this.child,</span><br><span class="line">  @required this.onWillPop,</span><br><span class="line">&#125;) : assert(child != null),</span><br><span class="line">     super(key: key);</span><br></pre></td></tr></table></figure>
<p><code>WillPopScope</code> 创建的时候需要两个参数 <code>child</code>, <code>onWillPop</code></p>
<p><code>onWillPop</code> 就表示当前页面将退出。 值类型是一个函数 <code>typedef Future&lt;bool&gt; WillPopCallback();</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WillPopScope(</span><br><span class="line">    onWillPop: ()&#123;</span><br><span class="line">        print(&apos;onWillPop&apos;);</span><br><span class="line">        return Future.value(false);</span><br><span class="line">    &#125;,</span><br><span class="line">    child: Container(</span><br><span class="line">        child: Text(&apos;haha&apos;),</span><br><span class="line">    ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<p>返回 <code>Future.value(false);</code> 表示不退出.<br>返回 <code>Future.value(true);</code> 表示退出.</p>
<h2 id="Android-返回按钮点击两次退出应用"><a href="#Android-返回按钮点击两次退出应用" class="headerlink" title="Android 返回按钮点击两次退出应用"></a>Android 返回按钮点击两次退出应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int last = 0;</span><br><span class="line"></span><br><span class="line">Future&lt;bool&gt; doubleClickBack() &#123;</span><br><span class="line">  int now = DateTime.now().millisecond;</span><br><span class="line">  if (now - last &gt; 800) &#123;</span><br><span class="line">    last = DateTime.now().millisecond;</span><br><span class="line">    return Future.value(false);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return Future.value(true);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onWillPop: doubleClickBack,</span><br></pre></td></tr></table></figure>
<h2 id="返回的时候提示弹窗"><a href="#返回的时候提示弹窗" class="headerlink" title="返回的时候提示弹窗"></a>返回的时候提示弹窗</h2><p><a href="https://stackoverflow.com/questions/49356664/how-to-override-the-back-button-in-flutter" target="_blank" rel="noopener">https://stackoverflow.com/questions/49356664/how-to-override-the-back-button-in-flutter</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import &apos;dart:async&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">class HomePage extends StatefulWidget &#123;</span><br><span class="line">  HomePage(&#123;Key key, this.title&#125;) :super(key: key);</span><br><span class="line"></span><br><span class="line">  final String title;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  State&lt;StatefulWidget&gt; createState() =&gt; new _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _HomePageState extends State&lt;HomePage&gt; &#123;</span><br><span class="line"></span><br><span class="line">  Future&lt;bool&gt; _onWillPop() &#123;</span><br><span class="line">    return showDialog(</span><br><span class="line">      context: context,</span><br><span class="line">      builder: (context) =&gt; new AlertDialog(</span><br><span class="line">        title: new Text(&apos;Are you sure?&apos;),</span><br><span class="line">        content: new Text(&apos;Do you want to exit an App&apos;),</span><br><span class="line">        actions: &lt;Widget&gt;[</span><br><span class="line">          new FlatButton(</span><br><span class="line">            onPressed: () =&gt; Navigator.of(context).pop(false),</span><br><span class="line">            child: new Text(&apos;No&apos;),</span><br><span class="line">          ),</span><br><span class="line">          new FlatButton(</span><br><span class="line">            onPressed: () =&gt; Navigator.of(context).pop(true),</span><br><span class="line">            child: new Text(&apos;Yes&apos;),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ) ?? false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return new WillPopScope(</span><br><span class="line">      onWillPop: _onWillPop,</span><br><span class="line">      child: new Scaffold(</span><br><span class="line">        appBar: new AppBar(</span><br><span class="line">          title: new Text(&quot;Home Page&quot;),</span><br><span class="line">        ),</span><br><span class="line">        body: new Center(</span><br><span class="line">          child: new Text(&quot;Home Page&quot;),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/12/flutter/feature/InheritedWidget-主题切换/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/12/flutter/feature/InheritedWidget-主题切换/" itemprop="url">Flutter 国际化 - InheritedWidget</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-12T13:18:12+08:00">
                2018-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="使用-InheritedWidget"><a href="#使用-InheritedWidget" class="headerlink" title="使用 InheritedWidget"></a>使用 InheritedWidget</h1><p>ShrineTheme 作为 root widget</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class ShrineTheme extends InheritedWidget &#123;</span><br><span class="line">  ShrineTheme(&#123; Key key, @required Widget child &#125;)</span><br><span class="line">    : assert(child != null),</span><br><span class="line">      super(key: key, child: child);</span><br><span class="line"></span><br><span class="line">  final Color cardBackgroundColor = Colors.white;</span><br><span class="line"></span><br><span class="line">  final TextStyle appBarTitleStyle = robotoRegular20(Colors.black87);</span><br><span class="line"></span><br><span class="line">  static ShrineTheme of(BuildContext context) =&gt; context.inheritFromWidgetOfExactType(ShrineTheme);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool updateShouldNotify(ShrineTheme oldWidget) =&gt; false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>InheritedWidget 应用场景：全局主题替换，局部单例，全局单例，存储用户信息。存储全局变量</p>
<p>参考：</p>
<p><a href="https://flutterbyexample.com/state-management-the-flutter-way" target="_blank" rel="noopener">https://flutterbyexample.com/state-management-the-flutter-way</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/12/flutter/项目模块拆分/样式管理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/12/flutter/项目模块拆分/样式管理/" itemprop="url">样式管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-12T13:18:12+08:00">
                2018-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="借助-Theme"><a href="#借助-Theme" class="headerlink" title="借助 Theme"></a>借助 Theme</h1><p>final ThemeData theme = Theme.of(context);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new Text(</span><br><span class="line">    demo.title,</span><br><span class="line">    style: theme.textTheme.subhead.copyWith(</span><br><span class="line">        color: isDark ? Colors.white : const Color(0xFF202124),</span><br><span class="line">    ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h1 id="定义工具类"><a href="#定义工具类" class="headerlink" title="定义工具类"></a>定义工具类</h1><p><code>TextStyle</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">class TextStyleUtils &#123;</span><br><span class="line">  static const lagerTextSize = 30.0;</span><br><span class="line">  static const bigTextSize = 23.0;</span><br><span class="line">  static const normalTextSize = 18.0;</span><br><span class="line">  static const middleTextWhiteSize = 16.0;</span><br><span class="line">  static const smallTextSize = 14.0;</span><br><span class="line">  static const minTextSize = 12.0;</span><br><span class="line"></span><br><span class="line">  static const normalSubText = TextStyle(</span><br><span class="line">    color: Colors.black,</span><br><span class="line">    fontSize: normalTextSize,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="使用-InheritedWidget"><a href="#使用-InheritedWidget" class="headerlink" title="使用 InheritedWidget"></a>使用 InheritedWidget</h1><p>ShrineTheme 作为 root widget</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class ShrineTheme extends InheritedWidget &#123;</span><br><span class="line">  ShrineTheme(&#123; Key key, @required Widget child &#125;)</span><br><span class="line">    : assert(child != null),</span><br><span class="line">      super(key: key, child: child);</span><br><span class="line"></span><br><span class="line">  final Color cardBackgroundColor = Colors.white;</span><br><span class="line"></span><br><span class="line">  final TextStyle appBarTitleStyle = robotoRegular20(Colors.black87);</span><br><span class="line"></span><br><span class="line">  static ShrineTheme of(BuildContext context) =&gt; context.inheritFromWidgetOfExactType(ShrineTheme);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool updateShouldNotify(ShrineTheme oldWidget) =&gt; false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>InheritedWidget 应用场景：全局主题替换，局部单例，全局单例，存储用户信息。存储全局变量</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/11/flutter/项目模块拆分/JSON与Bean/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/11/flutter/项目模块拆分/JSON与Bean/" itemprop="url">JSON 与 Bean</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-11T13:18:12+08:00">
                2018-09-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用 <code>json_serializable</code>, <code>build_runner</code>, <code>json_annotation</code> 解决 JSON -&gt; Model 的问题。</p>
<h1 id="设置依赖"><a href="#设置依赖" class="headerlink" title="设置依赖"></a>设置依赖</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  json_annotation: ^1.1.0</span><br><span class="line"></span><br><span class="line">dev_dependencies:</span><br><span class="line">  build_runner: ^0.10.2</span><br><span class="line">  json_serializable: ^1.2.0</span><br></pre></td></tr></table></figure>
<h1 id="创建一个-Model"><a href="#创建一个-Model" class="headerlink" title="创建一个 Model"></a>创建一个 Model</h1><p><code>model/user_model.dart</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:json_annotation/json_annotation.dart&apos;;</span><br><span class="line"></span><br><span class="line">part &apos;user_model.g.dart&apos;;</span><br><span class="line"></span><br><span class="line">@JsonSerializable()</span><br><span class="line">class UserModel &#123;</span><br><span class="line">  String name;</span><br><span class="line">  int age;</span><br><span class="line"></span><br><span class="line">  UserModel(this.name, this.age);</span><br><span class="line"></span><br><span class="line">  factory UserModel.fromJson(Map&lt;String, dynamic&gt; json) =&gt;</span><br><span class="line">      _$UserModelFromJson(json);</span><br><span class="line"></span><br><span class="line">  Map&lt;String, dynamic&gt; toJson() =&gt; _$UserModelToJson(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>写完后会报错，先不管</p>
</blockquote>
<h1 id="使用-build-runner-自动生成-JSON解析-相关的代码"><a href="#使用-build-runner-自动生成-JSON解析-相关的代码" class="headerlink" title="使用 build_runner 自动生成 JSON解析 相关的代码"></a>使用 build_runner 自动生成 JSON解析 相关的代码</h1><p>创建 JSON 解析文件：在工程目录下执行下面命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure>
<p>执行完成后，在 <code>model</code> 文件夹下会生成 <code>user_model.g.dart</code> 文件, <code>user_model.dart</code> 的报错会消失。</p>
<h1 id="写个单元测试"><a href="#写个单元测试" class="headerlink" title="写个单元测试"></a>写个单元测试</h1><p>在 <code>test</code> 文件夹下：</p>
<p><code>json_test.dart</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter_test/flutter_test.dart&apos;;</span><br><span class="line">import &apos;dart:convert&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter_app/model/user_model.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  String JSON_STRING = &apos;&apos;&apos;&#123;&quot;name&quot;:&quot;fangmingdong&quot;,&quot;age&quot;:12&#125;&apos;&apos;&apos;;</span><br><span class="line"></span><br><span class="line">  group(&apos;jsonparse test&apos;, () &#123;</span><br><span class="line"></span><br><span class="line">    test(&apos;to json&apos;, () &#123;</span><br><span class="line">      UserModel userModel = UserModel(&apos;fangmingdong&apos;, 12);</span><br><span class="line">      String jsonStr = json.encode(userModel.toJson());</span><br><span class="line">      print(jsonStr);</span><br><span class="line">      expect(jsonStr, JSON_STRING);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    test(&apos;mockdata test&apos;, () &#123;</span><br><span class="line">      UserModel userModel = UserModel.fromJson(json.decode(JSON_STRING));</span><br><span class="line">      expect(userModel.age, 12);</span><br><span class="line">      expect(userModel.name, &apos;fangmingdong&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="工程级封装"><a href="#工程级封装" class="headerlink" title="工程级封装"></a>工程级封装</h1><p>通常接口设计都是以下面格式的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;: 200,</span><br><span class="line">  &quot;msg&quot;: &quot;success&quot;,</span><br><span class="line">  &quot;data&quot;:&#123;</span><br><span class="line">      ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Android 中通常使用泛型解析上面的 JSON:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class BaseResponse&lt;T&gt;&#123;</span><br><span class="line">  int code;</span><br><span class="line">  String msg;</span><br><span class="line">  T data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是 <code>json_serializable</code> 并不支持泛型解析。</p>
<h2 id="不太优雅的解决方案-继承"><a href="#不太优雅的解决方案-继承" class="headerlink" title="不太优雅的解决方案 继承"></a>不太优雅的解决方案 继承</h2><p>解析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;: 200,</span><br><span class="line">  &quot;msg&quot;: &quot;success&quot;,</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;name&quot;: &quot;fangmingdong&quot;,</span><br><span class="line">    &quot;age&quot;: 12,</span><br><span class="line">    &quot;book&quot;: &#123;</span><br><span class="line">      &quot;id&quot;: 1,</span><br><span class="line">      &quot;name&quot;: &quot;从你的全世界路过&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>base_response.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:json_annotation/json_annotation.dart&apos;;</span><br><span class="line"></span><br><span class="line">part &apos;base_response.g.dart&apos;;</span><br><span class="line"></span><br><span class="line">@JsonSerializable()</span><br><span class="line">class BaseResponse&#123;</span><br><span class="line"></span><br><span class="line">  int code;</span><br><span class="line">  String msg;</span><br><span class="line"></span><br><span class="line">  BaseResponse(this.code, this.msg);</span><br><span class="line"></span><br><span class="line">  factory BaseResponse.fromJson(Map&lt;String, dynamic&gt; json) =&gt;</span><br><span class="line">      _$BaseResponseFromJson(json);</span><br><span class="line"></span><br><span class="line">  Map&lt;String, dynamic&gt; toJson() =&gt; _$BaseResponseToJson(this);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>user_model.dart</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter_app/model/base_response.dart&apos;;</span><br><span class="line">import &apos;package:flutter_app/model/book_model.dart&apos;;</span><br><span class="line">import &apos;package:json_annotation/json_annotation.dart&apos;;</span><br><span class="line"></span><br><span class="line">part &apos;user_model.g.dart&apos;;</span><br><span class="line"></span><br><span class="line">@JsonSerializable()</span><br><span class="line">class UserModel extends BaseResponse &#123;</span><br><span class="line">  UserModelReal data;</span><br><span class="line"></span><br><span class="line">  UserModel(this.data) : super(0, &apos;&apos;);</span><br><span class="line"></span><br><span class="line">  factory UserModel.fromJson(Map&lt;String, dynamic&gt; json) =&gt;</span><br><span class="line">      _$UserModelFromJson(json);</span><br><span class="line"></span><br><span class="line">  Map&lt;String, dynamic&gt; toJson() =&gt; _$UserModelToJson(this);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@JsonSerializable()</span><br><span class="line">class UserModelReal &#123;</span><br><span class="line">  String name;</span><br><span class="line">  int age;</span><br><span class="line">  BookModel book;</span><br><span class="line"></span><br><span class="line">  UserModelReal(this.name, this.age, this.book);</span><br><span class="line"></span><br><span class="line">  factory UserModelReal.fromJson(Map&lt;String, dynamic&gt; json) =&gt;</span><br><span class="line">      _$UserModelRealFromJson(json);</span><br><span class="line"></span><br><span class="line">  Map&lt;String, dynamic&gt; toJson() =&gt; _$UserModelRealToJson(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>test:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter_test/flutter_test.dart&apos;;</span><br><span class="line">import &apos;dart:convert&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter_app/model/user_model.dart&apos;;</span><br><span class="line">import &apos;package:flutter_app/model/book_model.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  String JSON_STRING = &apos;&apos;&apos;&#123;&quot;code&quot;:200,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&#123;&quot;name&quot;:&quot;fangmingdong&quot;,&quot;age&quot;:12,&quot;book&quot;:&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;从你的全世界路过&quot;&#125;&#125;&#125;&apos;&apos;&apos;;</span><br><span class="line"></span><br><span class="line">  group(&apos;jsonparse test&apos;, () &#123;</span><br><span class="line"></span><br><span class="line">    test(&apos;to json&apos;, () &#123;</span><br><span class="line">      UserModel userModel = UserModel(new UserModelReal(&apos;fangmingdong&apos;, 12, BookModel(1, &apos;从你的全世界路过&apos;)));</span><br><span class="line">      String jsonStr = json.encode(userModel.toJson());</span><br><span class="line">      print(jsonStr);</span><br><span class="line">//      expect(jsonStr, JSON_STRING);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    test(&apos;mockdata test&apos;, () &#123;</span><br><span class="line">      UserModel userModel = UserModel.fromJson(json.decode(JSON_STRING));</span><br><span class="line">      expect(userModel.data.age, 12);</span><br><span class="line">      expect(userModel.data.name, &apos;fangmingdong&apos;);</span><br><span class="line">      expect(userModel.code, 200);</span><br><span class="line">      expect(userModel.msg, &quot;success&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="https://juejin.im/post/5b5f00e7e51d45190571172f" target="_blank" rel="noopener">https://juejin.im/post/5b5f00e7e51d45190571172f</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
