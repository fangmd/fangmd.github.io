<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta property="og:type" content="website">
<meta property="og:title" content="Double">
<meta property="og:url" content="http://yoursite.com/page/44/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Double">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/44/">





  <title>Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/12/Android/view/RecyclerView/RecyclerView上拉加载/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/Android/view/RecyclerView/RecyclerView上拉加载/" itemprop="url">RecyclerView上拉加载</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-12T09:38:14+08:00">
                2016-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="RecyclerView上拉加载"><a href="#RecyclerView上拉加载" class="headerlink" title="RecyclerView上拉加载"></a>RecyclerView上拉加载</h1>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/12/Android/view/RecyclerView/RecyclerView上拉加载/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/12/Android/view/PopupwWndow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/Android/view/PopupwWndow/" itemprop="url">PopupWindow 介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-12T09:38:14+08:00">
                2016-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="获取-width-hegith"><a href="#获取-width-hegith" class="headerlink" title="获取 width hegith"></a>获取 width hegith</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//UNSPECIFIED WRAP_CONTENT 的时候使用，其他的根据实际情况确定</span></span><br><span class="line"></span><br><span class="line">mPopupWindow.getContentView().measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> popHeight=mPopupWindow.getContentView().getMeasuredHeight();</span><br></pre></td></tr></table></figure>
<h1 id="PopupWindow-介绍"><a href="#PopupWindow-介绍" class="headerlink" title="PopupWindow 介绍"></a>PopupWindow 介绍</h1><blockquote>
<p>一个弹出窗口控件，可以用来显示任意视图(View)，而且会浮动在当前 活动(activity)的顶部</p>
</blockquote>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="0-构造方法"><a href="#0-构造方法" class="headerlink" title="0 构造方法"></a>0 构造方法</h3><blockquote>
<p>通过构造方法构建对象<br>有5个构造方法，介绍最终要的一个：</p>
</blockquote>
<pre><code>public PopupWindow(View contentView, int width, int height, boolean focusable)
</code></pre><p>参数1：pupupWindow里面的布局控件；参数2：宽度；参数3：高度；参数4：是否可以获取焦点； </p>
<h3 id="1-显示popupWindow"><a href="#1-显示popupWindow" class="headerlink" title="1 显示popupWindow"></a>1 显示popupWindow</h3><h4 id="showAsDropDown"><a href="#showAsDropDown" class="headerlink" title="showAsDropDown"></a>showAsDropDown</h4><ul>
<li>showAsDropDown(View anchor)</li>
<li>showAsDropDown(View anchor, int xoff, int yoff)</li>
<li>showAsDropDown(View anchor, int xoff, int yoff, int gravity)</li>
<li>showAtLocation(View parent, int gravity, int x, int y)</li>
</ul>
<h3 id="其他的设置"><a href="#其他的设置" class="headerlink" title="其他的设置"></a>其他的设置</h3><h4 id="点击外部popup消失"><a href="#点击外部popup消失" class="headerlink" title="点击外部popup消失"></a>点击外部popup消失</h4><pre><code>// =======  两者结合才能让popup点击外部消失
popupWindow.setOutsideTouchable(true);
popupWindow.setBackgroundDrawable(new BitmapDrawable());
// =======  两者结合才能让popup点击外部消失
</code></pre><h4 id="焦点问题"><a href="#焦点问题" class="headerlink" title="焦点问题"></a>焦点问题</h4><p>popup具有处理触屏和物理按键的能力不是与生俱来的，需要设置 </p>
<pre><code>popupWindow.setFocusable(true);
</code></pre><h4 id="popup的和软键盘"><a href="#popup的和软键盘" class="headerlink" title="popup的和软键盘"></a>popup的和软键盘</h4><p>setSoftInputMode</p>
<h4 id="关于popup的动画"><a href="#关于popup的动画" class="headerlink" title="关于popup的动画"></a>关于popup的动画</h4><pre><code>public void setAnimationStyle(int animationStyle)
</code></pre><p>可以选用系统提供的</p>
<pre><code>popWindow.setAnimationStyle(android.R.style.Animation_InputMethod);
可以使用自定义的进出动画：
</code></pre><p>android:windowEnterAnimation表示进入窗口动画<br>android:windowExitAnimation表示窗口退出动画</p>
<ul>
<li><p>接口<code>PopupWindow.OnDismissListener</code></p>
<blockquote>
<p>当<code>PopupWindow</code>消失的时候调用</p>
</blockquote>
</li>
<li><p>两个xml属性</p>
<ul>
<li><code>android:popupBackground</code>  –&gt; <code>setBackgroundDrawable(Drawable)</code></li>
<li><code>android:popupElevation</code> –&gt; <code>setElevation(float)</code></li>
</ul>
</li>
<li><p>常量：<code>setInputMethodMode(int)</code></p>
<ul>
<li><code>INPUT_METHOD_FROM_FOCUSABLE</code></li>
<li><code>INPUT_METHOD_NEEDED</code></li>
<li><code>INPUT_METHOD_NOT_NEEDED</code></li>
</ul>
</li>
<li>构造方法 (n多)<ul>
<li><code>PopupWindow(View contentView, int width, int height)</code>：参数1是通过布局文件创建的<code>View</code></li>
</ul>
</li>
</ul>
<p>几个重要的方法：</p>
<ul>
<li>必须要<strong>设置背景</strong>否则无法响应点击事件</li>
<li><code>dismiss()</code></li>
<li><code>setOutsideTouchable(true)</code>：设置后可以点击外面使它消失</li>
<li><p><code>mPopupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);&#39; &#39;mPopupWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);</code>自适应宽高</p>
</li>
<li><p><code>setHeight</code> <code>setWidth</code></p>
</li>
<li><code>setTouchInterceptor</code>这个方法会拦截屏幕上所有的点击事件</li>
</ul>
<p>添加内部控件的点击事件和普通添加监听器的方式一样，获取控件<code>set..Listener..</code></p>
<h1 id="PopupWindow-使用例子"><a href="#PopupWindow-使用例子" class="headerlink" title="PopupWindow 使用例子"></a>PopupWindow 使用例子</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showMoreMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mPopupWindowShowing = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (mPopupWindow == <span class="keyword">null</span>) &#123;</span><br><span class="line">            View view = LayoutInflater.from(getActivity()).inflate(R.layout.teach_noti_more_menu, <span class="keyword">null</span>);</span><br><span class="line">            ViewGroup.LayoutParams layoutParams = view.getLayoutParams();</span><br><span class="line"></span><br><span class="line">            mPopupWindow = <span class="keyword">new</span> PopupWindow(view, ScreenUtils.dp2px(getActivity(), layoutParams.width),</span><br><span class="line">                    layoutParams.height);</span><br><span class="line"><span class="comment">//        mPopupWindow.setFocusable(true);</span></span><br><span class="line">            mPopupWindow.setTouchable(<span class="keyword">true</span>);</span><br><span class="line">            mPopupWindow.setBackgroundDrawable(<span class="keyword">new</span> BitmapDrawable());</span><br><span class="line">            mPopupWindow.setOutsideTouchable(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            view.findViewById(R.id.ll_teach_noti_all_read).setOnClickListener(v -&gt;</span><br><span class="line">                    mPresenter.setAllNotiReaded(mUserId));</span><br><span class="line"></span><br><span class="line">            view.findViewById(R.id.ll_teach_noti_more_reward).setOnClickListener(v -&gt;</span><br><span class="line">                    showRewardUI());</span><br><span class="line">        &#125;</span><br><span class="line">        mPopupWindow.showAsDropDown(mRightMore);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/12/Android/view/SwipeRefreshLayout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/Android/view/SwipeRefreshLayout/" itemprop="url">SwipeRefreshLayout</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-12T09:38:14+08:00">
                2016-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="SwipeRefreshLayout"><a href="#SwipeRefreshLayout" class="headerlink" title="SwipeRefreshLayout"></a>SwipeRefreshLayout</h1><blockquote>
<p>谷歌公司推出的用于下拉刷新的控件，SwipeRefreshLayout已经被放到了sdk中，在Version 19.1之后SwipeRefreshLayout 被放到support v4中。<br>源码在SDK\sdk\extras\android\support\v4\src\java\android\support\v4\widget\SwipeRefreshLayout.java</p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/12/Android/view/SwipeRefreshLayout/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/12/Android/UI/Material design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/Android/UI/Material design/" itemprop="url">Material design</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-12T09:38:14+08:00">
                2016-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Material-design"><a href="#Material-design" class="headerlink" title="Material design"></a>Material design</h1><h2 id="Material-properties"><a href="#Material-properties" class="headerlink" title="Material properties"></a>Material properties</h2><p>官网地址：<a href="https://www.google.com/design/spec/what-is-material/material-properties.html#" target="_blank" rel="noopener">https://www.google.com/design/spec/what-is-material/material-properties.html#</a></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/12/Android/UI/Material design/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/11/Android/网络/retrofit/Retrofit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/11/Android/网络/retrofit/Retrofit/" itemprop="url">Retrofit</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-11T11:38:14+08:00">
                2016-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Retrofit-介绍"><a href="#Retrofit-介绍" class="headerlink" title="Retrofit 介绍"></a>Retrofit 介绍</h1><p>Retrofit框架是属于Square公司的一个开源框架；</p>
<p>官方简介：A type-safe rest client for Android and java</p>
<p>核心特点：使用接口和注解来描述http请求，减少编写的http请求代码，可读性和可维护性比较好。</p>
<p>核心技术点：1. java动态代理，就是动态生成接口实现类； 2. 反射</p>
<p>让用户创建接口，使用retrofit指定的规则进行网络访问，把接口传入retrofit；<br>retrofit对接口进行解析，最后进行实际的网络请求。</p>
<p>retrofit所做的事就是简化了用户网络请求的代码</p>
<p>不足：</p>
<ol>
<li>不支持显示上传和下载请求的进度，不支持端点续传</li>
<li>不可以针对单个请求配置连接和超时时间</li>
<li>不可以在接口中直接配置server和base url</li>
<li>不支持客户端缓存</li>
<li>拦截器不可以对请求进行控制，未附带请求信息，这样直接导致无法实现对请求的签名</li>
</ol>
<h1 id="Retrofit-使用"><a href="#Retrofit-使用" class="headerlink" title="Retrofit 使用"></a>Retrofit 使用</h1><p>官方：<a href="http://square.github.io/retrofit/" target="_blank" rel="noopener">http://square.github.io/retrofit/</a></p>
<p>例子请求地址：<a href="http://www.tngou.net/api/lore/classify" target="_blank" rel="noopener">http://www.tngou.net/api/lore/classify</a></p>
<h2 id="0-导包"><a href="#0-导包" class="headerlink" title="0 导包"></a>0 导包</h2><pre><code>compile &apos;com.squareup.retrofit2:retrofit:2.0.1&apos;
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/11/Android/网络/retrofit/Retrofit/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/10/Android/view/ListView/ListView图片复用导致布局更改联动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/10/Android/view/ListView/ListView图片复用导致布局更改联动/" itemprop="url">ListView 布局复用导致的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-10T11:38:14+08:00">
                2016-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="ListView-布局复用导致的问题"><a href="#ListView-布局复用导致的问题" class="headerlink" title="ListView 布局复用导致的问题"></a>ListView 布局复用导致的问题</h1><blockquote>
<p>解决由于listview布局复用，我们在改变一个item中布局的时候另一个item的布局也改变了。</p>
</blockquote>
<h2 id="方案一-取消listview的布局复用"><a href="#方案一-取消listview的布局复用" class="headerlink" title="方案一 取消listview的布局复用"></a>方案一 取消listview的布局复用</h2><blockquote>
<p>不推荐使用</p>
</blockquote>
<p>数据量少，且listview布局中没有图片的时候可以使用。</p>
<p>即不管convertView是否为null都创建新的对象。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/10/Android/view/ListView/ListView图片复用导致布局更改联动/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/10/Android/Android悬浮窗/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/10/Android/Android悬浮窗/" itemprop="url">Android 悬浮窗实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-10T11:38:14+08:00">
                2016-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Android-悬浮窗实现"><a href="#Android-悬浮窗实现" class="headerlink" title="Android 悬浮窗实现"></a>Android 悬浮窗实现</h1><blockquote>
<p>在不需要权限的情况下使用悬浮窗</p>
</blockquote>
<h2 id="1-权限"><a href="#1-权限" class="headerlink" title="1 权限"></a>1 权限</h2><blockquote>
<p>使用toast类型窗口不用设置权限</p>
</blockquote>
<pre><code>&lt;!-- 显示顶层浮窗 --&gt;
&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/10/Android/Android悬浮窗/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/10/program/Charles抓包工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/10/program/Charles抓包工具/" itemprop="url">Charles 抓包工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-10T08:18:12+08:00">
                2016-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/program/" itemprop="url" rel="index">
                    <span itemprop="name">program</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Charles-抓包工具"><a href="#Charles-抓包工具" class="headerlink" title="Charles 抓包工具"></a>Charles 抓包工具</h1><h2 id="软件介绍"><a href="#软件介绍" class="headerlink" title="软件介绍"></a>软件介绍</h2><p>Charles是一个HTTP代理服务器,HTTP监视器,反转代理服务器.它允许一个开发者查看所有连接互联网的HTTP通信.这些包括request,response现HTTP headers (包含cookies与caching信息).</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/10/program/Charles抓包工具/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/09/Android/app打包/混淆打包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/09/Android/app打包/混淆打包/" itemprop="url">android 代码混淆</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-09T12:18:12+08:00">
                2016-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="开启混淆"><a href="#开启混淆" class="headerlink" title="开启混淆"></a>开启混淆</h1><p>在app目录下 按 f4，将relese下的<code>Minify Enabled</code>改成true</p>
<p><img src="http://i.imgur.com/lyTsDID.png" alt></p>
<p>将窗口右侧的<code>gradle</code><br>打开，双击<code>build</code></p>
<p><img src="http://i.imgur.com/FqvcGRJ.png" alt></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/04/09/Android/app打包/混淆打包/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/09/Android/app打包/安卓软件打包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/09/Android/app打包/安卓软件打包/" itemprop="url">Android 软件打包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-09T12:18:12+08:00">
                2016-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0-软件包的数字签名"><a href="#0-软件包的数字签名" class="headerlink" title="0 软件包的数字签名"></a>0 软件包的数字签名</h1><ol>
<li>公钥、私钥</li>
<li>使用私钥对软件包进行签名，并且在软件包中包含公钥，Android手机就能够在安装软件的时候，进行软件有效性的检查，检查软件是否被非法篡改。</li>
</ol>
<h2 id="keystore-生成"><a href="#keystore-生成" class="headerlink" title="keystore 生成"></a>keystore 生成</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p><img src="http://i.imgur.com/tCki1Nk.png" alt></p>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><p><img src="http://i.imgur.com/fTESMtZ.png" alt></p>
<h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><p><img src="http://i.imgur.com/E7T6BdP.png" alt></p>
<h3 id="4"><a href="#4" class="headerlink" title="4"></a>4</h3><p><img src="http://i.imgur.com/xuQmqGR.png" alt></p>
<h3 id="5"><a href="#5" class="headerlink" title="5"></a>5</h3><p><img src="http://i.imgur.com/KFofpay.png" alt></p>
<h2 id="将-keystore加入到软件中"><a href="#将-keystore加入到软件中" class="headerlink" title="将 keystore加入到软件中"></a>将 keystore加入到软件中</h2><h3 id="6"><a href="#6" class="headerlink" title="6"></a>6</h3><p><img src="http://i.imgur.com/LfQlut5.png" alt></p>
<h3 id="7"><a href="#7" class="headerlink" title="7"></a>7</h3><p><img src="http://i.imgur.com/8grvt4l.png" alt></p>
<blockquote>
<p>之后debug模式和release模式都是用这个keystore，或者两个申请不同的接口</p>
</blockquote>
<h1 id="1-Gradle-UMeng-多渠道打包"><a href="#1-Gradle-UMeng-多渠道打包" class="headerlink" title="1 Gradle UMeng 多渠道打包"></a>1 Gradle UMeng 多渠道打包</h1><h2 id="修改-AndroidManifest-xml-里配置-（PlaceHolder）"><a href="#修改-AndroidManifest-xml-里配置-（PlaceHolder）" class="headerlink" title="修改 AndroidManifest.xml 里配置 （PlaceHolder）"></a>修改 AndroidManifest.xml 里配置 （PlaceHolder）</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"UMENG_CHANNEL"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:value</span>=<span class="string">"$&#123;UMENG_CHANNEL_VALUE&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="在-build-gradle-设置-productFlavors"><a href="#在-build-gradle-设置-productFlavors" class="headerlink" title="在 build.gradle 设置 productFlavors"></a>在 build.gradle 设置 productFlavors</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">android &#123;  </span><br><span class="line">    ...</span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        xiaomi &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;xiaomi&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">        _360 &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;_360&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">        baidu &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;baidu&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">        wandoujia &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wandoujia&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;  </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者批量修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">android &#123;  </span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        xiaomi &#123;&#125;</span><br><span class="line">        _360 &#123;&#125;</span><br><span class="line">        baidu &#123;&#125;</span><br><span class="line">        wandoujia &#123;&#125;</span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    productFlavors.all &#123; </span><br><span class="line">        flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>解释：productFlavors 类似于一个产品的不同特性的配置[2]. productFlavors.all 是一个遍历，每一个 productFlavors 中的值，其中productFlavors 的每一个值都有一个 name ，就是类似 wandoujia 这样的字符，每次循环的时候会替换掉 AndroidManifext.xml 中的${ONEAPMTESTCHANNEL}。</p>
</blockquote>
<h2 id="打包-执行-gradlew-assembleRelease"><a href="#打包-执行-gradlew-assembleRelease" class="headerlink" title="打包 执行 ./gradlew assembleRelease"></a>打包 执行 ./gradlew assembleRelease</h2><p>打开命令行定位到 project 目录，执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew assembleRelease</span><br></pre></td></tr></table></figure>
<p>注意事项：</p>
<ol>
<li>productFlavors 定义的时候里面的类似 wandoujia，不能是数字开头，不能是关键字 test 等，因为你要意识到你在写 gradle 脚本，要符合 groovy 语法。如下面的就不合法</li>
<li>flavor.manifestPlaceholders = [ONEAPMTESTCHANNEL: name]中的ONEAPMTESTCHANNEL 一定要和 AndroidManifext.xml 定义的一致。</li>
</ol>
<h2 id="assemble-命令"><a href="#assemble-命令" class="headerlink" title="assemble 命令"></a>assemble 命令</h2><p>assemble 这个命令，会结合 Build Type 创建自己的task，如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gradlew assembleDebug # 会打包 Debug apk</span><br><span class="line">./gradlew assembleRelease # 打包 Release apk</span><br></pre></td></tr></table></figure>
<p>除此之外 assemble 还能和 Product Flavor 结合创建新的任务（assemble + Build Variants），Build Variants = Build Type + Product Flavor</p>
<p>比如：打包wandoujia渠道的release版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./gradlew assembleWandoujiaRelease # 打包 wandoujia Release 版本，大小写不敏感</span><br><span class="line"></span><br><span class="line">./gradlew assembleWandoujia  # 此命令会生成wandoujia渠道的Release和Debug版本</span><br></pre></td></tr></table></figure></p>
<h1 id="packer-ng-plugin-打包工具"><a href="#packer-ng-plugin-打包工具" class="headerlink" title="packer-ng-plugin 打包工具"></a>packer-ng-plugin 打包工具</h1><p>项目地址：<a href="https://github.com/mcxiaoke/packer-ng-plugin" target="_blank" rel="noopener">https://github.com/mcxiaoke/packer-ng-plugin</a></p>
<h1 id="walle-打包工具使用-（推荐使用）"><a href="#walle-打包工具使用-（推荐使用）" class="headerlink" title="walle 打包工具使用 （推荐使用）"></a>walle 打包工具使用 （推荐使用）</h1><p>项目地址：<a href="https://github.com/Meituan-Dianping/walle" target="_blank" rel="noopener">https://github.com/Meituan-Dianping/walle</a></p>
<h2 id="集成方法"><a href="#集成方法" class="headerlink" title="集成方法"></a>集成方法</h2><p>project 的 <code>build.gradle</code> 添加:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    classpath &apos;com.meituan.android.walle:plugin:1.0.3&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>app/build.gradle</code> 添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'walle'</span></span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">    compile <span class="string">'com.meituan.android.walle:library:1.0.3'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在工程目录下创建 <code>channel</code> 文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">meituan # 美团</span><br><span class="line">samsungapps #三星</span><br><span class="line">hiapk</span><br><span class="line">anzhi</span><br><span class="line">xiaomi # 小米</span><br><span class="line">91com</span><br><span class="line">gfan</span><br><span class="line">appchina</span><br><span class="line">nduoa</span><br><span class="line">3gcn</span><br><span class="line">mumayi</span><br><span class="line">10086com</span><br><span class="line">wostore</span><br><span class="line">189store</span><br><span class="line">lenovomm</span><br><span class="line">hicloud</span><br><span class="line">meizu</span><br><span class="line">wandou</span><br><span class="line"># Google Play</span><br><span class="line"># googleplay</span><br><span class="line"># 百度</span><br><span class="line">baidu</span><br><span class="line">#</span><br><span class="line"># 360</span><br><span class="line">360cn</span><br><span class="line">#</span><br><span class="line"># 应用宝</span><br><span class="line">myapp</span><br></pre></td></tr></table></figure>
<p>动态设置 UMeng 渠道（见下文 <em>umeng 渠道动态设置</em>）</p>
<p>打包：在工程根目录下执行（或者使用 Android Studio 的 Terminal，其默认路径就是工程根目录）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew clean assembleRelease -PchannelFile=channel</span><br></pre></td></tr></table></figure>
<h2 id="umeng-渠道动态设置"><a href="#umeng-渠道动态设置" class="headerlink" title="umeng 渠道动态设置"></a>umeng 渠道动态设置</h2><p>在 Application 中添加下面的代码动态设置渠道</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String channel = WalleChannelReader.getChannel(<span class="keyword">this</span>.getApplicationContext());</span><br><span class="line">String umengAppkey = <span class="string">"58996177cae7e76cc3001737"</span>;</span><br><span class="line">MobclickAgent.UMAnalyticsConfig umAnalyticsConfig = <span class="keyword">new</span> MobclickAgent.UMAnalyticsConfig(<span class="keyword">this</span>,</span><br><span class="line">        umengAppkey,</span><br><span class="line">        channel,</span><br><span class="line">        MobclickAgent.EScenarioType.E_UM_NORMAL,</span><br><span class="line">        <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>友盟渠道：每个设备只记录初始的安装渠道，新的渠道请用之前没有安装过别的渠道包的设备进行测试。</li>
<li>如果使用代码的形式设置 Appkey 和 channel ，需要删除 AndroidManifest.xml 中的 Appkey,channel</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/43/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><span class="page-number current">44</span><a class="page-number" href="/page/45/">45</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/45/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
