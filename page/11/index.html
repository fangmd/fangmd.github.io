<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta property="og:type" content="website">
<meta property="og:title" content="Double">
<meta property="og:url" content="http://yoursite.com/page/11/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Double">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/11/">





  <title>Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/04/java/spring/03.Springboot-配置类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/04/java/spring/03.Springboot-配置类/" itemprop="url">Springboot 配置类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-04T21:18:12+08:00">
                2018-09-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java后台/" itemprop="url" rel="index">
                    <span itemprop="name">Java后台</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">package com.passon.demo.conf;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.serializer.SerializerFeature;</span><br><span class="line">import com.alibaba.fastjson.support.config.FastJsonConfig;</span><br><span class="line">import com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter;</span><br><span class="line">import com.passon.demo.core.Result;</span><br><span class="line">import com.passon.demo.core.ResultCode;</span><br><span class="line">import com.passon.demo.core.ServiceException;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.http.converter.HttpMessageConverter;</span><br><span class="line">import org.springframework.web.method.HandlerMethod;</span><br><span class="line">import org.springframework.web.servlet.HandlerExceptionResolver;</span><br><span class="line">import org.springframework.web.servlet.ModelAndView;</span><br><span class="line">import org.springframework.web.servlet.NoHandlerFoundException;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.nio.charset.Charset;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">@Slf4j</span><br><span class="line">public class MyWebMvcConfigurer implements WebMvcConfigurer &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;spring.profiles.active&#125;&quot;)</span><br><span class="line">    private String env;//当前激活的配置文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //使用阿里 FastJson 作为JSON MessageConverter</span><br><span class="line">    @Override</span><br><span class="line">    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;</span><br><span class="line">        FastJsonHttpMessageConverter converter = new FastJsonHttpMessageConverter();</span><br><span class="line">        FastJsonConfig config = new FastJsonConfig();</span><br><span class="line">        config.setSerializerFeatures(SerializerFeature.WriteMapNullValue);//保留空的字段</span><br><span class="line">        //SerializerFeature.WriteNullStringAsEmpty,//String null -&gt; &quot;&quot;</span><br><span class="line">        //SerializerFeature.WriteNullNumberAsZero//Number null -&gt; 0</span><br><span class="line">        // 按需配置，更多参考FastJson文档哈</span><br><span class="line"></span><br><span class="line">        converter.setFastJsonConfig(config);</span><br><span class="line">        converter.setDefaultCharset(Charset.forName(&quot;UTF-8&quot;));</span><br><span class="line">        converters.add(converter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 异常处理</span><br><span class="line">     *</span><br><span class="line">     * @param resolvers 异常处理集合</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;</span><br><span class="line">        resolvers.add(new HandlerExceptionResolver() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object handler, Exception e) &#123;</span><br><span class="line">                Result result = new Result();</span><br><span class="line">                if (e instanceof ServiceException) &#123;//业务失败的异常，如“账号或密码错误”</span><br><span class="line">                    result.setCode(ResultCode.FAIL).setMessage(e.getMessage());</span><br><span class="line">                    log.info(e.getMessage());</span><br><span class="line">                &#125; else if (e instanceof NoHandlerFoundException) &#123;</span><br><span class="line">                    result.setCode(ResultCode.NOT_FOUND).setMessage(&quot;接口 [&quot; + httpServletRequest.getRequestURI() + &quot;] 不存在&quot;);</span><br><span class="line">                &#125; else if (e instanceof ServletException) &#123;</span><br><span class="line">                    result.setCode(ResultCode.FAIL).setMessage(e.getMessage());</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    result.setCode(ResultCode.INTERNAL_SERVER_ERROR).setMessage(&quot;接口 [&quot; + httpServletRequest.getRequestURI() + &quot;] 内部错误，请联系管理员&quot;);</span><br><span class="line">                    String message;</span><br><span class="line">                    if (handler instanceof HandlerMethod) &#123;</span><br><span class="line">                        HandlerMethod handlerMethod = (HandlerMethod) handler;</span><br><span class="line">                        message = String.format(&quot;接口 [%s] 出现异常，方法：%s.%s，异常摘要：%s&quot;,</span><br><span class="line">                                httpServletRequest.getRequestURI(),</span><br><span class="line">                                handlerMethod.getBean().getClass().getName(),</span><br><span class="line">                                handlerMethod.getMethod().getName(),</span><br><span class="line">                                e.getMessage());</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        message = e.getMessage();</span><br><span class="line">                    &#125;</span><br><span class="line">                    log.error(message, e);</span><br><span class="line">                &#125;</span><br><span class="line">                responseResult(httpServletResponse, result);</span><br><span class="line">                return new ModelAndView();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void responseResult(HttpServletResponse response, Result result) &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setHeader(&quot;Content-type&quot;, &quot;application/json;charset=UTF-8&quot;);</span><br><span class="line">        response.setStatus(200);</span><br><span class="line">        try &#123;</span><br><span class="line">            response.getWriter().write(JSON.toJSONString(result));</span><br><span class="line">        &#125; catch (IOException ex) &#123;</span><br><span class="line">            log.error(ex.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //解决跨域问题</span><br><span class="line">    @Override</span><br><span class="line">    public void addCorsMappings(CorsRegistry registry) &#123;</span><br><span class="line">        //registry.addMapping(&quot;/**&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/java/spring/02. MyBatis使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/03/java/spring/02. MyBatis使用/" itemprop="url">MyBatis 使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-03T21:18:12+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java后台/" itemprop="url" rel="index">
                    <span itemprop="name">Java后台</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="工程集成例子"><a href="#工程集成例子" class="headerlink" title="工程集成例子"></a>工程集成例子</h1><h2 id="创建-Sprint-boot-web-工程"><a href="#创建-Sprint-boot-web-工程" class="headerlink" title="创建 Sprint-boot web 工程"></a>创建 Sprint-boot web 工程</h2><p>使用 intelliJ IDEA 创建工程</p>
<p>依赖情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.passon&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;demo&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">    &lt;name&gt;mybatis-demo&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;mybatis-demo&lt;/description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">            &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<h2 id="连接-mysql-配置"><a href="#连接-mysql-配置" class="headerlink" title="连接 mysql 配置"></a>连接 mysql 配置</h2><p><code>application.properties</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/db_example</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=xxxxxxx你的密码</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</span><br><span class="line">spring.jpa.database-platfor4m=org.hibernate.dialect.MySQL5InnoDBDialect</span><br></pre></td></tr></table></figure>
<h2 id="文件夹目录情况"><a href="#文件夹目录情况" class="headerlink" title="文件夹目录情况"></a>文件夹目录情况</h2><p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/mybatis-01.png" alt="mybatis-01"></p>
<p><code>UserDao</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDao &#123;</span><br><span class="line"></span><br><span class="line">    @Select(&quot;SELECT * FROM t_user WHERE id = #&#123;userId&#125;&quot;)</span><br><span class="line">    UserDomain getUser(@Param(&quot;name&quot;) String name);</span><br><span class="line"></span><br><span class="line">    @Insert(&quot;INSERT INTO t_user(name, age) VALUES(#&#123;name&#125;, #&#123;age&#125;)&quot;)</span><br><span class="line">    int insert(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) int age);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UserDomain</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class UserDomain &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;UserDomain&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &quot;, age=&quot; + age +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UserService</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface UserService &#123;</span><br><span class="line"></span><br><span class="line">    int addUser(UserDomain user);</span><br><span class="line"></span><br><span class="line">    UserDomain getUser(String name);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UserServiceImpl</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Service(value = &quot;userService&quot;)</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserDao userMapper;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int addUser(UserDomain user) &#123;</span><br><span class="line">        return userMapper.insert(user.getName(), user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UserDomain getUser(String name) &#123;</span><br><span class="line">        UserDomain user = userMapper.getUser(name);</span><br><span class="line">        return user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>MybatisDemoApplication</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(&quot;com.passon.demo.dao&quot;)</span><br><span class="line">public class MybatisDemoApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(MybatisDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>@MapperScan(“com.passon.demo.dao”) 关键点 指定 dao 层的路径</p>
</blockquote>
<h1 id="常用插件使用"><a href="#常用插件使用" class="headerlink" title="常用插件使用"></a>常用插件使用</h1><h2 id="PageHelper"><a href="#PageHelper" class="headerlink" title="PageHelper"></a>PageHelper</h2><p><a href="https://pagehelper.github.io/" target="_blank" rel="noopener">https://pagehelper.github.io/</a></p>
<p>与 Spring boot:<a href="https://github.com/pagehelper/pagehelper-spring-boot" target="_blank" rel="noopener">https://github.com/pagehelper/pagehelper-spring-boot</a></p>
<h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><code>UserController</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(value = &quot;/users&quot;)</span><br><span class="line">public List&lt;UserDomain&gt; lists(@RequestParam(defaultValue = &quot;1&quot;) int pageNo, @RequestParam(defaultValue = &quot;10&quot;) int pageSize) &#123;</span><br><span class="line">    PageHelper.startPage(pageNo, pageSize);</span><br><span class="line">    return userService.getUsers();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>PageHelper.startPage(pageNo, pageSize);</code> 将会影响下一次查询操作</p>
</blockquote>
<p><code>UserDao</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Select(&quot;SELECT * FROM t_user&quot;)</span><br><span class="line">List&lt;UserDomain&gt; getUsers();</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/java/spring/00.Spring-boot工程创建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/03/java/spring/00.Spring-boot工程创建/" itemprop="url">Spring boot 工程创建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-03T21:18:12+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java后台/" itemprop="url" rel="index">
                    <span itemprop="name">Java后台</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png" alt="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png"></p>
<p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-01.png" alt="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png"></p>
<p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-02.png" alt="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png"></p>
<p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-03.png" alt="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png"></p>
<p><img src="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-04.png" alt="https://raw.githubusercontent.com/fangmd/markdownphoto/master/src/spring/spring-boot-00.png"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/java/spring/01.日志-spring-boot-starter-logging/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/03/java/spring/01.日志-spring-boot-starter-logging/" itemprop="url">日志配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-03T21:18:12+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java后台/" itemprop="url" rel="index">
                    <span itemprop="name">Java后台</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="修改日志级别"><a href="#修改日志级别" class="headerlink" title="修改日志级别"></a>修改日志级别</h1><p><code>application.properties</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#logging.level.root=WARN</span><br><span class="line">#logging.level.com.baeldung=TRACE</span><br></pre></td></tr></table></figure>
<h1 id="自定义-logback-设置"><a href="#自定义-logback-设置" class="headerlink" title="自定义 logback 设置"></a>自定义 logback 设置</h1><p>创建 <code>logback-spring.xml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name=&quot;LOGS&quot; value=&quot;./logs&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;appender name=&quot;Console&quot;</span><br><span class="line">        class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</span><br><span class="line">        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;</span><br><span class="line">            &lt;Pattern&gt;</span><br><span class="line">                %black(%d&#123;ISO8601&#125;) %highlight(%-5level) [%blue(%t)] %yellow(%C&#123;1.&#125;): %msg%n%throwable</span><br><span class="line">            &lt;/Pattern&gt;</span><br><span class="line">        &lt;/layout&gt;</span><br><span class="line">    &lt;/appender&gt;</span><br><span class="line"></span><br><span class="line">    &lt;appender name=&quot;RollingFile&quot;</span><br><span class="line">        class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span><br><span class="line">        &lt;file&gt;$&#123;LOGS&#125;/spring-boot-logger.log&lt;/file&gt;</span><br><span class="line">        &lt;encoder</span><br><span class="line">            class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;</span><br><span class="line">            &lt;Pattern&gt;%d %p %C&#123;1.&#125; [%t] %m%n&lt;/Pattern&gt;</span><br><span class="line">        &lt;/encoder&gt;</span><br><span class="line"></span><br><span class="line">        &lt;rollingPolicy</span><br><span class="line">            class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span><br><span class="line">            &lt;!-- rollover daily and when the file reaches 10 MegaBytes --&gt;</span><br><span class="line">            &lt;fileNamePattern&gt;$&#123;LOGS&#125;/archived/spring-boot-logger-%d&#123;yyyy-MM-dd&#125;.%i.log</span><br><span class="line">            &lt;/fileNamePattern&gt;</span><br><span class="line">            &lt;timeBasedFileNamingAndTriggeringPolicy</span><br><span class="line">                class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;</span><br><span class="line">                &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;</span><br><span class="line">            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span><br><span class="line">        &lt;/rollingPolicy&gt;</span><br><span class="line">    &lt;/appender&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- LOG everything at INFO level --&gt;</span><br><span class="line">    &lt;root level=&quot;info&quot;&gt;</span><br><span class="line">        &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;</span><br><span class="line">        &lt;appender-ref ref=&quot;Console&quot; /&gt;</span><br><span class="line">    &lt;/root&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- LOG &quot;com.baeldung*&quot; at TRACE level --&gt;</span><br><span class="line">    &lt;logger name=&quot;com.baeldung&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;</span><br><span class="line">        &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;</span><br><span class="line">        &lt;appender-ref ref=&quot;Console&quot; /&gt;</span><br><span class="line">    &lt;/logger&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h1 id="使用-lombok-简化代码"><a href="#使用-lombok-简化代码" class="headerlink" title="使用 lombok 简化代码"></a>使用 lombok 简化代码</h1><p>安装插件: <code>lombok Plugin</code></p>
<p>添加依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/hello&quot;)</span><br><span class="line">@RestController</span><br><span class="line">@Slf4j</span><br><span class="line">public class HelloController &#123;</span><br><span class="line">    @RequestMapping(method = RequestMethod.GET)</span><br><span class="line">    public String index() &#123;</span><br><span class="line">        log.warn(&quot;warn ----&quot;);</span><br><span class="line">        log.error(&quot;error ----&quot;);</span><br><span class="line">        log.debug(&quot;debug ----&quot;);</span><br><span class="line">        return &quot;Hello, World!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/java/spring/Springboot-Restful-项目搭建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/03/java/spring/Springboot-Restful-项目搭建/" itemprop="url">Spring boot 工程创建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-03T21:18:12+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java后台/" itemprop="url" rel="index">
                    <span itemprop="name">Java后台</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>统一的响应结果封装、统一的异常处理、接口签名认证、基础的增删改差方法封装、基础代码生成工具等等</p>
<p>参考：</p>
<ul>
<li><a href="https://www.jianshu.com/p/99fcead32d35" target="_blank" rel="noopener">https://www.jianshu.com/p/99fcead32d35</a></li>
<li><a href="https://github.com/lihengming/spring-boot-api-project-seed" target="_blank" rel="noopener">https://github.com/lihengming/spring-boot-api-project-seed</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/database/mysql/MYSQL学习记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/03/database/mysql/MYSQL学习记录/" itemprop="url">MySQL学习记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-03T13:18:12+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Database/" itemprop="url" rel="index">
                    <span itemprop="name">Database</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Install-in-mac"><a href="#Install-in-mac" class="headerlink" title="Install in mac"></a>Install in mac</h1><p>clean old: <a href="https://gist.github.com/vitorbritto/0555879fe4414d18569d" target="_blank" rel="noopener">https://gist.github.com/vitorbritto/0555879fe4414d18569d</a></p>
<p>install:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure>
<p>启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// have launchd start mysql now and restart at login</span><br><span class="line">brew services start mysql</span><br><span class="line">brew services restart mysql</span><br><span class="line"></span><br><span class="line">// if you don&apos;t want/need a background service you can just run</span><br><span class="line">mysql.server start</span><br></pre></td></tr></table></figure>
<p>关闭 mysql:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root -p shutdown</span><br></pre></td></tr></table></figure>
<p>mysql 数据文件夹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/var/mysql</span><br></pre></td></tr></table></figure>
<h1 id="初始化操作-设置-root-password"><a href="#初始化操作-设置-root-password" class="headerlink" title="初始化操作 设置 root password"></a>初始化操作 设置 root password</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root password &apos;xxxxxx&apos;</span><br></pre></td></tr></table></figure>
<h1 id="mysql-配置"><a href="#mysql-配置" class="headerlink" title="mysql 配置"></a>mysql 配置</h1><p>默认配置位置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/my.cnf</span><br></pre></td></tr></table></figure>
<h1 id="mysql-连接方式"><a href="#mysql-连接方式" class="headerlink" title="mysql 连接方式"></a>mysql 连接方式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jdbc:MySQL://[host:port],[host:port].../[database][?参数名1][=参数值1][&amp;参数名2][=参数值2]...</span><br><span class="line"></span><br><span class="line">ex:</span><br><span class="line"></span><br><span class="line">jdbc:MySQL://localhost:3306/test?user=root&amp;password=&amp;useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;failOverReadOnly=false</span><br></pre></td></tr></table></figure>
<h1 id="mysql-终端连接"><a href="#mysql-终端连接" class="headerlink" title="mysql 终端连接"></a>mysql 终端连接</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<h1 id="mysql-用户操作"><a href="#mysql-用户操作" class="headerlink" title="mysql 用户操作"></a>mysql 用户操作</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 创建用户</span><br></pre></td></tr></table></figure>
<h1 id="mysql-数据库-操作"><a href="#mysql-数据库-操作" class="headerlink" title="mysql 数据库 操作"></a>mysql 数据库 操作</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 连接 mysql</span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line">其他内容见：sql.md</span><br></pre></td></tr></table></figure>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h2 id="navicat-连接-mysql-失败"><a href="#navicat-连接-mysql-失败" class="headerlink" title="navicat 连接 mysql 失败"></a>navicat 连接 mysql 失败</h2><p>原因 root 密码使用 <code>caching_sha2_password</code> 加密方式。</p>
<p>修改 root 密码加密方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;你的密码&apos;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/01/flutter/官方文档/04.Animations in Flutter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/01/flutter/官方文档/04.Animations in Flutter/" itemprop="url">Animations in Flutter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-01T13:18:12+08:00">
                2018-09-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index">
                    <span itemprop="name">Flutter</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://flutter.io/tutorials/animation/" target="_blank" rel="noopener">https://flutter.io/tutorials/animation/</a></p>
<h1 id="一个自动执行动画组件"><a href="#一个自动执行动画组件" class="headerlink" title="一个自动执行动画组件"></a>一个自动执行动画组件</h1><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 和 FadeAnimation 相同作用，不依赖第三方库版本</span></span><br><span class="line"><span class="comment">/// 进入界面的时候自执行动画(500ms)</span></span><br><span class="line"><span class="comment">/// 透明度动画: 0 -&gt; 1</span></span><br><span class="line"><span class="comment">/// 移动动画: -控件高度 -&gt; 0</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// 作用: 进入页面的时候自动执行的动画</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// 使用:</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// ```dart</span></span><br><span class="line"><span class="comment">/// FadeAnimationNoThird(</span></span><br><span class="line"><span class="comment">///   delay: 1.2,</span></span><br><span class="line"><span class="comment">///   child: Text('Demo'),</span></span><br><span class="line"><span class="comment">/// )</span></span><br><span class="line"><span class="comment">///</span></span><br></pre></td></tr></table></figure>
<p>///<br>class FadeAnimationNoThird extends StatefulWidget {<br>  final double delay;<br>  final Widget child;</p>
<p>  FadeAnimationNoThird({<br>    Key key,<br>    this.delay = 1,<br>    this.child,<br>  }) : super(key: key);</p>
<p>  @override<br>  _FadeAnimationNoThirdState createState() =&gt; _FadeAnimationNoThirdState();<br>}</p>
<p>class _FadeAnimationNoThirdState extends State<fadeanimationnothird><br>    with SingleTickerProviderStateMixin {<br>  AnimationController _controller;<br>  Animation opacityAnimation;<br>  Animation<offset> translateYAnimation;<br>  Duration delay = Duration.zero;<br>  bool _waitForDelay = true;<br>  bool _isDisposed = false;</offset></fadeanimationnothird></p>
<p>  @override<br>  void initState() {<br>    _controller =<br>        AnimationController(vsync: this, duration: Duration(milliseconds: 500))<br>          ..addListener(() {<br>            setState(() {});<br>          });</p>
<pre><code>opacityAnimation = Tween(begin: 0.0, end: 1.0)
    .chain(CurveTween(curve: Curves.easeIn))
    .animate(_controller);

translateYAnimation = Tween&lt;Offset&gt;(begin: Offset(0, -1), end: Offset(0, 0))
    .chain(CurveTween(curve: Curves.easeInOut))
    .animate(_controller);

_controller.forward();

delay = Duration(milliseconds: (500 * widget.delay).round());

initialize();
super.initState();
</code></pre><p>  }</p>
<p>  void initialize() async {<br>    if (widget.delay != null) {<br>      await Future.delayed(delay);<br>    }<br>    _waitForDelay = false;<br>    executeInstruction();<br>  }</p>
<p>  void executeInstruction() async {<br>    if (_isDisposed || _waitForDelay) {<br>      return;<br>    }<br>    _controller.forward();<br>  }</p>
<p>  @override<br>  Widget build(BuildContext context) {<br>    /// 透明动画:<br>    /// Opacity: 无动画效果<br>    /// AnimatedOpacity<br>    /// FadeTransition</p>
<pre><code>return SlideTransition(
  position: translateYAnimation,
  child: FadeTransition(
    opacity: opacityAnimation,
    child: widget.child,
  ),
);
</code></pre><p>  }</p>
<p>  void dispose() {<br>    _isDisposed = true;<br>    _controller.dispose();<br>    super.dispose();<br>  }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 基本动画概念和类</span><br><span class="line"></span><br><span class="line">重点概念：</span><br><span class="line"></span><br><span class="line">1. 动画效果实际上是通过改变某个值实现的，Animation 实现值的改变</span><br><span class="line">2. Animation 对象知道当前动画的状态</span><br><span class="line">3. 使用 AnimationController 管理 Animation</span><br><span class="line">4. CurvedAnimation 实现非线形的动画</span><br><span class="line">5. Tween 实现两个数据值之间的动画，比如红到蓝</span><br><span class="line">6. 使用 Listeners 和 StatusListeners 监听动画状态的改变</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`Animation&lt;double&gt;`:</span><br><span class="line"></span><br><span class="line">1. 管理值的改变 `.value`</span><br><span class="line">2. 这个对象不知道界面的变化和呈现</span><br><span class="line"></span><br><span class="line">`CurvedAniamtion`:</span><br><span class="line"></span><br><span class="line">1. 继承自 `Animation&lt;double&gt;`</span><br><span class="line">2. 实现值非线形的变化</span><br><span class="line"></span><br><span class="line">`AnimationController`：</span><br><span class="line"></span><br><span class="line">1. 继承自 `Animation&lt;double&gt;`</span><br><span class="line">2. 附带控制动画的函数, `.forward()`, `.reverse()`</span><br><span class="line">3. value ranges from 0.0 to 1.0</span><br><span class="line"></span><br><span class="line">`Twenn`:</span><br></pre></td></tr></table></figure></p>
<p>final Tween doubleTween = Tween<double>(begin: -200.0, end: 0.0);</double></p>
<p>final Tween colorTween =<br>    ColorTween(begin: Colors.transparent, end: Colors.black54);</p>
<p>final AnimationController controller = AnimationController(<br>    duration: const Duration(milliseconds: 500), vsync: this);<br>Animation<int> alpha = IntTween(begin: 0, end: 255).animate(controller);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 继承自 `Animatable`</span><br><span class="line">2. 可以定义 value 的开始和结束</span><br><span class="line">3. `ColorTween` 处理颜色改变</span><br><span class="line">4. `animate()` 函数生成 `Animation&lt;double&gt;` 对象</span><br><span class="line"></span><br><span class="line"># 动画例子</span><br><span class="line"></span><br><span class="line">关键点：</span><br><span class="line"></span><br><span class="line">1. 通过 `addListener`, `setState` 将基础动画添加到 Widget 中</span><br><span class="line"></span><br><span class="line">## tween 例子</span><br></pre></td></tr></table></figure></int></p>
<p>with SingleTickerProviderStateMixin</p>
<p>  @override<br>  void initState() {<br>    controller =<br>        AnimationController(duration: const Duration(seconds: 1), vsync: this);<br>    tween = Tween(begin: 0.0, end: 100.0).animate(controller);<br>    tween.addListener((){<br>      setState(() {</p>
<pre><code>  });
});
super.initState();
</code></pre><p>  }</p>
<p>SizedBox(width: tween.value ?? 0.0, height: tween.value ?? 0.0, child: FlutterLogo()),</p>
<p>  @override<br>  void dispose() {<br>    controller.dispose();<br>    super.dispose();<br>  }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">语法简化：</span><br></pre></td></tr></table></figure></p>
<p>animation = tween.animate(controller)<br>          ..addListener(() {<br>            setState(() {<br>              // the animation object’s value is the changed state<br>            });<br>          });<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 使用 AnimatedWidget</span><br><span class="line"></span><br><span class="line">可以不用设置 `addListener`, `setState`.</span><br></pre></td></tr></table></figure></p>
<p>class AnimatedLogo extends AnimatedWidget {<br>  AnimatedLogo({Key key, Animation<double> animation})<br>      : super(key: key, listenable: animation);</double></p>
<p>  Widget build(BuildContext context) {<br>    final Animation<double> animation = listenable;<br>    return Center(<br>      child: Container(<br>        margin: EdgeInsets.symmetric(vertical: 10.0),<br>        height: animation.value,<br>        width: animation.value,<br>        child: FlutterLogo(),<br>      ),<br>    );<br>  }<br>}<br><code>`</code></double></p>
<blockquote>
<p>注意构造函数</p>
</blockquote>
<h2 id="addStatusListener"><a href="#addStatusListener" class="headerlink" title="addStatusListener"></a>addStatusListener</h2><h2 id="AnimatedBuilder"><a href="#AnimatedBuilder" class="headerlink" title="AnimatedBuilder"></a>AnimatedBuilder</h2><h1 id="列表动画"><a href="#列表动画" class="headerlink" title="列表动画"></a>列表动画</h1><p>使用 <code>AnimatedList</code> 创建 List</p>
<h1 id="动画控件"><a href="#动画控件" class="headerlink" title="动画控件"></a>动画控件</h1><ul>
<li>SizeTransition</li>
<li>RotationTransition</li>
<li>ScaleTransition</li>
<li>FadeTransition</li>
</ul>
<h1 id="页面跳转动画"><a href="#页面跳转动画" class="headerlink" title="页面跳转动画"></a>页面跳转动画</h1><p>Hero</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/31/ReadNote/自己动手设计数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/31/ReadNote/自己动手设计数据库/" itemprop="url">自己动手设计数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-31T13:18:12+08:00">
                2018-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第-1-章-关系数据库"><a href="#第-1-章-关系数据库" class="headerlink" title="第 1 章 关系数据库"></a>第 1 章 关系数据库</h1><h2 id="早期数据库模型"><a href="#早期数据库模型" class="headerlink" title="早期数据库模型"></a>早期数据库模型</h2><h3 id="层次数据库模型"><a href="#层次数据库模型" class="headerlink" title="层次数据库模型"></a>层次数据库模型</h3><p>类似公司组织架构。</p>
<p>父表可以与多个子表相连，子表子能有一个父表。</p>
<p>字表存储一个数据都必须与父表关联。</p>
<p>多对多情况下会产生冗余数据</p>
<h3 id="网状数据库模型"><a href="#网状数据库模型" class="headerlink" title="网状数据库模型"></a>网状数据库模型</h3><p>解决层次数据库出现的一些问题。</p>
<h2 id="关系数据库模型"><a href="#关系数据库模型" class="headerlink" title="关系数据库模型"></a>关系数据库模型</h2><p>关系模型将关系分为 一对一，一对多，多对多。</p>
<p>两个表之间的关系通过匹配一个共享字段的值来隐形建立。</p>
<h3 id="检索数据"><a href="#检索数据" class="headerlink" title="检索数据"></a>检索数据</h3><p>结构化查询语言 SQL</p>
<h3 id="关系型数据库的优势"><a href="#关系型数据库的优势" class="headerlink" title="关系型数据库的优势"></a>关系型数据库的优势</h3><ol>
<li>内置多层次完整性</li>
<li>数据在逻辑和物理上都独立与数据库</li>
<li>确保数据一致性和准确性</li>
<li>简便的数据检索</li>
</ol>
<h2 id="关系数据库管理系统"><a href="#关系数据库管理系统" class="headerlink" title="关系数据库管理系统"></a>关系数据库管理系统</h2><p>RDBMS， 一种应用程序，可以用来创建，维护，修改以及操作关系数据库。</p>
<h1 id="第-2-章-设计目标"><a href="#第-2-章-设计目标" class="headerlink" title="第 2 章 设计目标"></a>第 2 章 设计目标</h1><h2 id="为什么要关注数据库设计"><a href="#为什么要关注数据库设计" class="headerlink" title="为什么要关注数据库设计"></a>为什么要关注数据库设计</h2><p>数据库设计对于数据库中数据的一致性，完整性和准确性至关重要。</p>
<h2 id="优秀设计的目标"><a href="#优秀设计的目标" class="headerlink" title="优秀设计的目标"></a>优秀设计的目标</h2><ul>
<li>数据库应支持设定的和即时的信息检索</li>
<li>正确且高效的构建表</li>
<li>数据完整性落实到字段，表以及关系层次</li>
<li>数据库支持与组织相关的业务规则</li>
<li>数据库适应未来发展</li>
</ul>
<h2 id="优秀设计好处"><a href="#优秀设计好处" class="headerlink" title="优秀设计好处"></a>优秀设计好处</h2><ul>
<li>数据库结构易于修改和维护</li>
<li>数据易于修改</li>
<li>信息易于检索</li>
<li>终端用户应用易于开发和创建</li>
</ul>
<h2 id="数据库设计方法"><a href="#数据库设计方法" class="headerlink" title="数据库设计方法"></a>数据库设计方法</h2><h3 id="传统设计方法"><a href="#传统设计方法" class="headerlink" title="传统设计方法"></a>传统设计方法</h3><p>需求分析，数据建模，规范化</p>
<p>数据建模阶段，每个表都需要指定一个 主键，通过 外键 建立关系。</p>
<p>规范化：将大表分解成小表的过程，减少冗余数据和重复数据。</p>
<h2 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h2><p>传统规范化方法并不好用</p>
<h1 id="第-3-章-术语"><a href="#第-3-章-术语" class="headerlink" title="第 3 章 术语"></a>第 3 章 术语</h1><h2 id="术语为何重要"><a href="#术语为何重要" class="headerlink" title="术语为何重要"></a>术语为何重要</h2><ol>
<li>用于表达和定义关系数据库模型的特殊思想和概念</li>
<li>用于表达和定义数据库设计过程本身</li>
<li>用于讨论关系数据库或 RDBMS</li>
</ol>
<h2 id="关于值的术语"><a href="#关于值的术语" class="headerlink" title="关于值的术语"></a>关于值的术语</h2><p>数据：data，无意义</p>
<p>信息：由 数据 组成，有意义</p>
<p>存储的是数据，检索的是信息。</p>
<p>空值（null）：缺失值，未知值</p>
<h2 id="关于结构的术语"><a href="#关于结构的术语" class="headerlink" title="关于结构的术语"></a>关于结构的术语</h2><p><strong>表</strong></p>
<ul>
<li>每个表包含至少一个称为主键的字段</li>
</ul>
<p>数据表： 存储数据的表称为</p>
<p>验证表（查找表）：存储专门用于实现数据完整性的数据，属于静态表。</p>
<p><strong>字段（属性）</strong></p>
<ul>
<li>数据库中最小结构</li>
</ul>
<ol>
<li>复合字段：包含两个或以上不同项</li>
<li>多值字段：包含多个相同类型的值</li>
<li>计算字段</li>
</ol>
<p><strong>记录（元组）</strong></p>
<p><strong>视图</strong>：一个虚表，由数据库中一个或多个表的字段组成，组成视图的表称为基表。</p>
<p>为什么称为虚表：因为视图只是从基表中获取数据，而不存储数据。</p>
<p>视图的重要：</p>
<ol>
<li>可用于同时处理多个表中的数据。</li>
<li>可用以防止某些用户查看或操作单个表或一组表中特定字段。</li>
<li>可用于实现数据完整性。</li>
</ol>
<p><strong>键</strong></p>
<p>主键是整个表中最为重要的键：</p>
<ul>
<li>主键值在整个数据库中表识某一特定记录</li>
<li>主键字段在整个数据库中表识给定的某个表</li>
<li>主键实现表层次的完整性，与数据库中其他表建立关系。</li>
</ul>
<p>将一个表中的主键作为另一个表的外键，实现两个表的连接。</p>
<h2 id="关于关系的术语"><a href="#关于关系的术语" class="headerlink" title="关于关系的术语"></a>关于关系的术语</h2><p><strong>关系</strong></p>
<p>表和表之间联系产生的方式：使用主键和外键，借助第三个表（联系表，关联表）。</p>
<p><strong>关系类型</strong></p>
<ul>
<li>一对一关系</li>
<li>一对多关系</li>
<li>多对多关系：需要联系表实现关联</li>
</ul>
<p><strong>参与的类型</strong></p>
<p>一个表插入数据时，另一个表是否必须更新。</p>
<ul>
<li>强制的</li>
<li>可选的</li>
</ul>
<p><strong>参与度</strong></p>
<p>作用：</p>
<ol>
<li>确定某一特定表中必须与关联表中的单一记录相关联的最好记录条数</li>
<li>确定某一特定表中被允许与关联表中单一记录相关联的最多纪录条数</li>
</ol>
<h2 id="关于完整性的术语"><a href="#关于完整性的术语" class="headerlink" title="关于完整性的术语"></a>关于完整性的术语</h2><p><strong>字段说明</strong></p>
<ul>
<li>一般元素：字段名称，描述，父表</li>
<li>物理元素</li>
<li>逻辑元素</li>
</ul>
<p><strong>数据完整性</strong></p>
<p>数据库中数据的有效性，一致性和准确性。</p>
<ol>
<li>表层次完整性：确保表中无重复数据，记录标识唯一不为空值</li>
<li>字段级完整性：每个字段的结构健全，每个字段的值有效</li>
<li>关系层次完整性：表之间的关系健全。</li>
<li>业务规则</li>
</ol>
<h1 id="第-4-章-概念性概述"><a href="#第-4-章-概念性概述" class="headerlink" title="第 4 章 概念性概述"></a>第 4 章 概念性概述</h1><h2 id="完成设计过程的重要性"><a href="#完成设计过程的重要性" class="headerlink" title="完成设计过程的重要性"></a>完成设计过程的重要性</h2><p>数据库中结构完整性和数据完整性的水平与贯彻设计过程的程度成正比。</p>
<h2 id="明确宗旨和任务目标"><a href="#明确宗旨和任务目标" class="headerlink" title="明确宗旨和任务目标"></a>明确宗旨和任务目标</h2><h2 id="分析现有数据库"><a href="#分析现有数据库" class="headerlink" title="分析现有数据库"></a>分析现有数据库</h2><h2 id="创建数据结构"><a href="#创建数据结构" class="headerlink" title="创建数据结构"></a>创建数据结构</h2><p>定义表和字段，建立键，以及为每个字段定义字段说明。</p>
<h2 id="确定和建立表关系"><a href="#确定和建立表关系" class="headerlink" title="确定和建立表关系"></a>确定和建立表关系</h2><h2 id="确定和定义业务规则"><a href="#确定和定义业务规则" class="headerlink" title="确定和定义业务规则"></a>确定和定义业务规则</h2><p>确定数据库各方面的限制，建立业务规则，以及定义和实现验证表。</p>
<h2 id="确定和定义视图"><a href="#确定和定义视图" class="headerlink" title="确定和定义视图"></a>确定和定义视图</h2><p>了解用户如何使用各自的数据，确定数据库中红需要建立的视图类型。</p>
<h2 id="审核数据完整性"><a href="#审核数据完整性" class="headerlink" title="审核数据完整性"></a>审核数据完整性</h2><ol>
<li>审核每个表，确保其符合正确设计的标准</li>
<li>审核和检查每个字段的字段说明</li>
<li>检查每种关系的有效性，确认关系类型，以及确定关系中每个表的参与特征。</li>
<li>审核之前确定的业务规则并确认数据库各方面的限制</li>
</ol>
<h1 id="第-5-章-大幕开启"><a href="#第-5-章-大幕开启" class="headerlink" title="第 5 章 大幕开启"></a>第 5 章 大幕开启</h1><h1 id="第-6-章-分析现有数据库"><a href="#第-6-章-分析现有数据库" class="headerlink" title="第 6 章 分析现有数据库"></a>第 6 章 分析现有数据库</h1><h1 id="第-7-章-建立表结构"><a href="#第-7-章-建立表结构" class="headerlink" title="第 7 章 建立表结构"></a>第 7 章 建立表结构</h1><h1 id="第-8-章-键"><a href="#第-8-章-键" class="headerlink" title="第 8 章 键"></a>第 8 章 键</h1><p>键类型：</p>
<ol>
<li>候选键</li>
<li>主键</li>
<li>外键</li>
<li>非键</li>
</ol>
<h1 id="第-9-章-字段说明"><a href="#第-9-章-字段说明" class="headerlink" title="第 9 章 字段说明"></a>第 9 章 字段说明</h1><p>字段说明重要的原因：</p>
<ol>
<li>字段说明有助于建立和执行字段级完整性</li>
<li>未每个字段定义字段说明能提升整体数据完整性</li>
<li>定义字段说明能获得对数据的性质和用途的完整认识</li>
<li>字段说明构成数据库的“数据字典”</li>
</ol>
<h1 id="第-10-章-表关系"><a href="#第-10-章-表关系" class="headerlink" title="第 10 章 表关系"></a>第 10 章 表关系</h1><p>关系是关系数据库的重要组成部分：</p>
<ol>
<li>对于存在逻辑联系的两个表，可在两表之间建立连接</li>
<li>有助于进一步改进表结构和将冗余数据减少至最少</li>
<li>这种机制能实现同时多个表中提取数据</li>
</ol>
<p>自联结关系：表内部记录之间的关系</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/20/Android/架构/官方架构组件/Android Architecture Components关键点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/20/Android/架构/官方架构组件/Android Architecture Components关键点/" itemprop="url">Android Architecture Components 关键点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-20T12:18:12+08:00">
                2018-08-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h1><p>用于管理数据,它持有 LiveData. 处理数据持久化,存取等具体逻辑, 相当于 MVP 中的 Presenter.</p>
<h2 id="LiveData-实现数据驱动型编程"><a href="#LiveData-实现数据驱动型编程" class="headerlink" title="LiveData 实现数据驱动型编程"></a>LiveData 实现数据驱动型编程</h2><p>自需要对 View 注册 LiveData.</p>
<p>LiveData 数据变更后，会自动更新 View.</p>
<h2 id="ViewModel-具有数据共享的作用"><a href="#ViewModel-具有数据共享的作用" class="headerlink" title="ViewModel 具有数据共享的作用"></a>ViewModel 具有数据共享的作用</h2><p>同一个 Activity/Fragment 对应同一个 ViewModel</p>
<p>ViewModel 的存在是依赖 Activity 或者 Fragment的，不管你在什么地方获取ViewModel ，只要你用的是相同的Activity 或者 Fragment，那么获取到的ViewModel将是同一个 (前提是key值是一样的)，所以ViewModel 也具有数据共享的作用！</p>
<p>参考：</p>
<ul>
<li><a href="https://www.jianshu.com/p/e8955f525f4c" target="_blank" rel="noopener">https://www.jianshu.com/p/e8955f525f4c</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/20/看源码/JSBridge原理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/20/看源码/JSBridge原理/" itemprop="url">JSBridge 原理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-20T09:38:14+08:00">
                2018-08-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>项目地址：<a href="https://github.com/lzyzsd/JsBridge" target="_blank" rel="noopener">https://github.com/lzyzsd/JsBridge</a></p>
<p>项目作用: Android 与 js 交互方案。</p>
<h1 id="与-原生-JS-交互方式比有什么优点"><a href="#与-原生-JS-交互方式比有什么优点" class="headerlink" title="与 原生 JS 交互方式比有什么优点"></a>与 原生 JS 交互方式比有什么优点</h1><h1 id="目录结构和类介绍"><a href="#目录结构和类介绍" class="headerlink" title="目录结构和类介绍"></a>目录结构和类介绍</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- BridgeHandler</span><br><span class="line">- BridgeUtil</span><br><span class="line">- BridgeWebView</span><br><span class="line">- BridgeWebViewClient</span><br><span class="line">- CallBackFunction</span><br><span class="line">- DefaultHandle</span><br><span class="line">- Message</span><br><span class="line">- WebViewJavascriptBridge</span><br></pre></td></tr></table></figure>
<h2 id="WebViewJavascriptBridge"><a href="#WebViewJavascriptBridge" class="headerlink" title="WebViewJavascriptBridge"></a>WebViewJavascriptBridge</h2><p>是一个接口，<code>BridgeWebView</code> 实现了 WebViewJavascriptBridge</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WebViewJavascriptBridge</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String data)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String data, CallBackFunction responseCallback)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个地方的代码感觉作者没有写好, BridgeWebView 中实际起作用的方法是 doSend</p>
</blockquote>
<h2 id="DefaultHandler-BridgeHandler"><a href="#DefaultHandler-BridgeHandler" class="headerlink" title="DefaultHandler, BridgeHandler"></a>DefaultHandler, BridgeHandler</h2><p>JS 调用原生方法的时候，Handler 接收来自 JS 传递的参数</p>
<p>DefaultHandler： 在没有设置 Handler 的时候会触发。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BridgeHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">handler</span><span class="params">(String data, CallBackFunction function)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CallBackFunction"><a href="#CallBackFunction" class="headerlink" title="CallBackFunction"></a>CallBackFunction</h2><p>回调函数。</p>
<p>使用场景：在 app 方法被调起之后，app 可以通过这个方法 给JS传数据处理结果</p>
<blockquote>
<p>在 BridgeHandler 中使用</p>
</blockquote>
<h2 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h2><p>JS 与 Native 交互的信息封装类。</p>
<p>包含了：</p>
<ol>
<li>callbackId：CallBackFunction id，通过这个 id 找到 CallBackFunction 函数</li>
<li>data: Native 调用 JS 是传递的参数</li>
<li>handlerName：暂时没有实际作用</li>
<li>responseId: native call js 时，返回值通过 CallBackFunction 函数返回，通过 responseId 找到 CallBackFunction。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">成员变量：</span><br><span class="line">private String callbackId; //callbackId</span><br><span class="line">private String responseId; //responseId</span><br><span class="line">private String responseData; //responseData</span><br><span class="line">private String data; //data of message</span><br><span class="line">private String handlerName; //name of handler</span><br><span class="line"></span><br><span class="line">函数：</span><br><span class="line">getter/setter</span><br><span class="line">toJson</span><br><span class="line">toObject</span><br><span class="line">toArrayList</span><br></pre></td></tr></table></figure>
<p>toJson: 将 Message 中的成员变量转化成 JSON 形式，使用场景：与 <code>javascript:WebViewJavascriptBridge._handleMessageFromNative(&#39;%s&#39;);</code> 拼接通过 <code>webView.loadUrl</code> 调用。</p>
<p>toArrayList: 清理事件队列时使用，String -&gt; List<message>, 获取 JS 端所有的事件一个一个处理。</message></p>
<h2 id="BridgeWebViewClient"><a href="#BridgeWebViewClient" class="headerlink" title="BridgeWebViewClient"></a>BridgeWebViewClient</h2><blockquote>
<p>自定义WebViewClient必须要集成此类</p>
</blockquote>
<p><code>shouldOverrideUrlLoading</code>:</p>
<p>JS 与 Native 交互是通过 URL拦截 方式实现的。</p>
<p>在这里 JSBridge 会拦截属于自己需要处理的内容。</p>
<p><code>onPageFinished</code>: </p>
<p>向页面注入一段 JS 代码，内容在 <code>assets/WebViewJavascriptBridge.js</code> 中。</p>
<p>处理 <code>startupMessage</code> 中存储的事件。</p>
<h2 id="BridgeWebView"><a href="#BridgeWebView" class="headerlink" title="BridgeWebView"></a>BridgeWebView</h2><p>成员变量：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, CallBackFunction&gt; responseCallbacks = <span class="keyword">new</span> HashMap&lt;String, CallBackFunction&gt;();</span><br><span class="line">Map&lt;String, BridgeHandler&gt; messageHandlers = <span class="keyword">new</span> HashMap&lt;String, BridgeHandler&gt;();</span><br><span class="line">BridgeHandler defaultHandler = <span class="keyword">new</span> DefaultHandler();</span><br></pre></td></tr></table></figure>
<p>responseCallbacks： 存储 native call js 时，返回值 CallBackFunction 函数</p>
<p>messageHandlers: 存储所有 Handlers, BridgeHandler, </p>
<p>defaultHandler: 默认 Handler</p>
<h1 id="调用流程"><a href="#调用流程" class="headerlink" title="调用流程"></a>调用流程</h1><h2 id="JS-Call-Native"><a href="#JS-Call-Native" class="headerlink" title="JS Call Native"></a>JS Call Native</h2><p>Native 端要注册一个方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">webView.registerHandler(&quot;methodName&quot;, (data, function) -&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        JSONObject jsonObject = new JSONObject(data);</span><br><span class="line">        jsCallBack.call(jsonObject.optString(&quot;tel&quot;));</span><br><span class="line">    &#125; catch (JSONException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注册 Handler，参数2 BridgeHandler 存储在 <code>messageHandlers</code> 中, 参数1 表示调用唯一表示。</p>
<p>JS 调用 Native 注册的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NativePageController(&apos;callFunc&apos;, &#123;&apos;tel&apos; : &apos;18888888888&apos;&#125;);</span><br></pre></td></tr></table></figure>
<p>参数1 表示调用唯一表示，参数2 data 传递的数据。这些数据会转成 url 形式传递到native。</p>
<p>JS 调用 Native 注册的方法后，<code>shouldOverrideUrlLoading</code> 最先获取到 url 数据，解析 url，发现属于 js 调用方法就会开始处理。 <code>flushMessageQueue</code> 处理所有 JS 端出发的事件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">flushMessageQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Thread.currentThread() == Looper.getMainLooper().getThread()) &#123;</span><br><span class="line">        loadUrl(BridgeUtil.JS_FETCH_QUEUE_FROM_JAVA, <span class="keyword">new</span> CallBackFunction() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCallBack</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// deserializeMessage 反序列化消息</span></span><br><span class="line">                List&lt;Message&gt; list = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    list = Message.toArrayList(data);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (list == <span class="keyword">null</span> || list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">                    Message m = list.get(i);</span><br><span class="line">                    String responseId = m.getResponseId();</span><br><span class="line">                    <span class="comment">// 是否是response  CallBackFunction</span></span><br><span class="line">                    <span class="keyword">if</span> (!TextUtils.isEmpty(responseId)) &#123;</span><br><span class="line">                        CallBackFunction function = responseCallbacks.get(responseId);</span><br><span class="line">                        String responseData = m.getResponseData();</span><br><span class="line">                        function.onCallBack(responseData);</span><br><span class="line">                        responseCallbacks.remove(responseId);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        CallBackFunction responseFunction = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="comment">// if had callbackId 如果有回调Id</span></span><br><span class="line">                        <span class="keyword">final</span> String callbackId = m.getCallbackId();</span><br><span class="line">                        <span class="keyword">if</span> (!TextUtils.isEmpty(callbackId)) &#123;</span><br><span class="line">                            responseFunction = <span class="keyword">new</span> CallBackFunction() &#123;</span><br><span class="line">                                <span class="meta">@Override</span></span><br><span class="line">                                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCallBack</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">                                    Message responseMsg = <span class="keyword">new</span> Message();</span><br><span class="line">                                    responseMsg.setResponseId(callbackId);</span><br><span class="line">                                    responseMsg.setResponseData(data);</span><br><span class="line">                                    queueMessage(responseMsg);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            responseFunction = <span class="keyword">new</span> CallBackFunction() &#123;</span><br><span class="line">                                <span class="meta">@Override</span></span><br><span class="line">                                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCallBack</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">                                    <span class="comment">// do nothing</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// BridgeHandler执行</span></span><br><span class="line">                        BridgeHandler handler;</span><br><span class="line">                        <span class="keyword">if</span> (!TextUtils.isEmpty(m.getHandlerName())) &#123;</span><br><span class="line">                            handler = messageHandlers.get(m.getHandlerName());</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            handler = defaultHandler;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (handler != <span class="keyword">null</span>)&#123;</span><br><span class="line">                            handler.handler(m.getData(), responseFunction);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>data -&gt; List<message>, 生成事件集合</message></li>
<li>通过 函数表示 从 messageHandlers 中找到对应的 Handler，调用 Handler 开始处理数据</li>
</ol>
<blockquote>
<p>js 端多次调用 native 时事件会以 json 形式存储在 js 端，等待 app 去获取所有事件，依次处理</p>
</blockquote>
<p>Native 处理事件后，通过如何返回参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Message responseMsg = new Message();</span><br><span class="line">responseMsg.setResponseId(callbackId);</span><br><span class="line">responseMsg.setResponseData(data);</span><br><span class="line">queueMessage(responseMsg);</span><br></pre></td></tr></table></figure>
<h2 id="Native-Call-JS"><a href="#Native-Call-JS" class="headerlink" title="Native Call JS"></a>Native Call JS</h2><p>JS 端注册 Handler :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NativePageController.registerHandler(<span class="string">"Name"</span>, (data)&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Native 端掉用 JS:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">webView.callHandler(<span class="string">"Name"</span>, <span class="string">"&#123;data...&#125;"</span>, <span class="keyword">new</span> CallBackFunction() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCallBack</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">                </span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>调用 js 代码的时候：<code>doSend</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存message到消息队列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> handlerName handlerName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data data</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> responseCallback CallBackFunction</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doSend</span><span class="params">(String handlerName, String data, CallBackFunction responseCallback)</span> </span>&#123;</span><br><span class="line">    Message m = <span class="keyword">new</span> Message();</span><br><span class="line">    <span class="keyword">if</span> (!TextUtils.isEmpty(data)) &#123;</span><br><span class="line">        m.setData(data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (responseCallback != <span class="keyword">null</span>) &#123;</span><br><span class="line">        String callbackStr = String.format(BridgeUtil.CALLBACK_ID_FORMAT, ++uniqueId + (BridgeUtil.UNDERLINE_STR + SystemClock.currentThreadTimeMillis()));</span><br><span class="line">        responseCallbacks.put(callbackStr, responseCallback);</span><br><span class="line">        m.setCallbackId(callbackStr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!TextUtils.isEmpty(handlerName)) &#123;</span><br><span class="line">        m.setHandlerName(handlerName);</span><br><span class="line">    &#125;</span><br><span class="line">    queueMessage(m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>生成 Message 对象，</li>
<li>responseCallbacks 中存储接收返回数据的 responseCallback</li>
<li>开始处理, Message 生成 URL 调用。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分发message 必须在主线程才分发成功</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> m Message</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message m)</span> </span>&#123;</span><br><span class="line">    String messageJson = m.toJson();</span><br><span class="line">    <span class="comment">//escape special characters for json string  为json字符串转义特殊字符</span></span><br><span class="line">    messageJson = messageJson.replaceAll(<span class="string">"(\\\\)([^utrn])"</span>, <span class="string">"\\\\\\\\$1$2"</span>);</span><br><span class="line">    messageJson = messageJson.replaceAll(<span class="string">"(?&lt;=[^\\\\])(\")"</span>, <span class="string">"\\\\\""</span>);</span><br><span class="line">    String javascriptCommand = String.format(BridgeUtil.JS_HANDLE_MESSAGE_FROM_JAVA, messageJson);</span><br><span class="line">    <span class="comment">// 必须要找主线程才会将数据传递出去 --- 划重点</span></span><br><span class="line">    <span class="keyword">if</span> (Thread.currentThread() == Looper.getMainLooper().getThread()) &#123;</span><br><span class="line">        <span class="keyword">this</span>.loadUrl(javascriptCommand);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JS 端处理完成后，返回数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取到CallBackFunction data执行调用并且从数据集移除</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">handlerReturnData</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">    String functionName = BridgeUtil.getFunctionFromReturnUrl(url);</span><br><span class="line">    CallBackFunction f = responseCallbacks.get(functionName);</span><br><span class="line">    String data = BridgeUtil.getDataFromReturnUrl(url);</span><br><span class="line">    <span class="keyword">if</span> (f != <span class="keyword">null</span>) &#123;</span><br><span class="line">        f.onCallBack(data);</span><br><span class="line">        responseCallbacks.remove(functionName);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>从 URL 获取 函数标示</li>
<li>通过 标示从 <code>responseCallbacks</code> 中获取 CallBackFunction</li>
<li>从 URL 获取 data</li>
<li>CallBackFunction 调用并传 data 参数。</li>
<li>移除 responseCallbacks 中对于的 CallBackFunction</li>
</ol>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>JSBridge 的设计方式可以扩展到其他的跨平台（需要两个平台都能作为服务端）互调情况下。</p>
<ol>
<li>两个平台之间信息交互通过 JSON</li>
<li>JSON 中包括：调用接口的唯一标示，data 数据，handler 名字（数据接收函数的唯一标示），接收返回数据函数的唯一标示。</li>
<li>创建一个 Message 类存储 JSON 中的数据，方便处理</li>
</ol>
<p>数据结构：</p>
<ol>
<li>messageHandlers Map, Key 函数唯一标示，需要提前约定，调用的时候也需要</li>
<li>responseCallbacks Map，key 是动态生成的唯一标示</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
