<!doctype html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Python,Crawler,BeautifulSoup," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="BeautifulSoup对象BeautifulSoup 表示一个文档的全部内容 支持：Navigating the tree, Searching the tree 创建BeautifulSoup对象">
<meta name="keywords" content="Python,Crawler,BeautifulSoup">
<meta property="og:type" content="article">
<meta property="og:title" content="Crawler Beautiful Soup 4 文档阅读记录">
<meta property="og:url" content="http://yoursite.com/2016/10/23/Python/crawler/Crawler Beautiful Soup 4/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:description" content="BeautifulSoup对象BeautifulSoup 表示一个文档的全部内容 支持：Navigating the tree, Searching the tree 创建BeautifulSoup对象">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2021-08-12T14:50:57.311Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Crawler Beautiful Soup 4 文档阅读记录">
<meta name="twitter:description" content="BeautifulSoup对象BeautifulSoup 表示一个文档的全部内容 支持：Navigating the tree, Searching the tree 创建BeautifulSoup对象">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/10/23/Python/crawler/Crawler Beautiful Soup 4/"/>





  <title>Crawler Beautiful Soup 4 文档阅读记录 | Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/23/Python/crawler/Crawler Beautiful Soup 4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Crawler Beautiful Soup 4 文档阅读记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-23T13:18:12+08:00">
                2016-10-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="BeautifulSoup对象"><a href="#BeautifulSoup对象" class="headerlink" title="BeautifulSoup对象"></a>BeautifulSoup对象</h1><p>BeautifulSoup 表示一个文档的全部内容</p>
<p>支持：<code>Navigating the tree</code>, <code>Searching the tree</code></p>
<h2 id="创建BeautifulSoup对象"><a href="#创建BeautifulSoup对象" class="headerlink" title="创建BeautifulSoup对象"></a>创建BeautifulSoup对象</h2><a id="more"></a>
<h3 id="通过html文本对象-string"><a href="#通过html文本对象-string" class="headerlink" title="通过html文本对象 string"></a>通过html文本对象 string</h3><pre><code>html_doc = &quot;&quot;&quot;
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;

&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,
&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and
&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;
&quot;&quot;&quot;

from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc, &apos;html.parser&apos;)

print(soup.prettify())
</code></pre><h3 id="通过一个html文件-file"><a href="#通过一个html文件-file" class="headerlink" title="通过一个html文件 file"></a>通过一个html文件 file</h3><pre><code>soup_from_file = BeautifulSoup(open(&apos;index.html&apos;))
</code></pre><h2 id="BeautifulSoup对象的一些简单操作"><a href="#BeautifulSoup对象的一些简单操作" class="headerlink" title="BeautifulSoup对象的一些简单操作"></a>BeautifulSoup对象的一些简单操作</h2><p>soup对象的标题</p>
<pre><code>soup.title
# &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;
</code></pre><p>soup对象’title’标签标签名</p>
<pre><code>soup.title.name
# u&apos;title&apos;
</code></pre><p>soup对象’title’标签的内容</p>
<pre><code>soup.title.string
# u&apos;The Dormouse&apos;s story&apos;
</code></pre><p>soup对象标题的父标签的标签名</p>
<pre><code>soup.title.parent.name
# u&apos;head&apos;
</code></pre><p>soup对象的<code>p</code>标签，只获取到第一个<code>p</code>标签</p>
<pre><code>soup.p
# &lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;
</code></pre><p>soup对象<code>p</code>标签<code>class</code>的值</p>
<pre><code>soup.p[&apos;class&apos;]
# u&apos;title&apos;
</code></pre><p>soup对象的<code>a</code>标签，只获取到第一个<code>a</code>标签</p>
<pre><code>soup.a
# &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;
</code></pre><p>soup对象中所有的<code>a</code>标签,返回一个list</p>
<pre><code>soup.find_all(&apos;a&apos;)
# [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,
#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,
#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]
</code></pre><p>soup对象中<code>id=&quot;link3&quot;</code>的标签</p>
<pre><code>soup.find(id=&quot;link3&quot;)
# &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;
</code></pre><p>获取标签中的某个属性</p>
<pre><code>for link in soup.find_all(&apos;a&apos;):
    print(link.get(&apos;href&apos;))
</code></pre><p>获取文档中所有的内容：</p>
<pre><code>print(soup.get_text())
</code></pre><h1 id="对象的种类"><a href="#对象的种类" class="headerlink" title="对象的种类"></a>对象的种类</h1><p>BeautifulSoup将ntml文档解析成复杂的树形结构，每个节点都是一个Python对象</p>
<p>树形结构对象：</p>
<ol>
<li>Tag</li>
<li>NavigableString</li>
<li>BeautifulSoup</li>
<li>Comment</li>
</ol>
<h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h2><p>Tag有很多属性和方法</p>
<h3 id="获取Tag对象"><a href="#获取Tag对象" class="headerlink" title="获取Tag对象"></a>获取Tag对象</h3><pre><code>tag_obj = soup.b
type(tag_obj) # &lt;class &apos;bs4.el ment.Tag&apos;&gt;
</code></pre><h3 id="Tag-name"><a href="#Tag-name" class="headerlink" title="Tag name"></a>Tag name</h3><p>获取Tag的名字</p>
<pre><code>tag_obj.name
</code></pre><p>改变Tag的名字</p>
<pre><code>tag_obj.name = &apos;new_name&apos;
</code></pre><h3 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h3><p>一个tag一般有很多属性</p>
<p>获取属性，根据属性名：</p>
<pre><code>tag_attr_value = tag_obj[&apos;class&apos;]
</code></pre><p>获取tag所有的属性，返回dict</p>
<pre><code>tag_attrs = tag_obj.attrs
</code></pre><p>tag属性增删改：</p>
<pre><code>tag_obj[&apos;class&apos;] = &apos;new_class&apos;
del tag[&apos;class&apos;]
# 增需要指定值
tag_obj[&apos;class&apos;] = &apos;&apos;
</code></pre><h3 id="Multi-calued-attributes-多值属性"><a href="#Multi-calued-attributes-多值属性" class="headerlink" title="Multi-calued attributes 多值属性"></a>Multi-calued attributes 多值属性</h3><p>HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.</p>
<p>获取支持多属性值的属性，返回list：</p>
<pre><code>css_soup = BeautifulSoup(&apos;&lt;p class=&quot;body strikeout&quot;&gt;&lt;/p&gt;&apos;)
css_soup.p[&apos;class&apos;]
# [&quot;body&quot;, &quot;strikeout&quot;]
</code></pre><p>如果一个不支持多属性的属性设置成多属性是无效的：</p>
<pre><code>id_soup = BeautifulSoup(&apos;&lt;p id=&quot;my id&quot;&gt;&lt;/p&gt;&apos;)
id_soup.p[&apos;id&apos;]
# &apos;my id&apos;
</code></pre><h2 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h2><p>BeautifulSoup 使用 NavigableString 包装tag内部的内容：</p>
<pre><code>tag_obj.string
type(tag_obj.string)
</code></pre><p>NavigableString 字符串于 Python 中的 Unicode 字符串相同，并且支持其他的特性。</p>
<p>通过<code>unicode()</code>方法将 NavigableString 对象转换成普通的字符串：</p>
<pre><code>s = unicode(tag_obj.string)
print(type(s))
</code></pre><p>NavigableString 不能直接编辑，但是可以使用<code>replace_with()</code>替换：</p>
<pre><code>tag_obj.replace_with(&quot;new tag content&quot;)
</code></pre><p>如果想在Beautiful Soup之外使用 NavigableString 对象,需要调用 unicode() 方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.</p>
<h2 id="Comments-and-other-special-strings-注释和特殊字符串"><a href="#Comments-and-other-special-strings-注释和特殊字符串" class="headerlink" title="Comments and other special strings 注释和特殊字符串"></a>Comments and other special strings 注释和特殊字符串</h2><p><code>Comment</code> 是一个特殊的  <code>NavigableString</code>:</p>
<pre><code>markup = &quot;&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;&quot;
soup = BeautifulSoup(markup)
comment = soup.b.string
type(comment)
# &lt;class &apos;bs4.element.Comment&apos;&gt;
</code></pre><h1 id="Navigating-the-tree-遍历文档树"><a href="#Navigating-the-tree-遍历文档树" class="headerlink" title="Navigating the tree 遍历文档树"></a>Navigating the tree 遍历文档树</h1><h2 id="Going-down-向下分析，子节点"><a href="#Going-down-向下分析，子节点" class="headerlink" title="Going down 向下分析，子节点"></a>Going down 向下分析，子节点</h2><p>Tag 里面嵌套了子 Tag</p>
<h3 id="Navigating-using-tag-names-使用-Tag-名字获取tag"><a href="#Navigating-using-tag-names-使用-Tag-名字获取tag" class="headerlink" title="Navigating using tag names 使用 Tag 名字获取tag"></a>Navigating using tag names 使用 Tag 名字获取tag</h3><pre><code>soup.b
soup.find_all(&apos;b&apos;)
</code></pre><h3 id="contents-and-children"><a href="#contents-and-children" class="headerlink" title=".contents and .children"></a>.contents and .children</h3><p>获取tag中的子tag<code>.contents</code>，返回list</p>
<p>BeautifulSoup 对象有一个 children</p>
<pre><code>len(soup.contents) # 1
soup.contents[0].name # html
</code></pre><p>遍历：</p>
<pre><code>for child in title_tag.children:
    print(child)
</code></pre><h3 id="descendants-包含子孙节点"><a href="#descendants-包含子孙节点" class="headerlink" title=".descendants  包含子孙节点"></a>.descendants  包含子孙节点</h3><pre><code>for child in head_tag.descendants:
    print(child)
# &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;
# The Dormouse&apos;s story
</code></pre><h3 id="string"><a href="#string" class="headerlink" title=".string"></a>.string</h3><ol>
<li>如果一个 tag 的没有子tag，但是有内容，那么<code>.string</code>表示内容</li>
<li>如果一个 tag 只有一个子tag，那么<code>.string</code>表示子tag的内容</li>
<li>如果一个 tag 的 child 由多个，那么<code>.string</code>为 None</li>
</ol>
<h3 id="strings-and-stripped-strings"><a href="#strings-and-stripped-strings" class="headerlink" title=".strings and stripped_strings"></a>.strings and stripped_strings</h3><p><code>.strings</code>:获取子节点中所有的内容</p>
<p><code>stripped_strings</code>:去除多余的空格或者换行</p>
<h2 id="Going-up-分析父节点"><a href="#Going-up-分析父节点" class="headerlink" title="Going up 分析父节点"></a>Going up 分析父节点</h2><p>每个 tag 有它的父节点</p>
<h3 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h3><p>获取父节点<code>.parent</code></p>
<pre><code>title_tag = soup.title
title_tag.parent
# &lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;
</code></pre><p> <code>html</code> tag 的父节点是 BeautifulSoup 对象</p>
<pre><code> html_tag = soup.html
type(html_tag.parent)
# &lt;class &apos;bs4.BeautifulSoup&apos;&gt;
</code></pre><p>BeautifulSoup 对象的父节点为 None：</p>
<pre><code>print(soup.parent)
# None
</code></pre><h3 id="parents"><a href="#parents" class="headerlink" title=".parents"></a>.parents</h3><pre><code>link = soup.a
link
# &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;
for parent in link.parents:
    if parent is None:
        print(parent)
    else:
        print(parent.name)
# p
# body
# html
# [document]
# None
</code></pre><h2 id="Going-sideways-兄弟节点"><a href="#Going-sideways-兄弟节点" class="headerlink" title="Going sideways 兄弟节点"></a>Going sideways 兄弟节点</h2><h3 id="next-sibling-and-previous-sibling"><a href="#next-sibling-and-previous-sibling" class="headerlink" title=".next_sibling and .previous_sibling"></a>.next_sibling and .previous_sibling</h3><h3 id="next-siblings-and-previous-siblings"><a href="#next-siblings-and-previous-siblings" class="headerlink" title=".next_siblings and .previous_siblings"></a>.next_siblings and .previous_siblings</h3><pre><code>for sibling in soup.a.next_siblings:
    print(repr(sibling)) # repr 去除空格
</code></pre><h2 id="Going-back-and-forth-回退和前进"><a href="#Going-back-and-forth-回退和前进" class="headerlink" title="Going back and forth 回退和前进"></a>Going back and forth 回退和前进</h2><p>按照 BeautifulSoup 的解析过程为流程</p>
<p>HTML解析器把这段字符串转换成一连串的事件: “打开<html>标签”,”打开一个<head><meta name="generator" content="Hexo 3.9.0">标签”,”打开一个<title>标签”,”添加一段字符串”,”关闭<title>标签”,”打开<p>标签”,等等.</p>
<h3 id="next-element-and-previous-element"><a href="#next-element-and-previous-element" class="headerlink" title=".next_element and .previous_element"></a>.next_element and .previous_element</h3><p><code>.next_element</code>:可能是内容 string，也可能是下一个元素（这个时候和<code>.next_sibling</code>结果一样）</p>
<h3 id="next-elements-和-previous-element"><a href="#next-elements-和-previous-element" class="headerlink" title=".next_elements 和 .previous_element"></a>.next_elements 和 .previous_element</h3><h1 id="Searching-the-tree-搜索文档树"><a href="#Searching-the-tree-搜索文档树" class="headerlink" title="Searching the tree 搜索文档树"></a>Searching the tree 搜索文档树</h1><h2 id="Kinds-of-filters-过滤器"><a href="#Kinds-of-filters-过滤器" class="headerlink" title="Kinds of filters 过滤器"></a>Kinds of filters 过滤器</h2><h3 id="string-字符串-过滤器"><a href="#string-字符串-过滤器" class="headerlink" title="string 字符串 过滤器"></a>string 字符串 过滤器</h3><p>使用字符串为过滤器</p>
<pre><code>soup.find_all(&apos;b&apos;)
</code></pre><h3 id="A-regular-expression-正则表达式作为过滤器"><a href="#A-regular-expression-正则表达式作为过滤器" class="headerlink" title="A regular expression 正则表达式作为过滤器"></a>A regular expression 正则表达式作为过滤器</h3><p>正则表达式对象作为参数</p>
<pre><code>import re
for tag in soup.find_all(re.compile(&quot;^b&quot;)):
    print(tag.name)
</code></pre><h3 id="A-list-集合作为过滤器"><a href="#A-list-集合作为过滤器" class="headerlink" title="A list 集合作为过滤器"></a>A list 集合作为过滤器</h3><p>集合内部是 string， 认为其中一个符合就是符合</p>
<pre><code>soup.find_all([&quot;a&quot;, &quot;b&quot;])
</code></pre><h3 id="True"><a href="#True" class="headerlink" title="True"></a>True</h3><p>可以匹配任何值，但是不会返回字符串节点</p>
<h3 id="A-function-方法作为过滤器"><a href="#A-function-方法作为过滤器" class="headerlink" title="A function 方法作为过滤器"></a>A function 方法作为过滤器</h3><p>定义一个方法，如果适合就返回 True，不适合就返回 False</p>
<pre><code>def has_class_but_no_id(tag):
    return tag.has_attr(&apos;class&apos;) and not tag.has_attr(&apos;id&apos;)

soup.find_all(has_class_but_no_id)

def not_lacie(href):
return href and not re.compile(&quot;lacie&quot;).search(href)
soup.find_all(href=not_lacie)
</code></pre><h2 id="find-all"><a href="#find-all" class="headerlink" title="find_all()"></a>find_all()</h2><pre><code>def find_all(self, name=None, attrs={}, recursive=True, text=None, limit=None, **kwargs):
</code></pre><p>搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件.</p>
<pre><code>import re
soup.find(text=re.compile(&quot;sisters&quot;))
# u&apos;Once upon a time there were three little sisters; and their names were\n&apos;
</code></pre><h3 id="name-参数"><a href="#name-参数" class="headerlink" title="name 参数"></a>name 参数</h3><p>查找 tag 的名字，忽略字符串对象</p>
<pre><code>soup.find_all(&quot;title&quot;)
</code></pre><h3 id="keyword-arguments"><a href="#keyword-arguments" class="headerlink" title="keyword arguments"></a>keyword arguments</h3><p>用于搜索 tag 中的属性</p>
<pre><code>soup.find_all(id=&apos;link2&apos;)
soup.find_all(href=re.compile(&apos;elsie&apos;))
</code></pre><p>属性为 True 表示所有有这个属性的 tag</p>
<pre><code>soup.find_all(id=True)
</code></pre><p>但是 HTML 5 中有些属性不能用来作为 keyword</p>
<p>需要将其设置为 dict：</p>
<pre><code>soup.find_all(attrs={&quot;data-foo&quot;: &quot;value&quot;})
</code></pre><h3 id="Searching-by-CSS-class-按-CSS-搜索"><a href="#Searching-by-CSS-class-按-CSS-搜索" class="headerlink" title="Searching by CSS class 按 CSS 搜索"></a>Searching by CSS class 按 CSS 搜索</h3><p>使用 CSS 搜索 tag</p>
<p> Beautiful Soup 4.1.2 中使用 <code>class_</code> 代替 <code>class</code>，因为 class 是 Python 的保留字</p>
<p> 当 tag 中 class 有多个值的时候，在搜索中有一个满足就为满足</p>
<p> 如果同时搜索多个值，其顺序是有要求的，必须和定义的顺序一样。</p>
<p> If you want to search for tags that match two or more CSS classes, you should use a CSS selector:</p>
<pre><code>css_soup.find_all(&quot;p&quot;, class_=&quot;strikeout body&quot;)
</code></pre><h3 id="string-arguments"><a href="#string-arguments" class="headerlink" title="string arguments"></a>string arguments</h3><p>can pass in a string, a regular expression, a list, a function, or the value True</p>
<h3 id="limit-arguments"><a href="#limit-arguments" class="headerlink" title="limit arguments"></a>limit arguments</h3><p>设置搜索结果返回的最大个数</p>
<pre><code>soup.find_all(&quot;a&quot;, limit=2)
</code></pre><h3 id="recursive-arguments"><a href="#recursive-arguments" class="headerlink" title="recursive arguments"></a>recursive arguments</h3><p>递归，设置成 False 表示查找一个子项</p>
<pre><code>soup.html.find_all(&quot;title&quot;)
# [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]

soup.html.find_all(&quot;title&quot;, recursive=False)
# []
</code></pre><h2 id="Calling-a-tag-is-like-calling-find-all-像调用-tag-一样调用-find-all"><a href="#Calling-a-tag-is-like-calling-find-all-像调用-tag-一样调用-find-all" class="headerlink" title="Calling a tag is like calling find_all() 像调用 tag 一样调用 find_all()"></a>Calling a tag is like calling find_all() 像调用 tag 一样调用 find_all()</h2><pre><code>soup.title.find_all(string=True)
soup.title(string=True)
</code></pre><h2 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h2><pre><code>find(name, attrs, recursive, string, **kwargs)
</code></pre><p>寻找一个结果，下面两个结果一样：但是第一个返回的是list</p>
<pre><code>soup.find_all(&apos;title&apos;, limit=1)
# [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]

soup.find(&apos;title&apos;)
# &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;
</code></pre><p>如果没有结果 find 返回 None， fang_all 返回 list空</p>
<h2 id="find-parents-and-find-parent"><a href="#find-parents-and-find-parent" class="headerlink" title="find_parents() and find_parent()"></a>find_parents() and find_parent()</h2><pre><code>find_parents(name, attrs, string, limit, **kwargs)
find_parent(name, attrs, string, **kwargs)
</code></pre><h2 id="find-next-siblings-and-find-next-sibling"><a href="#find-next-siblings-and-find-next-sibling" class="headerlink" title="find_next_siblings() and find_next_sibling()"></a>find_next_siblings() and find_next_sibling()</h2><h2 id="find-previous-siblings-and-find-previous-sibling"><a href="#find-previous-siblings-and-find-previous-sibling" class="headerlink" title="find_previous_siblings() and find_previous_sibling()"></a>find_previous_siblings() and find_previous_sibling()</h2><h2 id="find-all-next-and-find-next"><a href="#find-all-next-and-find-next" class="headerlink" title="find_all_next() and find_next()"></a>find_all_next() and find_next()</h2><h2 id="find-all-previous-and-find-previous"><a href="#find-all-previous-and-find-previous" class="headerlink" title="find_all_previous() and find_previous()"></a>find_all_previous() and find_previous()</h2><h2 id="CSS-selectors"><a href="#CSS-selectors" class="headerlink" title="CSS selectors"></a>CSS selectors</h2><p>Beautiful Soup支持大部分的CSS选择器</p>
<p>在 Tag 或 BeautifulSoup 对象的 .select() 方法中传入字符串参数,即可使用CSS选择器的语法找到tag:</p>
<pre><code>soup.select(&quot;title&quot;)
# [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]

soup.select(&quot;p nth-of-type(3)&quot;)
# [&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;]
</code></pre><p>通过tag标签逐层查找:</p>
<pre><code>soup.select(&quot;body a&quot;)
# [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,
#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot;  id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,
#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]

soup.select(&quot;html head title&quot;)
# [&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]
</code></pre><p>找到某个tag标签下的直接子标签:</p>
<pre><code>soup.select(&quot;head &gt; title&quot;)
soup.select(&quot;p &gt; a:nth-of-type(2)&quot;)
soup.select(&quot;p &gt; #link1&quot;)
</code></pre><p>找到兄弟节点标签:</p>
<pre><code>soup.select(&quot;#link1 ~ .sister&quot;)
soup.select(&quot;#link1 + .sister&quot;)
</code></pre><p>通过CSS的类名查找:</p>
<pre><code>soup.select(&quot;.sister&quot;)
soup.select(&quot;[class~=sister]&quot;)
</code></pre><p>通过tag的id查找:</p>
<pre><code>soup.select(&quot;#link1&quot;)
soup.select(&quot;a#link2&quot;)
</code></pre><p>通过是否存在某个属性来查找:</p>
<pre><code>soup.select(&apos;a[href]&apos;)
</code></pre><p>通过属性的值来查找:</p>
<p>通过语言设置来查找:</p>
<h1 id="Modifying-the-tree"><a href="#Modifying-the-tree" class="headerlink" title="Modifying the tree"></a>Modifying the tree</h1><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><h2 id="Pretty-printing"><a href="#Pretty-printing" class="headerlink" title="Pretty-printing"></a>Pretty-printing</h2><p>将Beautiful Soup的文档树格式化后以Unicode编码输出,每个XML/HTML标签都独占一行</p>
<p>BeautifulSoup 对象和它的tag节点都可以调用 prettify() 方法</p>
<h2 id="Non-pretty-printing"><a href="#Non-pretty-printing" class="headerlink" title="Non-pretty printing"></a>Non-pretty printing</h2><p>输出没有格式的字符串</p>
<pre><code>unicode()
str()
</code></pre><p>You can also call encode() to get a bytestring, and decode() to get Unicode.</p>
<h2 id="get-text"><a href="#get-text" class="headerlink" title="get_text()"></a>get_text()</h2><p>只获取内容文本</p>
</title></title></head></html></p>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"># Python</a>
          
            <a href="/tags/Crawler/" rel="tag"># Crawler</a>
          
            <a href="/tags/BeautifulSoup/" rel="tag"># BeautifulSoup</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/17/Android/第三方/RxJava/Rxjava使用过程问题/" rel="next" title="Rxjava 使用过程问题">
                <i class="fa fa-chevron-left"></i> Rxjava 使用过程问题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/30/Android/animate/Android 动画原来可以这样写/" rel="prev" title="Android 动画原来可以这样写">
                Android 动画原来可以这样写 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/head1.jpg"
               alt="Double" />
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#BeautifulSoup对象"><span class="nav-number">1.</span> <span class="nav-text">BeautifulSoup对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建BeautifulSoup对象"><span class="nav-number">1.1.</span> <span class="nav-text">创建BeautifulSoup对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通过html文本对象-string"><span class="nav-number">1.1.1.</span> <span class="nav-text">通过html文本对象 string</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过一个html文件-file"><span class="nav-number">1.1.2.</span> <span class="nav-text">通过一个html文件 file</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BeautifulSoup对象的一些简单操作"><span class="nav-number">1.2.</span> <span class="nav-text">BeautifulSoup对象的一些简单操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对象的种类"><span class="nav-number">2.</span> <span class="nav-text">对象的种类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tag"><span class="nav-number">2.1.</span> <span class="nav-text">Tag</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取Tag对象"><span class="nav-number">2.1.1.</span> <span class="nav-text">获取Tag对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tag-name"><span class="nav-number">2.1.2.</span> <span class="nav-text">Tag name</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Attributes"><span class="nav-number">2.1.3.</span> <span class="nav-text">Attributes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multi-calued-attributes-多值属性"><span class="nav-number">2.1.4.</span> <span class="nav-text">Multi-calued attributes 多值属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NavigableString"><span class="nav-number">2.2.</span> <span class="nav-text">NavigableString</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Comments-and-other-special-strings-注释和特殊字符串"><span class="nav-number">2.3.</span> <span class="nav-text">Comments and other special strings 注释和特殊字符串</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Navigating-the-tree-遍历文档树"><span class="nav-number">3.</span> <span class="nav-text">Navigating the tree 遍历文档树</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Going-down-向下分析，子节点"><span class="nav-number">3.1.</span> <span class="nav-text">Going down 向下分析，子节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Navigating-using-tag-names-使用-Tag-名字获取tag"><span class="nav-number">3.1.1.</span> <span class="nav-text">Navigating using tag names 使用 Tag 名字获取tag</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#contents-and-children"><span class="nav-number">3.1.2.</span> <span class="nav-text">.contents and .children</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#descendants-包含子孙节点"><span class="nav-number">3.1.3.</span> <span class="nav-text">.descendants  包含子孙节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string"><span class="nav-number">3.1.4.</span> <span class="nav-text">.string</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#strings-and-stripped-strings"><span class="nav-number">3.1.5.</span> <span class="nav-text">.strings and stripped_strings</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Going-up-分析父节点"><span class="nav-number">3.2.</span> <span class="nav-text">Going up 分析父节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#parent"><span class="nav-number">3.2.1.</span> <span class="nav-text">.parent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parents"><span class="nav-number">3.2.2.</span> <span class="nav-text">.parents</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Going-sideways-兄弟节点"><span class="nav-number">3.3.</span> <span class="nav-text">Going sideways 兄弟节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#next-sibling-and-previous-sibling"><span class="nav-number">3.3.1.</span> <span class="nav-text">.next_sibling and .previous_sibling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#next-siblings-and-previous-siblings"><span class="nav-number">3.3.2.</span> <span class="nav-text">.next_siblings and .previous_siblings</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Going-back-and-forth-回退和前进"><span class="nav-number">3.4.</span> <span class="nav-text">Going back and forth 回退和前进</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#next-element-and-previous-element"><span class="nav-number">3.4.1.</span> <span class="nav-text">.next_element and .previous_element</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#next-elements-和-previous-element"><span class="nav-number">3.4.2.</span> <span class="nav-text">.next_elements 和 .previous_element</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Searching-the-tree-搜索文档树"><span class="nav-number">4.</span> <span class="nav-text">Searching the tree 搜索文档树</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Kinds-of-filters-过滤器"><span class="nav-number">4.1.</span> <span class="nav-text">Kinds of filters 过滤器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#string-字符串-过滤器"><span class="nav-number">4.1.1.</span> <span class="nav-text">string 字符串 过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-regular-expression-正则表达式作为过滤器"><span class="nav-number">4.1.2.</span> <span class="nav-text">A regular expression 正则表达式作为过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-list-集合作为过滤器"><span class="nav-number">4.1.3.</span> <span class="nav-text">A list 集合作为过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#True"><span class="nav-number">4.1.4.</span> <span class="nav-text">True</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-function-方法作为过滤器"><span class="nav-number">4.1.5.</span> <span class="nav-text">A function 方法作为过滤器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-all"><span class="nav-number">4.2.</span> <span class="nav-text">find_all()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#name-参数"><span class="nav-number">4.2.1.</span> <span class="nav-text">name 参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#keyword-arguments"><span class="nav-number">4.2.2.</span> <span class="nav-text">keyword arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Searching-by-CSS-class-按-CSS-搜索"><span class="nav-number">4.2.3.</span> <span class="nav-text">Searching by CSS class 按 CSS 搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-arguments"><span class="nav-number">4.2.4.</span> <span class="nav-text">string arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#limit-arguments"><span class="nav-number">4.2.5.</span> <span class="nav-text">limit arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#recursive-arguments"><span class="nav-number">4.2.6.</span> <span class="nav-text">recursive arguments</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Calling-a-tag-is-like-calling-find-all-像调用-tag-一样调用-find-all"><span class="nav-number">4.3.</span> <span class="nav-text">Calling a tag is like calling find_all() 像调用 tag 一样调用 find_all()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find"><span class="nav-number">4.4.</span> <span class="nav-text">find()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-parents-and-find-parent"><span class="nav-number">4.5.</span> <span class="nav-text">find_parents() and find_parent()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-next-siblings-and-find-next-sibling"><span class="nav-number">4.6.</span> <span class="nav-text">find_next_siblings() and find_next_sibling()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-previous-siblings-and-find-previous-sibling"><span class="nav-number">4.7.</span> <span class="nav-text">find_previous_siblings() and find_previous_sibling()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-all-next-and-find-next"><span class="nav-number">4.8.</span> <span class="nav-text">find_all_next() and find_next()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-all-previous-and-find-previous"><span class="nav-number">4.9.</span> <span class="nav-text">find_all_previous() and find_previous()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS-selectors"><span class="nav-number">4.10.</span> <span class="nav-text">CSS selectors</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Modifying-the-tree"><span class="nav-number">5.</span> <span class="nav-text">Modifying the tree</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Output"><span class="nav-number">6.</span> <span class="nav-text">Output</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pretty-printing"><span class="nav-number">6.1.</span> <span class="nav-text">Pretty-printing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Non-pretty-printing"><span class="nav-number">6.2.</span> <span class="nav-text">Non-pretty printing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#get-text"><span class="nav-number">6.3.</span> <span class="nav-text">get_text()</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
