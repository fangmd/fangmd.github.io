<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="ToolBar,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="如何创建一个ToolBar 在activity布局文件中加入Toolbar控件  &amp;lt;android.support.v7.widget.Toolbar android:id=&amp;quot;@+id/my_toolbar&amp;quot; android:layout_width=&amp;quot;match_parent&amp;quot; android:layout_height=&amp;quot;?attr/ac">
<meta name="keywords" content="ToolBar">
<meta property="og:type" content="article">
<meta property="og:title" content="ToolBar">
<meta property="og:url" content="http://yoursite.com/2016/03/22/Android/view/ToolBar/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:description" content="如何创建一个ToolBar 在activity布局文件中加入Toolbar控件  &amp;lt;android.support.v7.widget.Toolbar android:id=&amp;quot;@+id/my_toolbar&amp;quot; android:layout_width=&amp;quot;match_parent&amp;quot; android:layout_height=&amp;quot;?attr/ac">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2021-08-12T14:50:57.276Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ToolBar">
<meta name="twitter:description" content="如何创建一个ToolBar 在activity布局文件中加入Toolbar控件  &amp;lt;android.support.v7.widget.Toolbar android:id=&amp;quot;@+id/my_toolbar&amp;quot; android:layout_width=&amp;quot;match_parent&amp;quot; android:layout_height=&amp;quot;?attr/ac">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/03/22/Android/view/ToolBar/">





  <title>ToolBar | Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/22/Android/view/ToolBar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ToolBar</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-22T12:18:12+08:00">
                2016-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="如何创建一个ToolBar"><a href="#如何创建一个ToolBar" class="headerlink" title="如何创建一个ToolBar"></a>如何创建一个ToolBar</h2><ol>
<li><p>在activity布局文件中加入<code>Toolbar</code>控件</p>
<p> &lt;android.support.v7.widget.Toolbar</p>
<pre><code>android:id=&quot;@+id/my_toolbar&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;?attr/actionBarSize&quot;
android:background=&quot;?attr/colorPrimary&quot;
android:elevation=&quot;4dp&quot;
android:theme=&quot;@style/ThemeOverlay.AppCompat.ActionBar&quot;
app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;/&gt;
</code></pre></li>
</ol>
<a id="more"></a>
<p>标题颜色的设置注意兼容问题</p>
<ol start="2">
<li><p>修改<code>sytle</code>资源文件</p>
<pre><code>&lt;style name=&quot;MyTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;
    &lt;!-- Customize your theme here. --&gt;
    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;
    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;
    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;
&lt;/style&gt;
</code></pre></li>
<li>在清单文件中更改activity的主题，为<code>android:theme=&quot;@style/MyTheme&quot;</code></li>
</ol>
<p>##ToolBar常见的设置</p>
<ol start="0">
<li><p>0</p>
<pre><code>setSupportActionbar(toolbar);
</code></pre></li>
<li><p>设置标题</p>
<pre><code>actionBar.setTitle(&quot;微信&quot;);
</code></pre></li>
<li><p>设置不显示标题</p>
<pre><code>actionBar.setDisplayShowTitleEnabled(false);
</code></pre></li>
<li><p>设置显示返回按钮<code>Home</code>，左侧按钮：对应的系统id为<code>android.R.home</code></p>
<pre><code>actionBar.setDisplayHomeAsUpEnabled(true);
</code></pre></li>
<li><p>定制返回按钮<code>Home</code>的图标</p>
<pre><code>actionBar.setHomeAsUpIndicator(R.mipmap.ic_add_black_18dp);
</code></pre></li>
<li><p>设置标题图标</p>
<pre><code>actionBar.setIcon(R.mipmap.ic_launcher);
actionBar.setLogo(R.mipmap.ic_launcher);
</code></pre><p>两个的效果一样</p>
</li>
<li><p>设置监听事件</p>
<pre><code>@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home: // 返回键的id
            finish();
            break;
    }
    return true;
}
</code></pre></li>
<li><p>用反射机制获取title对应的<code>TextView</code></p>
<pre><code>private TextView getActionBarTitleTextView() {
    TextView titleTextView = null;

    try {
        Field f = mToolbar.getClass().getDeclaredField(&quot;mTitleTextView&quot;);
        f.setAccessible(true);
        titleTextView = ((TextView) f.get(mToolbar));
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return titleTextView;
}
</code></pre></li>
<li><p>在toolbar上使用spinner</p>
</li>
<li><p>自定义内部控件</p>
<pre><code>一些布局属性虽然没有提示，但是可以使用。
</code></pre></li>
<li><p>添加一个搜索按钮</p>
<ul>
<li><p>添加<code>menu</code>xml文件</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
          xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;
    &lt;item
        android:id=&quot;@+id/search&quot;
        android:icon=&quot;@android:drawable/ic_menu_search&quot;
        app:actionViewClass=&quot;android.support.v7.widget.SearchView&quot;
        app:showAsAction=&quot;ifRoom|collapseActionView&quot;
        android:title=&quot;Search&quot;
    /&gt;
&lt;/menu&gt;
</code></pre><p>这里使用兼容的方式，注意<code>app</code>；<code>showAsAction</code>里面的属性必须有<code>collapseActionView</code>才能用代码控制折叠</p>
</li>
<li><p>代码二</p>
<pre><code>@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.option, menu);
    mItem = menu.findItem(R.id.search);
    SearchView search = ((SearchView) MenuItemCompat.getActionView(mItem));
    search.setOnQueryTextListener(this);
    return true;
}

    @Override
public boolean onQueryTextSubmit(String query) {
    Toast.makeText(MainActivity.this, &quot;搜索&quot; + query, Toast.LENGTH_SHORT).show();
    MenuItemCompat.collapseActionView(mItem);
    return true;
}
</code></pre><p>搜索添加输入方式：<code>search.setInputType(InputType.TYPE_CLASS_NUMBER);</code></p>
<p>点击其他控件展开搜索：</p>
<p>  @Override<br>  public void onClick(View v) {</p>
<pre><code>Toast.makeText(MainActivity.this, &quot;点击事件打开搜索&quot;, Toast.LENGTH_SHORT).show();
MenuItemCompat.expandActionView(mItem);
</code></pre><p>  }</p>
</li>
</ul>
</li>
</ol>
<h2 id="ToolBar-左侧空白处理"><a href="#ToolBar-左侧空白处理" class="headerlink" title="ToolBar 左侧空白处理"></a>ToolBar 左侧空白处理</h2><pre><code>&lt;style name=&quot;ClubToolbar&quot; parent=&quot;Widget.AppCompat.Toolbar&quot;&gt;  
    &lt;item name=&quot;contentInsetStart&quot;&gt;0dp&lt;/item&gt;&lt;!-- 设置该属性解决空白部分--&gt;  
&lt;/style&gt;

&lt;!-- Base application theme. “NoActionBar”隐藏原有的Actionbar 设置Toolbar --&gt;
    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;
    //.....
    &lt;item name=&quot;toolbarStyle&quot;&gt;@style/ClubToolbar&lt;/item&gt;
    &lt;/style&gt;
</code></pre><h2 id="ToolBar-Class-OverView"><a href="#ToolBar-Class-OverView" class="headerlink" title="ToolBar Class OverView"></a>ToolBar Class OverView</h2><blockquote>
<p>A standard toolbar for use within application content.</p>
</blockquote>
<blockquote>
<p>A Toolbar is a generalization of action bars for use within application layouts. While an action bar is traditionally part of an Activity’s opaque window decor controlled by the framework, a Toolbar may be placed at any arbitrary level of nesting within a view hierarchy. An application may choose to designate a Toolbar as the action bar for an Activity using the setActionBar() method.</p>
</blockquote>
<p>Toolbar也属于action bars的范畴，用来给用户控制应用的布局。它是一个不透明的窗口的传统部件，用来控制fragmentwork，toolbar里面可以放置多层次的内部组件。 可以通过<code>setActionBar()</code>方法来设置<code>Toolbar</code></p>
<blockquote>
<p>Toolbar supports a more focused feature set than ActionBar. From start to end, a toolbar may contain a combination of the following optional elements:</p>
</blockquote>
<p>Toolbar提供更多的特性比<code>ActionBar</code>，有一下特性</p>
<blockquote>
<p>A navigation button. This may be an Up arrow, navigation menu toggle, close, collapse, done or another glyph of the app’s choosing. This button should always be used to access other navigational destinations within the container of the Toolbar and its signified content or otherwise leave the current context signified by the Toolbar. The navigation button is vertically aligned within the Toolbar’s minimum height, if set.</p>
</blockquote>
<p>导航按钮：home按钮</p>
<blockquote>
<p>A branded logo image. This may extend to the height of the bar and can be arbitrarily wide.</p>
</blockquote>
<p>一个logo图片</p>
<blockquote>
<p>A title and subtitle. The title should be a signpost for the Toolbar’s current position in the navigation hierarchy and the content contained there. The subtitle, if present should indicate any extended information about the current content. If an app uses a logo image it should strongly consider omitting a title and subtitle.</p>
</blockquote>
<p>标题和副标题</p>
<blockquote>
<p>One or more custom views. The application may add arbitrary child views to the Toolbar. They will appear at this position within the layout. If a child view’s Toolbar.LayoutParams indicates a Gravity value of CENTER_HORIZONTAL the view will attempt to center within the available space remaining in the Toolbar after all other elements have been measured.</p>
</blockquote>
<p>其他视图控件：通过<code>Toolbar.LayoutParams</code>控制控件的位置</p>
<blockquote>
<p>An action menu. The menu of actions will pin to the end of the Toolbar offering a few frequent, important or typical actions along with an optional overflow menu for additional actions. Action buttons are vertically aligned within the Toolbar’s minimum height, if set.</p>
</blockquote>
<p>一个菜单</p>
<blockquote>
<p>In modern Android UIs developers should lean more on a visually distinct color scheme for toolbars than on their application icon. The use of application icon plus title as a standard layout is discouraged on API 21 devices and newer.</p>
</blockquote>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ToolBar/" rel="tag"># ToolBar</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/21/Android/Build类介绍/" rel="next" title="Build 类">
                <i class="fa fa-chevron-left"></i> Build 类
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/03/22/Android/UI/界面侧滑/" rel="prev" title="android 界面侧滑">
                android 界面侧滑 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#如何创建一个ToolBar"><span class="nav-number">1.</span> <span class="nav-text">如何创建一个ToolBar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ToolBar-左侧空白处理"><span class="nav-number">2.</span> <span class="nav-text">ToolBar 左侧空白处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ToolBar-Class-OverView"><span class="nav-number">3.</span> <span class="nav-text">ToolBar Class OverView</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
