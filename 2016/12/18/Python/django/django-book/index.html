<!doctype html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Django,Django-Book,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="http://djangobook.com/  空项目目录结构介绍创建一个项目：1django-admin startproject mysite mysite/     manage.py     mysite/M         __init__.py         settings.py         urls.py         wsgi.py  mysite:root direc">
<meta name="keywords" content="Django,Django-Book">
<meta property="og:type" content="article">
<meta property="og:title" content="Django Book 记录">
<meta property="og:url" content="http://yoursite.com/2016/12/18/Python/django/django-book/index.html">
<meta property="og:site_name" content="Double">
<meta property="og:description" content="http://djangobook.com/  空项目目录结构介绍创建一个项目：1django-admin startproject mysite mysite/     manage.py     mysite/M         __init__.py         settings.py         urls.py         wsgi.py  mysite:root direc">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2021-08-12T14:50:57.314Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Django Book 记录">
<meta name="twitter:description" content="http://djangobook.com/  空项目目录结构介绍创建一个项目：1django-admin startproject mysite mysite/     manage.py     mysite/M         __init__.py         settings.py         urls.py         wsgi.py  mysite:root direc">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/12/18/Python/django/django-book/">





  <title>Django Book 记录 | Double</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Double</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/18/Python/django/django-book/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Double">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/head1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Double">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Django Book 记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-18T13:18:12+08:00">
                2016-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p><a href="http://djangobook.com/" target="_blank" rel="noopener">http://djangobook.com/</a></p>
</blockquote>
<h1 id="空项目目录结构介绍"><a href="#空项目目录结构介绍" class="headerlink" title="空项目目录结构介绍"></a>空项目目录结构介绍</h1><p>创建一个项目：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure></p>
<pre><code>mysite/
    manage.py
    mysite/M
        __init__.py
        settings.py
        urls.py
        wsgi.py
</code></pre><ul>
<li>mysite:root directory ,container project，这个目录作用不大，可以重新命名</li>
<li>manage.py:是一个命令行工具，通过他来和项目交互，在django-admin.py,manage.py中查看细节</li>
<li>mysite/mysite/:actual Python package for project.实际项目的包名</li>
<li>mysite/<strong>init</strong>.py:An empty file that tells Python that this directory should be considered a Python package.空文件，告诉Python该目录是一个Python包</li>
<li>mysite/settings.py:Settings/configuration for this Django project.</li>
<li>mysite/urls.py:urls，URL声明，一份由 django 驱动的网站目录</li>
<li>mysite/wsgi.py:一个WSGI兼容的web服务器入口</li>
</ul>
<h1 id="让局域网内的人也访问自己电脑上的临时服务器"><a href="#让局域网内的人也访问自己电脑上的临时服务器" class="headerlink" title="让局域网内的人也访问自己电脑上的临时服务器"></a>让局域网内的人也访问自己电脑上的临时服务器</h1><pre><code>python manage.py runserver 0.0.0.0:8000
</code></pre><p>表示服务器监听任意的网络接口</p>
<p>其他人使用你的 本地ip 就可以反问了：比如 你的本地ip：129.168.1.103，别人就可以通过下面的网络访问</p>
<pre><code>http://192.168.1.103:8000/
</code></pre><h1 id="关于-url-反斜杠"><a href="#关于-url-反斜杠" class="headerlink" title="关于 url 反斜杠"></a>关于 url 反斜杠</h1><blockquote>
<p>受配置文件setting中APPEND_SLASH项控制</p>
</blockquote>
<p>如果你是喜欢所有URL都以’/’结尾的人（Django开发者的偏爱），那么你只需要在每个URL后添加斜杠，并且设置”APPEND_SLASH”为”True”. 如果不喜欢URL以斜杠结尾或者根据每个URL来决定，那么需要设置”APPEND_SLASH”为”False”,并且根据你自己的意愿来添加结尾斜杠/在URL模式后.</p>
<h1 id="How-Django-processes-a-request"><a href="#How-Django-processes-a-request" class="headerlink" title="How Django processes a request"></a>How Django processes a request</h1><p>When a user requests a page from your Django-powered site, this is the algorithm the system follows to determine which Python code to execute:</p>
<ol>
<li>Django determines the root URLconf module to use. Ordinarily, this is the value of the ROOT_URLCONF setting, but if the incoming HttpRequest object has a urlconf attribute (set by middleware), its value will be used in place of the ROOT_URLCONF setting.</li>
<li>Django loads that Python module and looks for the variable urlpatterns. This should be a Python list of django.conf.urls.url() instances.</li>
<li>Django runs through each URL pattern, in order, and stops at the first one that matches the requested URL.<br>Once one of the regexes matches, Django imports and calls the given view, which is a simple Python function (or a class-based view). The view gets passed the following arguments:<br>An instance of HttpRequest.</li>
<li>If the matched regular expression returned no named groups, then the matches from the regular expression are provided as positional arguments.</li>
<li>The keyword arguments are made up of any named groups matched by the regular expression, overridden by any arguments specified in the optional kwargs argument to django.conf.urls.url().<br>If no regex matches, or if an exception is raised during any point in this process, Django invokes an appropriate error-handling view. See Error handling below.</li>
</ol>
<h1 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h1><p>模板系统在变量名中遇到点时，按照以下顺序尝试进行查找：</p>
<ol>
<li>字典类型查找 （比如 foo[“bar”] )</li>
<li>属性查找 (比如 foo.bar )</li>
<li>方法调用 （比如 foo.bar() )</li>
<li>列表类型索引查找 (比如 foo[bar] )</li>
</ol>
<h1 id="元祖后面的逗号"><a href="#元祖后面的逗号" class="headerlink" title="元祖后面的逗号"></a>元祖后面的逗号</h1><p>Python 要求单元素元组中必须使用逗号，以此消除与圆括号表达式之间的歧义。</p>
<pre><code># Comma correctly in place.
TEMPLATE_DIRS = (
    &apos;/home/django/mysite/templates&apos;,
)
</code></pre><h1 id="Model-代码-增删改查"><a href="#Model-代码-增删改查" class="headerlink" title="Model 代码 增删改查"></a>Model 代码 增删改查</h1><p>以 Model：为例子</p>
<pre><code>class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __str__(self):
        return self.name
</code></pre><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><ol>
<li>创建 Model 对象</li>
<li>调用 model.save()</li>
</ol>
<p>example：</p>
<pre><code>&gt;&gt;&gt; p = Publisher(name=&apos;Apress&apos;,
...         address=&apos;2855 Telegraph Ave.&apos;,
...         city=&apos;Berkeley&apos;,
...         state_province=&apos;CA&apos;,
...         country=&apos;U.S.A.&apos;,
...         website=&apos;http://www.apress.com/&apos;)

&gt;&gt;&gt; p.save()
</code></pre><h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><h3 id="删除一个对象"><a href="#删除一个对象" class="headerlink" title="删除一个对象"></a>删除一个对象</h3><pre><code>&gt;&gt;&gt; p.delete()
</code></pre><h3 id="删除所有对象"><a href="#删除所有对象" class="headerlink" title="删除所有对象"></a>删除所有对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.all().delete()
</code></pre><h3 id="删除部分"><a href="#删除部分" class="headerlink" title="删除部分"></a>删除部分</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(country=&apos;USA&apos;).delete()
</code></pre><h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><h3 id="更新一个对象"><a href="#更新一个对象" class="headerlink" title="更新一个对象"></a>更新一个对象</h3><ol>
<li>在已经获取到 Model 的对象并且它已经对于数据库中的某条数据前提下 修改 model 的属性值</li>
<li>调用 model.save() 更新数据</li>
</ol>
<h3 id="更新所有对象"><a href="#更新所有对象" class="headerlink" title="更新所有对象"></a>更新所有对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.all().update(country=&apos;USA&apos;)
</code></pre><p>update()方法会返回一个整型数值，表示受影响的记录条数。</p>
<h3 id="更新多个对象"><a href="#更新多个对象" class="headerlink" title="更新多个对象"></a>更新多个对象</h3><h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><h2 id="选择所有"><a href="#选择所有" class="headerlink" title="选择所有"></a>选择所有</h2><pre><code>&gt;&gt;&gt; Publisher.objects.all()
</code></pre><h3 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(name=&apos;Apress&apos;)
&gt;&gt;&gt; Publisher.objects.filter(country=&quot;U.S.A.&quot;, state_province=&quot;CA&quot;)
</code></pre><p>模糊查找：查找包含指定字符串</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.filter(name__contains=&quot;press&quot;)
</code></pre><p>icontains 与大小写无关</p>
<h3 id="获取当个对象"><a href="#获取当个对象" class="headerlink" title="获取当个对象"></a>获取当个对象</h3><pre><code>&gt;&gt;&gt; Publisher.objects.get(name=&quot;Apress&quot;)
</code></pre><p>如果 get 方法查询到多个数据，会报错 <code>MultipleObjectsReturned: get() returned more than one Publisher --</code></p>
<p>如果 get 没有找到数据也，会报错 <code>DoesNotExist: Publisher matching query does not exist.</code></p>
<h3 id="数据排序"><a href="#数据排序" class="headerlink" title="数据排序"></a>数据排序</h3><pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;name&quot;)
</code></pre><p>多个字段为标准：</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;state_province&quot;, &quot;address&quot;)
</code></pre><p>逆序：</p>
<pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&quot;-name&quot;)
</code></pre><p>使用 Meta 设置排序方式：</p>
<pre><code>class Meta:
        ordering = [&apos;name&apos;]
</code></pre><h3 id="连锁查询"><a href="#连锁查询" class="headerlink" title="连锁查询"></a>连锁查询</h3><pre><code>&gt;&gt;&gt; Publisher.objects.filter(country=&quot;U.S.A.&quot;).order_by(&quot;-name&quot;)
</code></pre><h3 id="限制返回的数据"><a href="#限制返回的数据" class="headerlink" title="限制返回的数据"></a>限制返回的数据</h3><pre><code>&gt;&gt;&gt; Publisher.objects.order_by(&apos;name&apos;)[0]
</code></pre><p>使用 切片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Publisher.objects.order_by(&apos;name&apos;)[0:2]</span><br></pre></td></tr></table></figure>
<p>注意，不支持Python的负索引(negative slicing)</p>
<h1 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h1><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><h1 id="URLconf-高级用法"><a href="#URLconf-高级用法" class="headerlink" title="URLconf 高级用法"></a>URLconf 高级用法</h1><h2 id="URL-导入方式"><a href="#URL-导入方式" class="headerlink" title="URL 导入方式"></a>URL 导入方式</h2><p>url 导入方式一普通模式：</p>
<p>url 导入方式二：字符串导入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^hello/$'</span>, <span class="string">'mysite.views.hello'</span> ),</span><br></pre></td></tr></table></figure>
<p>配合字符串 url ，使用多个视图前缀：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls.defaults <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">'mysite.views'</span>,</span><br><span class="line">    (<span class="string">r'^hello/$'</span>, <span class="string">'hello'</span>),</span><br><span class="line">    (<span class="string">r'^time/$'</span>, <span class="string">'current_datetime'</span>),</span><br><span class="line">    (<span class="string">r'^time/plus/(\d&#123;1,2&#125;)/$'</span>, <span class="string">'hours_ahead'</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">urlpatterns += patterns(<span class="string">'weblog.views'</span>,</span><br><span class="line">    (<span class="string">r'^tag/(\w+)/$'</span>, <span class="string">'tag'</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="定义调试模式的特例"><a href="#定义调试模式的特例" class="headerlink" title="定义调试模式的特例"></a>定义调试模式的特例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> settings.DEBUG:</span><br><span class="line">    urlpatterns += patterns(<span class="string">''</span>,</span><br><span class="line">        (<span class="string">r'^debuginfo/$'</span>, views.debug),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<h2 id="使用命名组"><a href="#使用命名组" class="headerlink" title="使用命名组"></a>使用命名组</h2><p>语法：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?P&lt;name&gt;pattern)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>切记命名组和非命名组不能同时使用。</p>
</blockquote>
<h2 id="向视图传入额外参数"><a href="#向视图传入额外参数" class="headerlink" title="向视图传入额外参数"></a>向视图传入额外参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^foo/$'</span>, views.foobar_view, &#123;<span class="string">'template_name'</span>: <span class="string">'template1.html'</span>&#125;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  views.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foobar_view</span><span class="params">(request, template_name)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="伪造捕捉到的URLconf值"><a href="#伪造捕捉到的URLconf值" class="headerlink" title="伪造捕捉到的URLconf值"></a>伪造捕捉到的URLconf值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^mydata/birthday/$'</span>, views.my_view, &#123;<span class="string">'month'</span>: <span class="string">'jan'</span>, <span class="string">'day'</span>: <span class="string">'06'</span>&#125;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="了解捕捉值和额外参数之间的优先级-额外的选项"><a href="#了解捕捉值和额外参数之间的优先级-额外的选项" class="headerlink" title="了解捕捉值和额外参数之间的优先级 额外的选项"></a>了解捕捉值和额外参数之间的优先级 额外的选项</h2><p>额外URLconf参数优先于捕捉值</p>
<h2 id="使用缺省视图参数"><a href="#使用缺省视图参数" class="headerlink" title="使用缺省视图参数"></a>使用缺省视图参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^blog/$'</span>, views.page),</span><br><span class="line">    (<span class="string">r'^blog/page(?P&lt;num&gt;\d+)/$'</span>, views.page),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="模板高级进阶"><a href="#模板高级进阶" class="headerlink" title="模板高级进阶"></a>模板高级进阶</h1><h2 id="RequestContext和Context处理器"><a href="#RequestContext和Context处理器" class="headerlink" title="RequestContext和Context处理器"></a>RequestContext和Context处理器</h2><h2 id="关闭-html自动转意"><a href="#关闭-html自动转意" class="headerlink" title="关闭 html自动转意"></a>关闭 html自动转意</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This will not be escaped: &#123;&#123; data|safe &#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="设置默认"><a href="#设置默认" class="headerlink" title="设置默认"></a>设置默认</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; data|default:"This is a string literal." &#125;&#125;</span><br></pre></td></tr></table></figure>
<h1 id="数据模型高级进阶"><a href="#数据模型高级进阶" class="headerlink" title="数据模型高级进阶"></a>数据模型高级进阶</h1><h2 id="访问多对多值-Many-to-Many-Values"><a href="#访问多对多值-Many-to-Many-Values" class="headerlink" title="访问多对多值(Many-to-Many Values)"></a>访问多对多值(Many-to-Many Values)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; b = Book.objects.get(id=50)</span><br><span class="line">&gt;&gt;&gt; b.authors.all()</span><br><span class="line">[&lt;Author: Adrian Holovaty&gt;, &lt;Author: Jacob Kaplan-Moss&gt;]</span><br><span class="line">&gt;&gt;&gt; b.authors.filter(first_name=&apos;Adrian&apos;)</span><br><span class="line">[&lt;Author: Adrian Holovaty&gt;]</span><br><span class="line">&gt;&gt;&gt; b.authors.filter(first_name=&apos;Adam&apos;)</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>
<p>反向查询也可以:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = Author.objects.get(first_name=&apos;Adrian&apos;, last_name=&apos;Holovaty&apos;)</span><br><span class="line">&gt;&gt;&gt; a.book_set.all()</span><br><span class="line">[&lt;Book: The Django Book&gt;, &lt;Book: Adrian&apos;s Other Book&gt;]</span><br></pre></td></tr></table></figure>
<h1 id="通用视图"><a href="#通用视图" class="headerlink" title="通用视图"></a>通用视图</h1><p>Django内建通用视图可以实现如下功能：</p>
<ul>
<li>完成常用的简单任务： 重定向到另一个页面以及渲染一个指定的模板。</li>
<li>显示列表和某个特定对象的详细内容页面。</li>
<li>呈现基于日期的数据的年/月/日归档页面，关联的详情页面，最新页面。</li>
</ul>
<h2 id="使用通用视图"><a href="#使用通用视图" class="headerlink" title="使用通用视图"></a>使用通用视图</h2><p>例子，呈现静态 “关于” 页面的 URLconf：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls.defaults <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> django.views.generic.simple <span class="keyword">import</span> direct_to_template</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    (<span class="string">r'^about/$'</span>, direct_to_template, &#123;</span><br><span class="line">        <span class="string">'template'</span>: <span class="string">'about.html'</span></span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="会话、用户和注册"><a href="#会话、用户和注册" class="headerlink" title="会话、用户和注册"></a>会话、用户和注册</h1><h2 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h2><p>cookies 是浏览器为 Web 服务器存储的一小段信息。</p>
<h3 id="存取Cookies"><a href="#存取Cookies" class="headerlink" title="存取Cookies"></a>存取Cookies</h3><p>HttpRequest 对象中有一个 COOKIES 对象，该对象的行为类似字典：</p>
<p>获取请求中的 cookies<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_color</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"favorite_color"</span> <span class="keyword">in</span> request.COOKIES:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"Your favorite color is %s"</span> % request.COOKIES[<span class="string">"favorite_color"</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You don't have a favorite color."</span>)</span><br></pre></td></tr></table></figure></p>
<p>写入 cookies：<code>set_cookie()</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"favorite_color"</span> <span class="keyword">in</span> request.GET:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Create an HttpResponse object...</span></span><br><span class="line">        response = HttpResponse(<span class="string">"Your favorite color is now %s"</span> % request.GET[<span class="string">"favorite_color"</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ... and set a cookie on the response</span></span><br><span class="line">        response.set_cookie(<span class="string">"favorite_color"</span>, request.GET[<span class="string">"favorite_color"</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You didn't give a favorite color."</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Django的-Session-框架"><a href="#Django的-Session-框架" class="headerlink" title="Django的 Session 框架"></a>Django的 Session 框架</h2><h3 id="打开-Sessions功能"><a href="#打开-Sessions功能" class="headerlink" title="打开 Sessions功能"></a>打开 Sessions功能</h3><p>Sessions 功能是通过一个中间件(参见第17章)和一个模型(model)来实现的。</p>
<ol>
<li>编辑 MIDDLEWARE_CLASSES 配置，确保 MIDDLEWARE_CLASSES 中包含 ‘django.contrib.sessions.middleware.SessionMiddleware’。</li>
<li>确认 INSTALLED_APPS 中有 ‘django.contrib.sessions’ (如果你是刚打开这个应用，别忘了运行 manage.py syncdb )5</li>
</ol>
<p>通常建立一个新的工程 Sessions 功能是默认开启的</p>
<h3 id="在视图中使用Session"><a href="#在视图中使用Session" class="headerlink" title="在视图中使用Session"></a>在视图中使用Session</h3><p>SessionMiddleware 激活后，每个传给视图(view)函数的第一个参数<code>HttpRequest</code> 对象都有一个 session 属性，这是一个字典型的对象。 你可以象用普通字典一样来用它。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set a session value:</span></span><br><span class="line">request.session[<span class="string">"fav_color"</span>] = <span class="string">"blue"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get a session value -- this could be called in a different view,</span></span><br><span class="line"><span class="comment"># or many requests later (or both):</span></span><br><span class="line">fav_color = request.session[<span class="string">"fav_color"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clear an item from the session:</span></span><br><span class="line"><span class="keyword">del</span> request.session[<span class="string">"fav_color"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if the session has a given key:</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">"fav_color"</span> <span class="keyword">in</span> request.session:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>例子：防止用户多次评论的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">post_comment</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method != <span class="string">'POST'</span>:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'Only POSTs are allowed'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'comment'</span> <span class="keyword">not</span> <span class="keyword">in</span> request.POST:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'Comment not submitted'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.session.get(<span class="string">'has_commented'</span>, <span class="literal">False</span>):</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"You've already commented."</span>)</span><br><span class="line"></span><br><span class="line">    c = comments.Comment(comment=request.POST[<span class="string">'comment'</span>])</span><br><span class="line">    c.save()</span><br><span class="line">    request.session[<span class="string">'has_commented'</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'Thanks for your comment!'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="用户与Authentication1"><a href="#用户与Authentication1" class="headerlink" title="用户与Authentication1"></a>用户与Authentication1</h2><p>通过session，我们可以在多次浏览器请求中保持数据，接下来的部分就是用session来处理用户登录了。 当然，不能仅凭用户的一面之词，我们就相信，所以我们需要认证。</p>
<ol>
<li>验证 (认证) 用户是否是他所宣称的用户(一般通过查询数据库验证其用户名和密码)</li>
<li>验证用户是否拥有执行某种操作的 授权 (通常会通过检查一个权限表来确认)</li>
</ol>
<p>Django 认证/授权 系统会包含以下的部分：</p>
<ul>
<li>用户 : 在网站注册的人</li>
<li>权限 : 用于标识用户是否可以执行某种操作的二进制(yes/no)标志</li>
<li>组 :一种可以将标记和权限应用于多个用户的常用方法</li>
<li>Messages : 向用户显示队列式的系统消息的常用方法</li>
</ul>
<h3 id="登录和退出"><a href="#登录和退出" class="headerlink" title="登录和退出"></a>登录和退出</h3><p>验证用户:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user = auth.authenticate(username=<span class="string">'john'</span>, password=<span class="string">'secret'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">"Correct!"</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">"Invalid password."</span></span><br></pre></td></tr></table></figure>
<p>登入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    username = request.POST.get(<span class="string">'username'</span>, <span class="string">''</span>)</span><br><span class="line">    password = request.POST.get(<span class="string">'password'</span>, <span class="string">''</span>)</span><br><span class="line">    user = auth.authenticate(username=username, password=password)</span><br><span class="line">    <span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> user.is_active:</span><br><span class="line">        <span class="comment"># Correct password, and the user is marked "active"</span></span><br><span class="line">        auth.login(request, user)</span><br><span class="line">        <span class="comment"># Redirect to a success page.</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/loggedin/"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># Show an error page</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/invalid/"</span>)</span><br></pre></td></tr></table></figure>
<p>logout:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> auth</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logout_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    auth.logout(request)</span><br><span class="line">    <span class="comment"># Redirect to a success page.</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/account/loggedout/"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，即使用户没有登录， logout() 也不会抛出任何异常。</p>
</blockquote>
<p>URLconf:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.views <span class="keyword">import</span> login, logout</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(<span class="string">''</span>,</span><br><span class="line">    <span class="comment"># existing patterns here...</span></span><br><span class="line">    (<span class="string">r'^accounts/login/$'</span>,  login),</span><br><span class="line">    (<span class="string">r'^accounts/logout/$'</span>, logout),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="限制已登录用户的访问"><a href="#限制已登录用户的访问" class="headerlink" title="限制已登录用户的访问"></a>限制已登录用户的访问</h3><p>一个简单原始的限制方法是检查 request.user.is_authenticated() ,然后重定向到登陆页面：</p>
<p>或者显示一个出错信息：</p>
<p>作为一个快捷方式, 你可以使用便捷的 login_required 修饰符:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib.auth.decorators import login_required</span><br><span class="line"></span><br><span class="line">@login_required</span><br><span class="line">def my_view(request):</span><br><span class="line">    # ...</span><br></pre></td></tr></table></figure>
<h3 id="处理注册"><a href="#处理注册" class="headerlink" title="处理注册"></a>处理注册</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.forms <span class="keyword">import</span> UserCreationForm</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render_to_response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        form = UserCreationForm(request.POST)</span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            new_user = form.save()</span><br><span class="line">            <span class="keyword">return</span> HttpResponseRedirect(<span class="string">"/books/"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form = UserCreationForm()</span><br><span class="line">    <span class="keyword">return</span> render_to_response(<span class="string">"registration/register.html"</span>, &#123;</span><br><span class="line">        <span class="string">'form'</span>: form,</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>template:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends "base.html" %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;Create an account&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Create an account<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">      &#123;&#123; form.as_p &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Create the account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="消息"><a href="#消息" class="headerlink" title="消息"></a>消息</h2><ul>
<li>要创建一条新的消息，使用 user.message_set.create(message=’message_text’) 。</li>
<li>要获得/删除消息，使用 user.get_and_delete_messages() ，这会返回一个 Message 对象的列表，并且从队列中删除返回的项。</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Django/" rel="tag"># Django</a>
          
            <a href="/tags/Django-Book/" rel="tag"># Django-Book</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/17/Python/django/Django-File-Upload/" rel="next" title="使用 Django 创建一个文件上传的服务器">
                <i class="fa fa-chevron-left"></i> 使用 Django 创建一个文件上传的服务器
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/19/Python/django/offical-doc/Django-admin/" rel="prev" title="Django-admin">
                Django-admin <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/head1.jpg" alt="Double">
          <p class="site-author-name" itemprop="name">Double</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">548</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">260</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#空项目目录结构介绍"><span class="nav-number">1.</span> <span class="nav-text">空项目目录结构介绍</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#让局域网内的人也访问自己电脑上的临时服务器"><span class="nav-number">2.</span> <span class="nav-text">让局域网内的人也访问自己电脑上的临时服务器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#关于-url-反斜杠"><span class="nav-number">3.</span> <span class="nav-text">关于 url 反斜杠</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-Django-processes-a-request"><span class="nav-number">4.</span> <span class="nav-text">How Django processes a request</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模版"><span class="nav-number">5.</span> <span class="nav-text">模版</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#元祖后面的逗号"><span class="nav-number">6.</span> <span class="nav-text">元祖后面的逗号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Model-代码-增删改查"><span class="nav-number">7.</span> <span class="nav-text">Model 代码 增删改查</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#增"><span class="nav-number">7.1.</span> <span class="nav-text">增</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删"><span class="nav-number">7.2.</span> <span class="nav-text">删</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#删除一个对象"><span class="nav-number">7.2.1.</span> <span class="nav-text">删除一个对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除所有对象"><span class="nav-number">7.2.2.</span> <span class="nav-text">删除所有对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除部分"><span class="nav-number">7.2.3.</span> <span class="nav-text">删除部分</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改"><span class="nav-number">7.3.</span> <span class="nav-text">改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#更新一个对象"><span class="nav-number">7.3.1.</span> <span class="nav-text">更新一个对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新所有对象"><span class="nav-number">7.3.2.</span> <span class="nav-text">更新所有对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新多个对象"><span class="nav-number">7.3.3.</span> <span class="nav-text">更新多个对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查"><span class="nav-number">7.4.</span> <span class="nav-text">查</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选择所有"><span class="nav-number">7.5.</span> <span class="nav-text">选择所有</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤数据"><span class="nav-number">7.5.1.</span> <span class="nav-text">过滤数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取当个对象"><span class="nav-number">7.5.2.</span> <span class="nav-text">获取当个对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据排序"><span class="nav-number">7.5.3.</span> <span class="nav-text">数据排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连锁查询"><span class="nav-number">7.5.4.</span> <span class="nav-text">连锁查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#限制返回的数据"><span class="nav-number">7.5.5.</span> <span class="nav-text">限制返回的数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Form"><span class="nav-number">8.</span> <span class="nav-text">Form</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#验证"><span class="nav-number">8.1.</span> <span class="nav-text">验证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#URLconf-高级用法"><span class="nav-number">9.</span> <span class="nav-text">URLconf 高级用法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#URL-导入方式"><span class="nav-number">9.1.</span> <span class="nav-text">URL 导入方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定义调试模式的特例"><span class="nav-number">9.2.</span> <span class="nav-text">定义调试模式的特例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用命名组"><span class="nav-number">9.3.</span> <span class="nav-text">使用命名组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#向视图传入额外参数"><span class="nav-number">9.4.</span> <span class="nav-text">向视图传入额外参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#伪造捕捉到的URLconf值"><span class="nav-number">9.5.</span> <span class="nav-text">伪造捕捉到的URLconf值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#了解捕捉值和额外参数之间的优先级-额外的选项"><span class="nav-number">9.6.</span> <span class="nav-text">了解捕捉值和额外参数之间的优先级 额外的选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用缺省视图参数"><span class="nav-number">9.7.</span> <span class="nav-text">使用缺省视图参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模板高级进阶"><span class="nav-number">10.</span> <span class="nav-text">模板高级进阶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestContext和Context处理器"><span class="nav-number">10.1.</span> <span class="nav-text">RequestContext和Context处理器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关闭-html自动转意"><span class="nav-number">10.2.</span> <span class="nav-text">关闭 html自动转意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置默认"><span class="nav-number">10.3.</span> <span class="nav-text">设置默认</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据模型高级进阶"><span class="nav-number">11.</span> <span class="nav-text">数据模型高级进阶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#访问多对多值-Many-to-Many-Values"><span class="nav-number">11.1.</span> <span class="nav-text">访问多对多值(Many-to-Many Values)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#通用视图"><span class="nav-number">12.</span> <span class="nav-text">通用视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用通用视图"><span class="nav-number">12.1.</span> <span class="nav-text">使用通用视图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#会话、用户和注册"><span class="nav-number">13.</span> <span class="nav-text">会话、用户和注册</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookies"><span class="nav-number">13.1.</span> <span class="nav-text">Cookies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#存取Cookies"><span class="nav-number">13.1.1.</span> <span class="nav-text">存取Cookies</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Django的-Session-框架"><span class="nav-number">13.2.</span> <span class="nav-text">Django的 Session 框架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#打开-Sessions功能"><span class="nav-number">13.2.1.</span> <span class="nav-text">打开 Sessions功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在视图中使用Session"><span class="nav-number">13.2.2.</span> <span class="nav-text">在视图中使用Session</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户与Authentication1"><span class="nav-number">13.3.</span> <span class="nav-text">用户与Authentication1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#登录和退出"><span class="nav-number">13.3.1.</span> <span class="nav-text">登录和退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#限制已登录用户的访问"><span class="nav-number">13.3.2.</span> <span class="nav-text">限制已登录用户的访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理注册"><span class="nav-number">13.3.3.</span> <span class="nav-text">处理注册</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#消息"><span class="nav-number">13.4.</span> <span class="nav-text">消息</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Double</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
